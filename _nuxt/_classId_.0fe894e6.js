import{a as B,s as E,b as L,r,w as k,e as p,o as u,f as i,u as o,t as M,h as b,i as w,v as I,j as t,k as g}from"./entry.712e2c55.js";import{u as N}from"./fetch.50084ecf.js";import{L as V}from"./index.4e4f5e4e.js";import{u as $}from"./wallet.47d7c9b9.js";const q=t("h1",null,"Claim your NFT Book",-1),x={key:0,style:{color:"red"}},D={key:1,style:{color:"green"}},F=t("hr",null,null,-1),O={key:2},R={key:3},K=t("p",null,[t("label",null,"Your Wallet")],-1),P=["disabled"],U=t("p",null,[t("label",null,"Message to creator (optional)")],-1),W=["disabled"],J=B({__name:"[classId]",setup(Y){const _=$(),{wallet:v}=E(_),{connect:f}=_,m=L(),c=r(""),y=r(!1),s=r(!1),a=r(v.value),d=r("");k(v,e=>{e&&(a.value=e)}),k(s,e=>{e&&(c.value="")});const C=p(()=>m.params.classId),h=p(()=>m.query.payment_id),S=p(()=>m.query.token);async function T(){try{s.value=!0;const{error:e}=await N(`${V}/likernft/book/purchase/${C.value}/claim/${h.value}`,{method:"POST",body:{paymentId:h.value,wallet:a.value,message:d.value},query:{token:S.value}},"$zHQEMaOIJB");if(e.value)throw e.value;y.value=!0}catch(e){console.error(e),c.value=e.toString()}finally{s.value=!1}}return(e,l)=>(u(),i("div",null,[q,o(c)?(u(),i("div",x,M(o(c)),1)):b("",!0),o(s)?(u(),i("div",D," Loading... ")):b("",!0),F,o(y)?(u(),i("section",O," Your wallet is recorded and the NFT book will been sent to you once its ready. ")):(u(),i("section",R,[K,w(t("input",{"onUpdate:modelValue":l[0]||(l[0]=n=>g(a)?a.value=n:null),placeholder:"like1...."},null,512),[[I,o(a)]]),t("button",{disabled:o(s),onClick:l[1]||(l[1]=(...n)=>o(f)&&o(f)(...n))}," Connect Keplr ",8,P),U,w(t("input",{"onUpdate:modelValue":l[2]||(l[2]=n=>g(d)?d.value=n:null)},null,512),[[I,o(d)]]),t("button",{disabled:o(s),onClick:T}," Submit ",8,W)]))]))}});export{J as default};
