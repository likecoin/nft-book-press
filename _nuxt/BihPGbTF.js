import{n as G,O as q,P as j,R as J,a0 as K,u as Q,I as W,r as p,s as S,h as X,x as H,o as i,A as x,w as a,a as t,t as n,B as s,J as h,d as Y,b as g,C as Z,c as k,D as tt,F as et,X as st,a1 as ot,M as nt,G as lt}from"./Bp2otxJu.js";import{_ as at}from"./Dcpc4eOn.js";import{_ as it}from"./BZgjfHN_.js";import{_ as rt}from"./D4Md7f4q.js";import"./BzEdxHSk.js";(function(){try{var u=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},c=new Error().stack;c&&(u._sentryDebugIds=u._sentryDebugIds||{},u._sentryDebugIds[c]="942d1202-65c9-44e0-a6d3-d66d5f3a1c87",u._sentryDebugIdIdentifier="sentry-dbid-942d1202-65c9-44e0-a6d3-d66d5f3a1c87")}catch{}})();const dt={class:"text-lg font-bold font-mono"},pt={class:"divide-y w-full"},ut={class:"px-4 py-3"},ct={class:"px-4 py-3"},ft={class:"px-4 py-3"},mt={class:"text-left px-4 py-3"},_t={class:"text-left px-4 py-3"},yt={class:"text-left px-4 py-3"},xt={class:"text-left px-4 py-3"},ht={class:"text-left px-4 py-3"},gt={class:"text-left px-4 py-3"},bt={class:"text-left px-4 py-3"},vt={class:"divide-y w-full"},St={key:0},kt={class:"text-left px-4 py-3"},It={class:"text-left px-4 py-3"},Bt={class:"text-left px-4 py-3"},Nt=G({__name:"[collectionId]",setup(u){const{LIKE_CO_API:c}=q().public,b=j(),{token:I}=J(b),B=K(),{lazyFetchCollectionById:P}=B,C=Q(),A=W(),f=p(""),m=p(!1),r=p(C.params.collectionId),w=p(C.query.payment_id),d=p(""),o=p({}),R=S(()=>{var l;return(l=B.getCollectionById(r.value))==null?void 0:l.name}),D=S(()=>$.value||!d.value||m.value),$=S(()=>o.value.shippingStatus==="shipped");X(m,l=>{l&&(f.value="")}),H(async()=>{const l=await $fetch(`${c}/likernft/book/collection/purchase/${r.value}/status/${w.value}`,{headers:{authorization:`Bearer ${I.value}`}});o.value=l,o.value.shippingMessage&&(d.value=o.value.shippingMessage),P(r.value)});async function U(){if(!D.value)try{m.value=!0,await $fetch(`${c}/likernft/book/collection/purchase/${r.value}/shipping/sent/${w.value}`,{method:"POST",body:{message:d.value},headers:{authorization:`Bearer ${I.value}`}}),A.push({name:"nft-book-store-collection-status-collectionId",params:{collectionId:r.value}})}catch(l){console.error(l),f.value=l.toString()}finally{m.value=!1}}return(l,e)=>{const V=st,T=ot,v=nt,F=at,O=it,L=lt,M=rt;return i(),x(M,null,{default:a(()=>[t("h1",dt,' NFT Book Collection Physical Good shipping status "'+n(s(R)||s(r))+'" ',1),s(f)?(i(),x(V,{key:0,icon:"i-heroicons-exclamation-triangle",color:"red",variant:"soft",title:`${s(f)}`,"close-button":{icon:"i-heroicons-x-mark-20-solid",color:"red",variant:"link",padded:!1},onClose:e[0]||(e[0]=_=>f.value="")},null,8,["title"])):h("",!0),s(m)?(i(),x(T,{key:1,animation:"carousel"},{indicator:a(()=>e[2]||(e[2]=[Y(" Loading... ")])),_:1})):h("",!0),s(b).isAuthenticated?(i(),x(v,{key:2},{header:a(()=>e[3]||(e[3]=[t("h3",{class:"font-bold font-mono"}," Order status ",-1)])),footer:a(()=>[g(O,{label:"Enter shipping information and message emailed to buyer"},{default:a(()=>[g(F,{modelValue:s(d),"onUpdate:modelValue":e[1]||(e[1]=_=>Z(d)?d.value=_:null),disabled:s($),placeholder:"shipping tracking ID, ETA..."},null,8,["modelValue","disabled"])]),_:1}),g(L,{label:"Set as Shipped and send email",disabled:s(D),onClick:U},null,8,["disabled"])]),default:a(()=>{var _;return[g(v,{ui:{body:{padding:""}}},{default:a(()=>{var y;return[t("table",pt,[t("tbody",null,[t("tr",null,[e[4]||(e[4]=t("th",{class:"text-left px-4 py-3"}," Buyer Email ",-1)),t("td",ut,n(s(o).email),1)]),t("tr",null,[e[5]||(e[5]=t("th",{class:"text-left px-4 py-3"}," Buyer Phone Number ",-1)),t("td",ct,n(s(o).phone),1)]),t("tr",null,[e[6]||(e[6]=t("th",{class:"text-left px-4 py-3"}," Reader Email ",-1)),t("td",ft,n(((y=s(o).giftInfo)==null?void 0:y.toEmail)||s(o).email),1)]),t("tr",null,[e[7]||(e[7]=t("th",{class:"text-left px-4 py-3"}," Shipping Status ",-1)),t("td",mt,n(s(o).shippingStatus),1)]),t("tr",null,[e[8]||(e[8]=t("th",{class:"text-left px-4 py-3"}," Shipping cost paid ",-1)),t("td",_t,n(s(o).shippingCost),1)]),t("tr",null,[e[9]||(e[9]=t("th",{class:"text-left px-4 py-3"}," Buyer Wallet ",-1)),t("td",yt,n(s(o).wallet),1)]),t("tr",null,[e[10]||(e[10]=t("th",{class:"text-left px-4 py-3"}," Price ",-1)),t("td",xt,n(s(o).price),1)]),t("tr",null,[e[11]||(e[11]=t("th",{class:"text-left px-4 py-3"}," Quantity ",-1)),t("td",ht,n(s(o).quantity),1)]),t("tr",null,[e[12]||(e[12]=t("th",{class:"text-left px-4 py-3"}," Buyer message ",-1)),t("td",gt,n(s(o).message),1)]),t("tr",null,[e[13]||(e[13]=t("th",{class:"text-left px-4 py-3"}," Sales channel ",-1)),t("td",bt,n(s(o).from),1)])])])]}),_:1}),(_=s(o).shippingDetails)!=null&&_.address?(i(),x(v,{key:0},{header:a(()=>e[14]||(e[14]=[t("h3",{class:"text-sm font-bold font-mono"}," Shipping Details ",-1)])),default:a(()=>{var y,E;return[t("table",vt,[t("tbody",null,[(y=s(o).shippingDetails)!=null&&y.name?(i(),k("tr",St,[e[15]||(e[15]=t("td",{class:"text-left px-4 py-3"}," Name ",-1)),t("td",kt,n(s(o).shippingDetails.name),1)])):h("",!0),(i(!0),k(et,null,tt(Object.entries((E=s(o).shippingDetails)==null?void 0:E.address),([N,z])=>(i(),k("tr",{key:N},[t("td",It,n(N),1),t("td",Bt,n(z),1)]))),128))])])]}),_:1})):h("",!0)]}),_:1})):h("",!0)]),_:1})}}});export{Nt as default};
//# sourceMappingURL=BihPGbTF.js.map
