import{a_ as Be,a$ as Ve,bt as We,b6 as ze,b8 as he,bz as Me,b9 as d,ba as h,bb as ve,aS as j,aT as v,b3 as A,aU as p,b4 as a,bf as je,bd as G,aW as s,aX as i,aY as ye,aV as b,br as qe,b7 as Ut,bk as Dt,b0 as Lt,b1 as Et,cb as Ft,cv as Ee,bi as E,bj as At,bo as Fe,bD as Pt,cw as Rt,b_ as Ot,b$ as Bt,be as Vt,bw as Wt,bv as zt,bg as Mt,cx as jt,b2 as Ae,cd as qt,ce as Pe}from"./DOA8qu7o.js";import{u as Ht,v as Kt,_ as Gt,f as Qt}from"./NoVBj4Ap.js";import{a as He,u as Ke,b as Xt}from"./Bi5RZg4N.js";import{D as Yt}from"./Cbme7xqh.js";import{b as Jt,u as Zt,_ as ea}from"./DdHymY7-.js";import{_ as ta}from"./6qh5Dqxu.js";import{_ as aa}from"./CQBq_Bkx.js";import{_ as oa}from"./Hgj7Ww9p.js";import{_ as na}from"./5x3xSctR.js";import{_ as la}from"./nnICj_Ut.js";import{_ as sa}from"./BmpMWbs9.js";import{u as ia}from"./DWaYRGoN.js";import{g as ra}from"./CXQkt-69.js";import"./CVaQ780k.js";import"./BEpAPAoJ.js";import"./DdErGxIq.js";import"./DW1orbKx.js";import"./BquWd5Vv.js";import"./mq6Is_q0.js";import"./BKZhm6cj.js";(function(){try{var S=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},o=new S.Error().stack;o&&(S._sentryDebugIds=S._sentryDebugIds||{},S._sentryDebugIds[o]="94aa19e9-126d-4427-98b3-59b783025cfd",S._sentryDebugIdIdentifier="sentry-dbid-94aa19e9-126d-4427-98b3-59b783025cfd")}catch{}})();const ca={class:"my-4"},ua={class:"w-full flex justify-center items-center gap-2 my-4"},da=Be({__name:"EditISCNMetadataForm",props:{classId:{}},emits:["iscnUpdated"],setup(S,{emit:o}){const{t:q}=Ve(),ue=o,M=He(),Q=We(),X=ze(),{wallet:Z,signer:de}=he(X),{validateWalletConsistency:H}=X,{writeContractAsync:P}=Jt(),{checkAndGrantUpdater:ae,waitForTransactionReceipt:me}=Zt(),{getNFTClassConfig:pe}=Ke(),{refreshBookMetadata:oe}=Me(),R=S,ne=d({}),O=d(!1),B=d(!1),k=d({type:"Book",title:"",description:"",isbn:"",publisher:"",publicationDate:"",author:{name:"",description:""},license:"All rights reserved",contentFingerprints:[{url:""}],downloadableUrls:[{url:"",type:"",fileName:""}],customLicense:"",language:"",bookInfoUrl:"",tags:[],coverUrl:""}),U=d({}),{payload:_,getFileTypeFromMime:Y}=Ht({iscnFormData:k,iscnChainData:U}),V=h(()=>Kt(k.value)),N=h(()=>{var m;return!((m=V.value)!=null&&m.length)});ve(()=>R.classId,async m=>{var g,w,x,T;if(m)try{B.value=!0,ne.value=await M.lazyFetchClassMetadataById(m);const r=ne.value;let C=[{url:"",type:"",fileName:""}];(g=r.potentialAction)!=null&&g.target&&Array.isArray(r.potentialAction.target)?C=r.potentialAction.target.map($=>({type:Y($.contentType),url:$.url,fileName:$.name})):r.sameAs&&Array.isArray(r.sameAs)&&(C=r.sameAs.map(f));const ee=[];r.keywords&&(Array.isArray(r.keywords)?ee.push(...r.keywords):ee.push(...r.keywords.split(",").map($=>$.trim()).filter($=>$))),U.value=r,k.value={...r,type:r["@type"]||"Book",title:r.name||"",description:r.description||"",isbn:r.isbn||"",publisher:r.publisher||"",publicationDate:r.datePublished||"",author:{name:((w=r.author)==null?void 0:w.name)||r.author||"",description:((x=r.author)==null?void 0:x.description)||""},license:r.usageInfo||"All Rights Reserved",contentFingerprints:((T=r.contentFingerprints)==null?void 0:T.map($=>({url:$})))||[{url:""}],downloadableUrls:C,customLicense:"",language:r.inLanguage||"",bookInfoUrl:r.url||"",tags:ee,coverUrl:r.thumbnailUrl||r.image||""}}catch(r){console.error("Error fetching ISCN data:",r)}finally{B.value=!1}},{immediate:!0});function f(m){try{const w=new URL(m).searchParams.get("name")||"",[x,T]=w.split(".");return{url:m.split("?")[0],fileName:x,type:T||""}}catch{return{url:m,fileName:"",type:""}}}async function J(){if(await H(),!Z.value||!de.value){Q.add({title:q("auth.login_required"),color:"red"});return}if(!N.value){Q.add({title:V.value.join(", "),color:"red"});return}O.value=!0;try{const m=Qt(_.value),g={name:m.name,description:m.description,...m,symbol:"BOOK",external_link:(m==null?void 0:m.url)||"",image:(m==null?void 0:m.thumbnailUrl)||"",nft_meta_collection_id:"nft_book",nft_meta_collection_name:"NFT Book",nft_meta_collection_description:"NFT Book by Liker Land",recordTimestamp:new Date().toISOString()},w=await pe(R.classId);await ae({classId:R.classId,wallet:Z.value});const x=await P({address:R.classId,abi:Xt,functionName:"update",args:[{name:g.name,symbol:w.symbol,metadata:JSON.stringify(g),max_supply:Yt}]}),T=await me({hash:x});if(!T||T.status!=="success")throw new Error("INVALID_RECEIPT");Q.add({title:q("edit_iscn.update_success"),color:"blue"}),await M.fetchClassMetadataById(R.classId),await oe(R.classId),ue("iscnUpdated",{classId:R.classId,metadata:g})}catch(m){Q.add({title:q("edit_iscn.update_failed"),description:m.message,color:"red"})}finally{O.value=!1}}return(m,g)=>{const w=je,x=Gt,T=qe;return v(),j("div",ca,[a(B)?(v(),A(w,{key:0,animation:"carousel",color:"primary",class:"w-full"})):(v(),A(x,{key:1,modelValue:a(k),"onUpdate:modelValue":g[0]||(g[0]=r=>G(k)?k.value=r:null)},null,8,["modelValue"])),p("div",ua,[s(T,{color:"primary",loading:a(O),onClick:J},{default:i(()=>[ye(b(a(q)("common.save")),1)]),_:1},8,["loading"])])])}}});function Re(S){return S?`${S.slice(0,10)}...${S.slice(-6)}`:"-"}const ma={class:"flex justify-between items-center w-full"},pa={class:"flex items-center gap-2"},_a=["textContent"],fa={class:"flex justify-between items-center"},ba=["textContent"],ha={class:"flex justify-between items-center gap-4"},va={key:0,class:"flex flex-col gap-1"},ya=["textContent"],ga=["textContent"],ka=["textContent"],wa={class:"text-right"},xa={class:"text-right"},Ca={class:"flex justify-end items-center"},Ia=["textContent"],Sa={class:"flex justify-between items-center w-full"},Na=["textContent"],Ta={class:"mt-[24px] flex flex-col gap-[12px]"},$a=["textContent"],Ua={key:0,class:"font-bold font-mono"},Da=["textContent"],La={class:"flex gap-2"},Ea={class:"flex justify-end items-center"},Fa=["textContent"],Aa=["textContent"],Pa={class:"flex items-center gap-2"},Ra={key:1,class:"flex items-center gap-2"},Oa={class:"flex items-center justify-center w-full mt-4"},Ba=["textContent"],Oe=2,Va=1,io=Be({__name:"[classId]",setup(S){const{t:o}=Ve(),{CHAIN_EXPLORER_URL:q,BOOK3_URL:ue,LIKE_CO_API:M}=Ut().public,Q=ze(),X=Me(),Z=He(),de=ia(),{token:H}=he(X),{wallet:P}=he(Q),{updateBookListingSetting:ae,reduceListingPendingNFTCountById:me}=X,{lazyFetchClassMetadataById:pe}=Z,{fetchStripeConnectStatusByWallet:oe}=de,{getBalanceOf:R}=Ke(),ne=Dt(),O=Lt(),B=We(),k=d(""),U=d(!1),_=d(ne.params.classId),Y=d(""),V=d(0),N=d({}),f=d([]),J=d(!1),m=d({}),g=d(!1),w=d(!1),x=d(""),T=d(""),r=d([]),C=d(""),ee=d(""),$=d(!1),ge=d(""),ke=d({}),we=d(!0),le=d(!1),xe=d(!0),Ge=d(!0),Qe=d(!1),Xe=d(!0),se=d(-99),te=d(!1),Ce=h(()=>{var e;return(e=Z.getClassMetadataById(_.value))==null?void 0:e.name}),Ie=h(()=>{var e;return(e=N==null?void 0:N.value)==null?void 0:e.ownerWallet}),_e=h(()=>P.value&&Ie.value===P.value),Ye=h(()=>_e.value),D=h(()=>Y.value.split(",").filter((e,t)=>!!e||t===0).map(e=>e.trim()).map(e=>({channel:e,url:Ft({classId:_.value,priceIndex:V.value,channel:e,isUseLikerLandLink:Ge.value})}))),K=d(void 0),ie=h({get:()=>!!K.value,set:e=>{e||(K.value=void 0)}}),Je=h(()=>fe.value.length?fe.value.reduce((t,l)=>{const c=l.from||"empty";return t[c]||(t[c]={count:0,totalUSD:0}),t[c].count+=1,t[c].totalUSD+=l.price,t},{}):{}),fe=h(()=>{var e;return(e=m.value)!=null&&e.orders?m.value.orders.map(t=>{const l=t.timestamp,c=new Date(l),y=`${c.getDate()}/${c.getMonth()+1}/${c.getFullYear()}`;return{...t,formattedDate:y}}).sort((t,l)=>l.timestamp-t.timestamp):[]}),Ze=h(()=>[{key:"actions",label:o("table.actions"),sortable:!1},{key:"orderDate",label:o("table.order_date"),sortable:!0},{key:"status",label:o("table.status"),sortable:!0},{key:"from",label:o("table.sales_channel"),sortable:!0},{key:"price",label:o("form.price"),sortable:!0,class:"w-[120px]"},{key:"priceName",label:o("table.price_name"),sortable:!1},{key:"quantity",label:o("table.quantity"),sortable:!0},{key:"coupon",label:o("table.coupon_applied"),sortable:!1},{key:"buyerEmail",label:o("table.buyer_email"),sortable:!0},{key:"readerEmail",label:o("table.reader_email"),sortable:!0},{key:"wallet",label:o("table.reader_wallet"),sortable:!0},{key:"message",label:o("table.reader_message"),sortable:!1}]);function et(e=""){const t=[`${Ce.value||_.value}`,`price_${V.value}`];return e&&t.push(`channel_${e}`),t.join("_")}function tt(e){const t=[];return e.status==="completed"&&e.txHash?t.push([{label:o("status_page.view_transaction"),icon:"i-heroicons-magnifying-glass",to:`${q}/${e.txHash}`,target:"_blank"}]):e.status==="pendingNFT"&&Ye.value&&t.push([{label:"Send NFT",icon:"i-heroicons-paper-airplane",to:O({name:"my-books-send-classId",params:{classId:e.classId},query:{owner_wallet:Ie.value,payment_id:e.id}})}]),e.status==="paid"&&t.push([{label:o("status_page.send_reminder_email"),icon:"i-heroicons-envelope",click:()=>{_t(e)}}]),["pendingNFT","paid"].includes(e.status)&&t.push([{label:o("status_page.mark_complete"),icon:"i-heroicons-check-circle",click:()=>{ft(e)}}]),t}function at(e){switch(e.status){case"paid":return"Paid";case"pendingNFT":return o("status.pendingNFT");case"completed":return o("status.completed");default:return e.status}}function ot(e){switch(e.status){case"paid":return"blue";case"pendingNFT":return"amber";case"completed":return"green";default:return"gray"}}const nt=h(()=>{var e;return(e=fe.value)==null?void 0:e.map((t,l)=>{var c;return{index:l,readerEmail:((c=t.giftInfo)==null?void 0:c.toEmail)||t.email,buyerEmail:t.email,buyerPhone:t.phone||"",status:t.status,statusLabel:at(t),statusLabelColor:ot(t),orderDate:t.formattedDate,wallet:t.wallet||"",walletLink:Ee(t.wallet),shortenWallet:Re(t.wallet),priceName:t.priceName,price:t.price||0,coupon:t.coupon||"",message:t.message||"",from:t.from||"",quantity:t.quantity||1,actions:tt(t)}}).filter(t=>{var c,y,L,u,W;if(!x.value)return!0;const l=x.value.toLowerCase();return t.readerEmail.toLowerCase().includes(l)||t.buyerEmail.toLowerCase().includes(l)||t.buyerPhone.toLowerCase().includes(l)||((c=t.wallet)==null?void 0:c.toLowerCase().includes(l))||((y=t.priceName)==null?void 0:y.toLowerCase().includes(l))||((L=t.statusLabel)==null?void 0:L.toLowerCase().includes(l))||((u=t.orderDate)==null?void 0:u.toLowerCase().includes(l))||((W=t.from)==null?void 0:W.toLowerCase().includes(l))})}),lt=h(()=>{const e=[{key:"wallet",label:o("table.wallet"),sortable:!0}];return _e.value&&e.push({key:"remove",label:"",sortable:!1}),e}),st=h(()=>r.value.map((e,t)=>({index:t,wallet:e,shortenWallet:Re(e),walletLink:Ee(e)})));function it(e){switch(e){case"empty":return"Not set";default:return e}}const rt=h(()=>{var e;return(e=Object.entries(Je.value))==null?void 0:e.map(([t,l])=>({id:t,idLabel:it(t),count:l.count||0,totalUSD:(l.totalUSD||0).toFixed(2)}))}),ct=h(()=>{var e;return(e=N.value.prices)==null?void 0:e.map((t,l)=>({label:`${t.name.en||t.name} - $${t.price}`,value:l,disabled:l===V.value}))}),ut=h(()=>{const e=[];return e.push({key:"sort",label:o("table.sort"),sortable:!1,class:"w-[60px]"},{key:"name",label:o("table.name"),sortable:!1},{key:"delivery",label:o("table.delivery"),sortable:!1,class:"w-[120px]"},{key:"stock",label:o("table.stock"),sortable:!1,class:"w-[120px]"},{key:"price",label:o("table.price_usd"),sortable:!1,class:"w-[120px]"}),_e.value&&e.push({key:"details",label:o("table.details"),sortable:!1,class:"w-[80px]"}),e}),dt=h(()=>{const e=f.value.map((t,l)=>({...t,originalIndex:l,isStockBalancePlaceholderRow:!1}));return f.value.some(t=>!t.isAutoDeliver)&&e.push({name:"",isAutoDeliver:!1,stock:o("table.stock_balance",{count:se.value}),price:"",isStockBalancePlaceholderRow:!0}),e});ve(U,e=>{e&&(k.value="")}),ve(P,async e=>{e?await be():se.value=-99}),Et(async()=>{U.value=!0;try{const e=await $fetch(`${M}/likernft/book/store/${_.value}`,{headers:{authorization:`Bearer ${H.value}`}});N.value=e,f.value=N.value.prices;const{moderatorWallets:t,connectedWallets:l,mustClaimToView:c,tableOfContents:y,enableCustomMessagePage:L,hideDownload:u}=e;r.value=t,$.value=!!(l&&Object.keys(l).length),ke.value=l;const W=l&&Object.keys(l)[0];if(W&&(ge.value=W,W!==P.value)){Xe.value=!1;try{await oe(W)}catch(z){console.error(z)}}we.value=c,le.value=u,xe.value=L,T.value=y;const F=await $fetch(`${M}/likernft/book/purchase/${_.value}/orders`,{headers:{authorization:`Bearer ${H.value}`}});if(m.value=F,P.value){await be();try{await oe(P.value)}catch(z){console.error(z)}}pe(_.value)}catch(e){k.value=e.toString()}finally{U.value=!1}});async function be(){const e=N.value.pendingNFTCount||0,t=await R(_.value,P.value),l=f.value.filter(c=>!c.isAutoDeliver).reduce((c,y)=>c+(y.stock||0),0);se.value=Number(t)-l-Va-e||0}async function mt(e){e<=0||await Se(e,e-1)}async function pt(e){e>=f.value.length-1||await Se(e,e+1)}async function Se(e,t){try{J.value=!0;const l=[...f.value],[c]=l.splice(e,1);l.splice(t,0,c);const y=f.value[e].index;await $fetch(`${M}/likernft/book/store/${_.value}/price/${y}/order`,{method:"PUT",headers:{authorization:`Bearer ${H.value}`},body:{order:t}}),f.value=l.map((L,u)=>({...L,order:u})),N.value.prices=f.value,B.add({icon:"i-heroicons-check-circle",title:"Updated editions order successfully",timeout:2e3,color:"green"})}catch(l){f.value=N.value.prices,k.value=l.toString()}finally{J.value=!1}}async function _t(e){var l,c;if(!((c=(l=m.value)==null?void 0:l.orders)==null?void 0:c.find(y=>y.id===e.id)))throw new Error("ORDER_NOT_FOUND");await $fetch(`${M}/likernft/book/purchase/${_.value}/status/${e.id}/remind`,{method:"POST",headers:{authorization:`Bearer ${H.value}`}}),B.add({icon:"i-heroicons-check-circle",title:o("status_page.send_reminder_email"),timeout:2e3,color:"green"})}async function ft(e){var y,L;if(!confirm("Do you want to skip the 'Send NFT' action and override this payment status to 'completed'?"))return;const l=(L=(y=m.value)==null?void 0:y.orders)==null?void 0:L.find(u=>u.id===e.id);if(!l)throw new Error("ORDER_NOT_FOUND");const c=l.status;l.status="completed";try{await $fetch(`${M}/likernft/book/purchase/${_.value}/sent/${e.id}`,{method:"POST",body:{txHash:null,quantity:e.quantity||1},headers:{authorization:`Bearer ${H.value}`}})}catch(u){throw l.status=c,u}c==="pendingNFT"&&(N.value.pendingNFTCount-=1,me(_.value,1))}function bt(){C.value&&(r.value.push(C.value),C.value="")}async function ht(){try{if(C.value)throw new Error(o("errors.add_moderator_wallet"));if(ee.value)throw new Error(o("errors.add_notification_email"));U.value=!0;const e=$.value&&ge.value?ke.value:null;await ae(_.value,{moderatorWallets:r.value,connectedWallets:e,hideDownload:le.value,mustClaimToView:we.value,tableOfContents:T.value,enableCustomMessagePage:xe.value}),await Ae(O({name:"my-books"}))}catch(e){const t=e.data||e;console.error(t),k.value=t}finally{U.value=!1,Qe.value=!1}}async function Ne(e=""){await navigator.clipboard.writeText(e),B.add({icon:"i-heroicons-check-circle",title:o("purchase_link.copied_to_clipboard"),timeout:2e3,color:"green"})}function vt(){qt({data:D.value,fileName:`${_.value}_purchase_links.csv`,fileType:"csv"})}function yt(){try{sessionStorage.setItem("nft_book_press_batch_qrcode",Pe(D.value.map(({channel:e,...t})=>({key:e,...t})))),window.open("/batch-qrcode?print=1","batch_qrcode","popup,menubar=no,location=no,status=no")}catch(e){console.error(e),B.add({icon:"i-heroicons-exclamation-circle",title:o("purchase_link.failed_print_qr"),timeout:0,color:"red",ui:{title:"text-red-400 dark:text-red-400"}})}}async function gt(){try{sessionStorage.setItem("nft_book_press_batch_shorten_url",Pe(D.value.map(({channel:e,url:t})=>({key:e,url:t})))),await Ae(O({name:"batch-short-links",query:{print:1}}))}catch(e){console.error(e),B.add({icon:"i-heroicons-exclamation-circle",title:o("purchase_link.failed_shorten_links"),timeout:0,color:"red",ui:{title:"text-red-400 dark:text-red-400"}})}}function kt(){te.value=!0}async function wt(){await be(),te.value=!1}function xt(e){const l=ra().API_GET_ARWEAVE_V2_LINK;return e.some(c=>!!c.startsWith(l)||c.includes("?key="))}async function Ct({classId:e,metadata:t}){const{contentFingerprints:l}=t;if(l){const c=xt(l);c!==le.value&&(le.value=c),await ae(e,{hideDownload:c})}}return(e,t)=>{const l=At,c=je,y=Ot,L=Rt,u=qe,W=da,F=Pt,z=ta,re=Wt,Te=aa,$e=Vt,Ue=oa,It=na,De=zt,St=la,Le=Mt,Nt=ea,Tt=jt,$t=sa;return v(),A($t,{class:"space-y-10 pb-10"},{default:i(()=>[a(k)?(v(),A(l,{key:0,icon:"i-heroicons-exclamation-triangle",color:"red",variant:"soft",title:`${a(k)}`,"close-button":{icon:"i-heroicons-x-mark-20-solid",color:"red",variant:"link",padded:!1},onClose:t[0]||(t[0]=n=>k.value="")},null,8,["title"])):E("",!0),a(U)?(v(),A(c,{key:1,animation:"carousel"},{indicator:i(()=>[ye(b(a(o)("loading.progress")),1)]),_:1})):E("",!0),a(X).isAuthenticated?(v(),j(Fe,{key:2},[s(F,{ui:{header:{base:"flex justify-between items-center"},body:{padding:"12px"},ring:a(w)?"ring-2 ring-gray-500":"ring-1 ring-gray-200"}},{default:i(()=>[p("div",ma,[p("div",pa,[p("h3",{class:"font-bold font-mono",textContent:b(a(Ce)||a(_))},null,8,_a),s(L,{to:`${a(ue)}/store/${a(_)}`,class:"flex items-center",target:"_blank"},{default:i(()=>[s(y,{name:"i-heroicons-arrow-top-right-on-square",size:"xl"})]),_:1},8,["to"])]),s(u,{color:"gray",variant:"ghost",trailing:"",label:a(o)("form.edit_iscn_metadata"),icon:a(w)?"i-heroicons-chevron-up":"i-heroicons-chevron-down",onClick:t[1]||(t[1]=()=>{w.value=!a(w)})},null,8,["label","icon"])]),a(w)?(v(),A(W,{key:0,"class-id":a(_),onIscnUpdated:Ct},null,8,["class-id"])):E("",!0)]),_:1},8,["ui"]),s(F,{ui:{body:{padding:""}}},{header:i(()=>[p("div",fa,[p("h3",{class:"font-bold font-mono",textContent:b(a(o)("pages.editions"))},null,8,ba),p("div",ha,[s(u,{icon:"i-heroicons-plus",class:"mb-[12px]",variant:"outline",color:a(f).length>=Oe?"gray":"primary",disabled:a(f).length>=Oe,label:a(o)("form.add_edition"),to:a(O)({name:"my-books-status-classId-edit-new",params:{classId:a(_)},query:{price_index:a(f).length}})},null,8,["color","disabled","label","to"])])])]),footer:i(()=>[p("div",Ca,[s(u,{icon:"i-heroicons-plus",label:a(o)("buttons.mint_new_stock"),onClick:kt},null,8,["label"])])]),default:i(()=>[s(z,{columns:a(ut),rows:a(dt)},{"sort-data":i(({row:n})=>[!n.isStockBalancePlaceholderRow&&a(f).length>1?(v(),j("div",va,[s(u,{icon:n.originalIndex===0?"i-heroicons-chevron-down":"i-heroicons-chevron-up",variant:"ghost",color:"gray",size:"xs",label:String(n.originalIndex+1),disabled:a(J)||n.originalIndex<=0&&n.originalIndex>=a(f).length-1,loading:a(J),trailing:"",onClick:I=>n.originalIndex===0?pt(n.originalIndex):mt(n.originalIndex)},null,8,["icon","label","disabled","loading","onClick"])])):E("",!0),!n.isStockBalancePlaceholderRow&&a(f).length===1?(v(),j("span",{key:1,textContent:b(String(n.originalIndex+1))},null,8,ya)):E("",!0)]),"name-data":i(({row:n})=>[p("h4",{class:"font-medium",textContent:b(n.name.zh)},null,8,ga)]),"delivery-data":i(({row:n})=>[n.isStockBalancePlaceholderRow?E("",!0):(v(),j("h4",{key:0,class:"font-medium",textContent:b(n.isAutoDeliver?a(o)("form.auto_delivery"):a(o)("form.manual_delivery"))},null,8,ka))]),"stock-data":i(({row:n})=>[p("span",wa,b(n.isAutoDeliver?a(o)("form.auto_stock"):n.stock),1)]),"price-data":i(({row:n})=>[p("span",xa,b(n.price),1)]),"details-data":i(({row:n})=>[n.isStockBalancePlaceholderRow?E("",!0):(v(),A(u,{key:0,icon:"i-heroicons-document",to:a(O)({name:"my-books-status-classId-edit-editionIndex",params:{classId:a(_),editionIndex:n.index}}),variant:"soft",color:"gray"},null,8,["to"]))]),_:1},8,["columns","rows"])]),_:1}),s(F,{ui:{header:{base:"flex justify-between items-center gap-4"},body:{padding:""}}},{header:i(()=>[p("h3",{class:"font-bold font-mono",textContent:b(a(o)("pages.orders"))},null,8,Ia),s(re,{modelValue:a(x),"onUpdate:modelValue":t[2]||(t[2]=n=>G(x)?x.value=n:null),icon:"i-heroicons-magnifying-glass-20-solid",placeholder:a(o)("status_page.search_placeholder")},null,8,["modelValue","placeholder"])]),default:i(()=>[s(z,{ui:{th:{base:"whitespace-nowrap"}},columns:a(Ze),rows:a(nt)},{"buyerEmail-data":i(({row:n})=>[s(u,{label:n.buyerEmail,to:`mailto:${n.buyerEmail}`,variant:"link",padded:!1},null,8,["label","to"])]),"readerEmail-data":i(({row:n})=>[s(u,{label:n.readerEmail,to:`mailto:${n.readerEmail}`,variant:"link",padded:!1},null,8,["label","to"])]),"wallet-data":i(({row:n})=>[s(Te,{text:n.wallet},{default:i(()=>[s(u,{class:"font-mono",label:n.shortenWallet,to:n.walletLink,variant:"link",padded:!1,size:"xs",target:"_blank"},null,8,["label","to"])]),_:2},1032,["text"])]),"status-data":i(({row:n})=>[s($e,{color:n.statusLabelColor,label:n.statusLabel,variant:"outline",ui:{rounded:"rounded-full"}},null,8,["color","label"])]),"actions-data":i(({row:n})=>[s(Ue,{items:n.actions},{default:i(()=>[s(u,{class:Bt({hidden:!n.actions.length}),icon:"i-heroicons-ellipsis-horizontal-20-solid",color:"gray",variant:"ghost"},null,8,["class"])]),_:2},1032,["items"])]),_:1},8,["columns","rows"])]),_:1}),s(F,{ui:{header:{base:"flex justify-between items-center"},body:{padding:"12px"}}},{default:i(()=>[p("div",Sa,[p("h3",{class:"font-bold font-mono",textContent:b(a(o)("nft_book_form.advanced_settings"))},null,8,Na),s(u,{color:"gray",variant:"ghost",icon:a(g)?"i-heroicons-chevron-up":"i-heroicons-chevron-down",onClick:t[3]||(t[3]=()=>{g.value=!a(g)})},null,8,["icon"])]),a(g)?(v(),j(Fe,{key:0},[p("div",Ta,[s(F,{ui:{body:{padding:""}}},{header:i(()=>[p("h3",{class:"font-bold font-mono",textContent:b(a(o)("pages.sales_channel_summary"))},null,8,$a)]),default:i(()=>[s(z,{columns:[{key:"id",label:a(o)("table.channel_id"),sortable:!0},{key:"count",label:a(o)("table.count"),sortable:!0},{key:"totalUSD",label:a(o)("table.total_usd"),sortable:!0}],rows:a(rt)},{"id-data":i(({row:n})=>[n.id!=="empty"?(v(),j("span",Ua,b(n.idLabel),1)):(v(),A($e,{key:1,label:n.idLabel,ui:{rounded:"rounded-full"},color:"gray"},null,8,["label"]))]),_:1},8,["columns","rows"])]),_:1}),s(F,{ui:{header:{base:"flex justify-between items-center"},body:{padding:"",base:"space-y-8"}}},{header:i(()=>[p("h4",{class:"text-sm font-bold font-mono",textContent:b(a(o)("form.share_sales_data"))},null,8,Da),p("div",La,[s(re,{modelValue:a(C),"onUpdate:modelValue":t[4]||(t[4]=n=>G(C)?C.value=n:null),class:"font-mono",placeholder:"0x..."},null,8,["modelValue"]),s(u,{label:a(o)("common.add"),variant:a(C)?"outline":"solid",color:a(C)?"primary":"gray",disabled:!a(C),onClick:bt},null,8,["label","variant","color","disabled"])])]),default:i(()=>[s(z,{columns:a(lt),rows:a(st)},{"wallet-data":i(({row:n})=>[s(Te,{text:n.wallet},{default:i(()=>[s(u,{class:"font-mono",label:n.shortenWallet,to:n.walletLink,variant:"link",padded:!1,size:"xs"},null,8,["label","to"])]),_:2},1032,["text"])]),"remove-data":i(({row:n})=>[p("div",Ea,[s(u,{icon:"i-heroicons-x-mark",variant:"soft",color:"red",onClick:()=>a(r).splice(n.index,1)},null,8,["onClick"])])]),_:1},8,["columns","rows"])]),_:1}),s(F,{ui:{body:{base:"space-y-4"}}},{header:i(()=>[p("h3",{class:"font-bold font-mono",textContent:b(a(o)("form.copy_purchase_link"))},null,8,Fa)]),default:i(()=>{var n;return[s(De,{label:a(o)("form.edition")},{default:i(()=>[s(It,{modelValue:a(V),"onUpdate:modelValue":t[5]||(t[5]=I=>G(V)?V.value=I:null),options:a(ct)},null,8,["modelValue","options"])]),_:1},8,["label"]),s(De,{label:a(o)("form.sales_channel_for_links")},{default:i(()=>[s(re,{modelValue:a(Y),"onUpdate:modelValue":t[6]||(t[6]=I=>G(Y)?Y.value=I:null),placeholder:"Channel ID(s), separated by commas (e.g. store01, store02)"},null,8,["modelValue"])]),_:1},8,["label"]),a(D).length>1?(v(),A(F,{key:0,ui:{header:{base:"flex justify-between items-center"},body:{padding:""}}},{header:i(()=>[p("h4",{class:"text-sm font-bold font-mono",textContent:b(a(o)("purchase_link.download_all_links"))},null,8,Aa),s(Ue,{items:[[{label:a(o)("buttons.print_all_qr"),icon:"i-heroicons-qr-code",click:yt},{label:a(o)("buttons.download_all_links"),icon:"i-heroicons-arrow-down-on-square-stack",click:vt},{label:a(o)("buttons.shorten_all_links"),icon:"i-heroicons-sparkles",click:gt}]],popper:{placement:"top-end"}},{default:i(()=>[s(u,{icon:"i-heroicons-ellipsis-horizontal-20-solid",color:"gray",variant:"soft"})]),_:1},8,["items"])]),default:i(()=>[s(z,{columns:[{key:"index",label:"#"},{key:"channel",label:a(o)("table.channel_id")},{key:"link",label:a(o)("purchase_link.download_links")}],rows:a(D),ui:{thead:"whitespace-nowrap"}},{"index-data":i(({index:I})=>[ye(b(I+1),1)]),"link-data":i(({row:I})=>[p("div",Pa,[s(u,{icon:"i-heroicons-qr-code",variant:"outline",size:"xs",onClick:ce=>K.value=I},null,8,["onClick"]),s(u,{icon:"i-heroicons-document-duplicate",size:"xs",variant:"outline",disabled:!I.url,onClick:ce=>Ne(I.url)},null,8,["disabled","onClick"]),s(u,{class:"font-mono break-all",label:I.url,to:I.url,color:"gray",variant:"outline",size:"xs",target:"_blank"},null,8,["label","to"])])]),_:1},8,["columns","rows"])]),_:1})):a(D)[0]?(v(),j("div",Ra,[s(u,{icon:"i-heroicons-qr-code",variant:"outline",size:"xs",onClick:t[7]||(t[7]=I=>K.value=a(D)[0])}),s(u,{icon:"i-heroicons-document-duplicate",size:"xs",variant:"outline",disabled:!((n=a(D)[0])!=null&&n.url),onClick:t[8]||(t[8]=I=>{var ce;return Ne((ce=a(D)[0])==null?void 0:ce.url)})},null,8,["disabled"]),s(u,{icon:"i-heroicons-arrow-top-right-on-square",to:a(D)[0].url,target:"_blank",size:"xs",variant:"outline"},null,8,["to"]),s(re,{class:"grow font-mono","model-value":a(D)[0].url,disabled:!0,color:"gray",variant:"outline",size:"xs"},null,8,["model-value"])])):E("",!0)]}),_:1})]),p("div",Oa,[s(u,{label:a(o)("common.save"),loading:a(U),size:"lg",disabled:a(U),onClick:ht},null,8,["label","loading","disabled"])])],64)):E("",!0)]),_:1})],64)):E("",!0),s(Le,{modelValue:a(ie),"onUpdate:modelValue":t[10]||(t[10]=n=>G(ie)?ie.value=n:null)},{default:i(()=>[a(K)?(v(),A(St,{key:0,data:a(K).url,"file-name":et(a(K).channel),width:500,height:500},{header:i(()=>[p("h3",{class:"font-bold font-mono",textContent:b(a(o)("purchase_link.download_qr_modal"))},null,8,Ba),s(u,{icon:"i-heroicons-x-mark",color:"gray",variant:"ghost",onClick:t[9]||(t[9]=n=>ie.value=!1)})]),_:1},8,["data","file-name"])):E("",!0)]),_:1},8,["modelValue"]),s(Le,{modelValue:a(te),"onUpdate:modelValue":t[11]||(t[11]=n=>G(te)?te.value=n:null)},{default:i(()=>[s(Nt,{"is-restock":!0,"restock-count":a(se),"iscn-id":a(_),onSubmit:wt},null,8,["restock-count","iscn-id"])]),_:1},8,["modelValue"]),s(Tt,{transition:!1})]),_:1})}}});export{io as default};
