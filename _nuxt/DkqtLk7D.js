const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CAU5E9Ub.js","./Bp2otxJu.js","./entry.DOdxP3M6.css"])))=>i.map(i=>d[i]);
import{n as G,q as L,r as g,s as M,h as B,v as N,x as j,y as H,z as J,o as c,A as S,w as C,a as u,b as a,B as p,C as R,c as y,F as w,D as U,t as K,E as W,G as X,H as Y}from"./Bp2otxJu.js";import{_ as Z}from"./DI5RbLAh.js";import{_ as ee}from"./BZgjfHN_.js";import{_ as te}from"./Dcpc4eOn.js";import{g as oe,a as ne,D as ae,b as le,d as se,_ as re}from"./Bt_jffZr.js";import{_ as ie}from"./D4Md7f4q.js";import{p as de}from"./Cp2hUfLz.js";import"./BzEdxHSk.js";import"./DehAYJJu.js";import"./ARhgA_Sz.js";import"./CFPYzaMd.js";(function(){try{var v=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},k=new Error().stack;k&&(v._sentryDebugIds=v._sentryDebugIds||{},v._sentryDebugIds[k]="6c441f64-1935-46f5-9cf7-93be264ed51a",v._sentryDebugIdIdentifier="sentry-dbid-6c441f64-1935-46f5-9cf7-93be264ed51a")}catch{}})();const ce={class:"print:hidden flex justify-center"},ue={class:"flex justify-center items-center gap-2 print:hidden"},pe={class:"flex flex-col items-center gap-[2cm] print:gap-0"},fe={class:"text-xs text-center font-mono"},I="key,url",V=12,we=G({__name:"batch-qrcode",setup(v){const k=L(),n=g(""),q=`${I}
example01,https://example01.com
example02,https://example02.com`,f=g(ae),b=g(le),_=g(!1),Q=g(void 0),s=g([]),A=M(()=>{const t=[];for(let e=0;e<s.value.length;e+=V)t.push(s.value.slice(e,e+V));return t});B(n,()=>{s.value=[]}),B(f,()=>{s.value=[]}),N({title:"Batch Create Book QR Codes",ogTitle:"Batch Create Book QR Codes"}),j(()=>{try{const t=sessionStorage.getItem("nft_book_press_batch_qrcode");t&&(n.value=t,sessionStorage.removeItem("nft_book_press_batch_qrcode")),H(()=>{n.value&&D()})}catch(t){console.error(t)}});async function D(){try{let e=n.value;e.includes(I)||(e=`${I}
${e}`),s.value=de(e,{columns:!0,skip_empty_lines:!0})}catch(e){console.error(e),k.add({icon:"i-heroicons-exclamation-circle",title:"Failed to parse CSV input",timeout:0,color:"red",ui:{title:"text-red-400 dark:text-red-400"}})}const{default:t}=await J(async()=>{const{default:e}=await import("./CAU5E9Ub.js").then(r=>r.q);return{default:e}},__vite__mapDeps([0,1,2]),import.meta.url);s.value.forEach((e,r)=>{var d,i,x;const m=new t(oe({margin:0,data:e.url,image:f.value==="none"?void 0:ne(f.value),fillColor:b.value})),l=(d=Q.value)==null?void 0:d[r];l&&((i=l.querySelector("svg"))==null||i.remove(),m.append(l),(x=l.querySelector("svg"))==null||x.setAttribute("viewBox","0 0 300 300"))})}function F(t){if(!t)return;const[e]=t,r=new FileReader;r.onload=m=>{var d;const l=(d=m.target)==null?void 0:d.result;typeof l=="string"&&(n.value=l)},r.readAsText(e)}function P(){n.value&&window.print()}function T(){se(s.value.map(t=>({filename:t.key,url:t.url})))}return(t,e)=>{const r=Z,m=ee,l=W,d=te,i=X,x=re,O=Y,$=ie;return c(),S($,{class:"print:space-y-0 print:p-0"},{default:C(()=>{var E;return[e[8]||(e[8]=u("h1",{class:"text-lg font-bold font-mono print:hidden"}," Batch Create Book QR Codes ",-1)),a(m,{label:"Upload CSV file",class:"print:hidden"},{default:C(()=>[a(r,{type:"file",accept:"csv",onChange:F})]),_:1}),a(l,{class:"print:hidden",label:"OR"}),a(m,{class:"print:hidden",label:"Input CSV content"},{default:C(()=>[a(d,{modelValue:p(n),"onUpdate:modelValue":e[0]||(e[0]=o=>R(n)?n.value=o:null),class:"font-mono",placeholder:q,resize:!0},null,8,["modelValue"])]),_:1}),u("div",ce,[a(i,{label:"QR Code Appearance",variant:"outline",onClick:e[1]||(e[1]=o=>_.value=!0)})]),a(O,{modelValue:p(_),"onUpdate:modelValue":e[6]||(e[6]=o=>R(_)?_.value=o:null)},{default:C(()=>[a(x,{icon:p(f),"onUpdate:icon":e[3]||(e[3]=o=>R(f)?f.value=o:null),color:p(b),"onUpdate:color":e[4]||(e[4]=o=>R(b)?b.value=o:null),data:"https://books.liker.land",width:500,height:500,mode:"config",onSave:e[5]||(e[5]=o=>_.value=!1)},{header:C(()=>[e[7]||(e[7]=u("h3",{class:"font-bold font-mono"}," QR Code Config ",-1)),a(i,{icon:"i-heroicons-x-mark",color:"gray",variant:"ghost",onClick:e[2]||(e[2]=o=>_.value=!1)})]),_:1},8,["icon","color"])]),_:1},8,["modelValue"]),u("nav",ue,[(E=p(s))!=null&&E.length?(c(),y(w,{key:1},[a(i,{label:"Print",size:"lg",variant:"outline",onClick:P}),a(i,{label:"Download",size:"lg",variant:"outline",onClick:T})],64)):(c(),S(i,{key:0,label:"Generate",size:"lg",disabled:!p(n),onClick:D},null,8,["disabled"]))]),u("div",pe,[(c(!0),y(w,null,U(p(A),(o,z)=>(c(),y("ul",{key:z,class:"w-[20cm] grid grid-cols-3 items-center gap-[0.25cm] py-[0.5cm] break-before-page"},[(c(!0),y(w,null,U(o,h=>(c(),y("li",{key:h.key||h.url},[u("figure",{ref_for:!0,ref_key:"qrCodeRef",ref:Q,class:"qrcode"},[u("figcaption",fe,K(h.key||h.url),1)],512)]))),128))]))),128))])]}),_:1})}}});export{we as default};
//# sourceMappingURL=DkqtLk7D.js.map
