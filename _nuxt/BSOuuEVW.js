import{a_ as w,b6 as R,b0 as S,bk as A,bn as C,b8 as _,ba as B,b1 as I,b2 as U,b3 as l,aX as o,bh as T,aT as i,b4 as a,bt as D,aW as s,by as P,aY as y,aU as m,bs as $,bg as L}from"./Dq4rT-N9.js";(function(){try{var n=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},r=new n.Error().stack;r&&(n._sentryDebugIds=n._sentryDebugIds||{},n._sentryDebugIds[r]="5b4f407e-a04f-491b-9f7a-72cb8e245e4f",n._sentryDebugIdIdentifier="sentry-dbid-5b4f407e-a04f-491b-9f7a-72cb8e245e4f")}catch{}})();const V=w({__name:"return",setup(n){const{LIKE_CO_API:r}=R().public,f=S(),k=A(),{token:g}=C(k),c=_(""),u=_(!1),p=_(!1);return B(u,t=>{t&&(c.value="")}),I(async()=>{try{u.value=!0;const t=await $fetch(`${r}/likernft/book/user/connect/refresh`,{method:"POST",headers:{authorization:`Bearer ${g.value}`}});p.value=t.isReady||!1,setTimeout(async()=>{await U(f({name:"my-books-user"}),{replace:!0})},3e3)}catch(t){console.error(t),c.value=t.toString()}finally{u.value=!1}}),(t,e)=>{const d=P,b=D,h=$,x=L,v=T;return i(),l(v,{"model-value":!0},{default:o(()=>[a(u)?(i(),l(b,{key:0},{header:o(()=>e[0]||(e[0]=[m("h2",{class:"text-sm font-bold font-mono"}," Refreshing Stripe Connect Payout Account Status ",-1)])),default:o(()=>[s(d,{animation:"carousel"},{indicator:o(()=>e[1]||(e[1]=[y(" Refreshing... ")])),_:1})]),_:1})):a(p)&&!a(c)?(i(),l(b,{key:1},{header:o(()=>e[2]||(e[2]=[m("h2",{class:"text-sm font-bold font-mono"}," Stripe Connect Account Status Refreshed ",-1)])),default:o(()=>[s(d,{value:100},{indicator:o(()=>e[3]||(e[3]=[y(" Refreshed! Redirect back in 3 seconds... ")])),_:1})]),_:1})):(i(),l(b,{key:2,ui:{body:{base:"space-y-4"},footer:{base:"text-center"}}},{header:o(()=>e[4]||(e[4]=[m("h2",{class:"text-sm font-bold font-mono"}," An error occurred when refreshing the Stripe Connect Account Status ",-1)])),footer:o(()=>[s(x,{label:"Go Back",to:a(f)({name:"my-books-user"})},null,8,["to"])]),default:o(()=>[s(d,{value:100,color:"red"}),s(h,{icon:"i-heroicons-exclamation-triangle",color:"red",variant:"soft",title:a(c)||"Unknown error"},null,8,["title"])]),_:1}))]),_:1})}}});export{V as default};
