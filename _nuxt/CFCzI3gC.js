import{a_ as Be,a$ as Ve,bt as We,b6 as Me,b8 as re,bz as ze,b9 as u,ba as b,bb as be,aS as P,aT as v,b3 as $,aU as p,b4 as t,bf as je,bd as V,aW as l,aX as s,aY as he,aV as h,br as qe,b7 as Dt,bk as Lt,b0 as Et,b1 as Ft,cb as At,cx as Ee,bi as S,bj as Pt,bo as Fe,bD as Rt,cy as Ot,b_ as Bt,b$ as Vt,be as Wt,bw as Mt,bv as zt,bg as jt,cz as qt,b2 as Ae,cd as Ht,ce as Pe}from"./BVgQfaNN.js";import{u as Kt,v as Gt,_ as Qt,f as Xt}from"./DN6voK3I.js";import{a as He,u as Ke,b as Yt}from"./mJZnu1Sy.js";import{D as Jt}from"./DjcwmYGS.js";import{b as Zt,u as ea,_ as ta}from"./BGPgemeJ.js";import{_ as aa}from"./DkEM-FlO.js";import{_ as oa}from"./BCu72LcT.js";import{_ as na}from"./CYSedqVX.js";import{_ as la}from"./CZf5DMS8.js";import{_ as sa}from"./CwvQAX3y.js";import{_ as ia}from"./B7Q4iAhT.js";import{g as ra}from"./DBLcsCoh.js";import{u as ca}from"./CNFiOBSz.js";import{u as ua}from"./C9kugC67.js";import"./C7sKLTEE.js";import"./BCqzyNmh.js";import"./CKjq_wLR.js";import"./Tkb2MnXN.js";import"./Ob-Xc3PG.js";import"./D6QEFKpq.js";import"./CiYhumtk.js";(function(){try{var k=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},n=new k.Error().stack;n&&(k._sentryDebugIds=k._sentryDebugIds||{},k._sentryDebugIds[n]="93f751c4-e76f-4ebc-a447-e37a542c6fd4",k._sentryDebugIdIdentifier="sentry-dbid-93f751c4-e76f-4ebc-a447-e37a542c6fd4")}catch{}})();const da={class:"my-4"},ma={class:"w-full flex justify-center items-center gap-2 my-4"},pa=Be({__name:"EditISCNMetadataForm",props:{classId:{}},emits:["iscnUpdated"],setup(k,{emit:n}){const{t:R}=Ve(),ce=n,O=He(),W=We(),M=Me(),{wallet:H,signer:ue}=re(M),{validateWalletConsistency:ee}=M,{writeContractAsync:z}=Zt(),{checkAndGrantUpdater:D,waitForTransactionReceipt:de}=ea(),{getNFTClassConfig:te}=Ke(),{refreshBookMetadata:me}=ze(),L=k,K=u({}),G=u(!1),Q=u(!1),w=u({type:"Book",title:"",description:"",isbn:"",publisher:"",publicationDate:"",author:{name:"",description:""},license:"All rights reserved",contentFingerprints:[{url:""}],downloadableUrls:[{url:"",type:"",fileName:""}],customLicense:"",language:"",bookInfoUrl:"",tags:[],coverUrl:""}),F=u({}),{payload:E,getFileTypeFromMime:N}=Kt({iscnFormData:w,iscnChainData:F}),_=b(()=>Gt(w.value)),j=b(()=>!_.value?.length);be(()=>L.classId,async c=>{if(c)try{Q.value=!0,K.value=await O.lazyFetchClassMetadataById(c);const i=K.value;let g=[{url:"",type:"",fileName:""}];i.potentialAction?.target&&Array.isArray(i.potentialAction.target)?g=i.potentialAction.target.map(f=>({type:N(f.contentType),url:f.url,fileName:f.name})):i.sameAs&&Array.isArray(i.sameAs)&&(g=i.sameAs.map(A));const y=[];i.keywords&&(Array.isArray(i.keywords)?y.push(...i.keywords):y.push(...i.keywords.split(",").map(f=>f.trim()).filter(f=>f))),F.value=i,w.value={...i,type:i["@type"]||"Book",title:i.name||"",description:i.description||"",isbn:i.isbn||"",publisher:i.publisher||"",publicationDate:i.datePublished||"",author:{name:i.author?.name||i.author||"",description:i.author?.description||""},license:i.usageInfo||"All Rights Reserved",contentFingerprints:i.contentFingerprints?.map(f=>({url:f}))||[{url:""}],downloadableUrls:g,customLicense:"",language:i.inLanguage||"",bookInfoUrl:i.url||"",tags:y,coverUrl:i.thumbnailUrl||i.image||""}}catch(i){console.error("Error fetching ISCN data:",i)}finally{Q.value=!1}},{immediate:!0});function A(c){try{const g=new URL(c).searchParams.get("name")||"",[y,f]=g.split(".");return{url:c.split("?")[0],fileName:y,type:f||""}}catch{return{url:c,fileName:"",type:""}}}async function T(){if(await ee(),!H.value||!ue.value){W.add({title:R("auth.login_required"),color:"red"});return}if(!j.value){W.add({title:_.value.join(", "),color:"red"});return}G.value=!0;try{const c=Xt(E.value),i={name:c.name,description:c.description,...c,symbol:"BOOK",external_link:c?.url||"",image:c?.thumbnailUrl||"",nft_meta_collection_id:"nft_book",nft_meta_collection_name:"NFT Book",nft_meta_collection_description:"NFT Book by Liker Land",recordTimestamp:new Date().toISOString()},g=await te(L.classId);await D({classId:L.classId,wallet:H.value});const y=await z({address:L.classId,abi:Yt,functionName:"update",args:[{name:i.name,symbol:g.symbol,metadata:JSON.stringify(i),max_supply:Jt}]}),f=await de({hash:y});if(!f||f.status!=="success")throw new Error("INVALID_RECEIPT");W.add({title:R("edit_iscn.update_success"),color:"blue"}),await O.fetchClassMetadataById(L.classId),await me(L.classId),ce("iscnUpdated",{classId:L.classId,metadata:i})}catch(c){W.add({title:R("edit_iscn.update_failed"),description:c.message,color:"red"})}finally{G.value=!1}}return(c,i)=>{const g=je,y=Qt,f=qe;return v(),P("div",da,[t(Q)?(v(),$(g,{key:0,animation:"carousel",color:"primary",class:"w-full"})):(v(),$(y,{key:1,modelValue:t(w),"onUpdate:modelValue":i[0]||(i[0]=ae=>V(w)?w.value=ae:null)},null,8,["modelValue"])),p("div",ma,[l(f,{color:"primary",loading:t(G),onClick:T},{default:s(()=>[he(h(t(R)("common.save")),1)]),_:1},8,["loading"])])])}}});function Re(k){return k?`${k.slice(0,10)}...${k.slice(-6)}`:"-"}const _a={class:"flex justify-between items-center w-full"},fa={class:"flex items-center gap-2"},ba=["textContent"],ha={class:"flex justify-between items-center"},va=["textContent"],ya={class:"flex justify-between items-center gap-4"},ga={key:0,class:"flex flex-col gap-1"},ka=["textContent"],wa=["textContent"],xa=["textContent"],Ca={class:"text-right"},Ia={class:"text-right"},Sa={class:"flex justify-end items-center"},Na=["textContent"],Ta={class:"flex justify-between items-center w-full"},Ua=["textContent"],$a={class:"mt-[24px] flex flex-col gap-[12px]"},Da=["textContent"],La={key:0,class:"font-bold font-mono"},Ea=["textContent"],Fa={class:"flex gap-2"},Aa={class:"flex justify-end items-center"},Pa=["textContent"],Ra=["textContent"],Oa={class:"flex items-center gap-2"},Ba={key:1,class:"flex items-center gap-2"},Va={class:"flex items-center justify-center w-full mt-4"},Wa=["textContent"],Oe=2,Ma=1,uo=Be({__name:"[classId]",setup(k){const{t:n}=Ve(),{CHAIN_EXPLORER_URL:R,BOOK3_URL:ce,LIKE_CO_API:O}=Dt().public,W=Me(),M=ze(),H=He(),ue=ua(),ee=ca(),{token:z}=re(M),{wallet:D}=re(W),{ordersByClassIdMap:de}=re(ee),{updateBookListingSetting:te,reduceListingPendingNFTCountById:me}=M,{lazyFetchClassMetadataById:L}=H,{fetchStripeConnectStatusByWallet:K}=ue,{getBalanceOf:G}=Ke(),Q=Lt(),w=Et(),F=We(),E=u(""),N=u(!1),_=u(Q.params.classId),j=u(""),A=u(0),T=u({}),c=u([]),i=u(!1),g=u(!1),y=u(!1),f=u(""),ae=u(""),X=u([]),U=u(""),Ge=u(""),ve=u(!1),ye=u(""),ge=u({}),ke=u(!0),oe=u(!1),we=u(!0),Qe=u(!0),Xe=u(!1),Ye=u(!0),ne=u(-99),Y=u(!1),xe=b(()=>H.getClassMetadataById(_.value)?.name),Ce=b(()=>T?.value?.ownerWallet),pe=b(()=>D.value&&Ce.value===D.value),Je=b(()=>pe.value),C=b(()=>j.value.split(",").filter((e,a)=>!!e||a===0).map(e=>e.trim()).map(e=>({channel:e,url:At({classId:_.value,priceIndex:A.value,channel:e,isUseLikerLandLink:Qe.value})}))),B=u(void 0),le=b({get:()=>!!B.value,set:e=>{e||(B.value=void 0)}}),Ze=b(()=>_e.value.length?_e.value.reduce((a,r)=>{const d=r.from||"empty";return a[d]||(a[d]={count:0,totalUSD:0}),a[d].count+=1,a[d].totalUSD+=r.price,a},{}):{}),_e=b(()=>se.value?.length?se.value.map(e=>{const a=e.timestamp,r=new Date(a),d=`${r.getDate()}/${r.getMonth()+1}/${r.getFullYear()}`;return{...e,formattedDate:d}}).sort((e,a)=>a.timestamp-e.timestamp):[]),et=b(()=>[{key:"actions",label:n("table.actions"),sortable:!1},{key:"orderDate",label:n("table.order_date"),sortable:!0},{key:"status",label:n("table.status"),sortable:!0},{key:"from",label:n("table.sales_channel"),sortable:!0},{key:"price",label:n("form.price"),sortable:!0,class:"w-[120px]"},{key:"priceName",label:n("table.price_name"),sortable:!1},{key:"quantity",label:n("table.quantity"),sortable:!0},{key:"coupon",label:n("table.coupon_applied"),sortable:!1},{key:"buyerEmail",label:n("table.buyer_email"),sortable:!0},{key:"readerEmail",label:n("table.reader_email"),sortable:!0},{key:"wallet",label:n("table.reader_wallet"),sortable:!0},{key:"message",label:n("table.reader_message"),sortable:!1}]),se=b(()=>de.value.get(_.value)||[]);function tt(e=""){const a=[`${xe.value||_.value}`,`price_${A.value}`];return e&&a.push(`channel_${e}`),a.join("_")}function at(e){const a=[];return e.status==="completed"&&e.txHash?a.push([{label:n("status_page.view_transaction"),icon:"i-heroicons-magnifying-glass",to:`${R}/${e.txHash}`,target:"_blank"}]):e.status==="pendingNFT"&&Je.value&&a.push([{label:"Send NFT",icon:"i-heroicons-paper-airplane",to:w({name:"my-books-send-classId",params:{classId:e.classId},query:{owner_wallet:Ce.value,payment_id:e.id}})}]),e.status==="paid"&&a.push([{label:n("status_page.send_reminder_email"),icon:"i-heroicons-envelope",click:()=>{ft(e)}}]),["pendingNFT","paid"].includes(e.status)&&a.push([{label:n("status_page.mark_complete"),icon:"i-heroicons-check-circle",click:()=>{bt(e)}}]),a}function ot(e){switch(e.status){case"paid":return"Paid";case"pendingNFT":return n("status.pendingNFT");case"completed":return n("status.completed");default:return e.status}}function nt(e){switch(e.status){case"paid":return"blue";case"pendingNFT":return"amber";case"completed":return"green";default:return"gray"}}const lt=b(()=>_e.value?.map((e,a)=>({index:a,readerEmail:e.giftInfo?.toEmail||e.email,buyerEmail:e.email,buyerPhone:e.phone||"",status:e.status,statusLabel:ot(e),statusLabelColor:nt(e),orderDate:e.formattedDate,wallet:e.wallet||"",walletLink:Ee(e.wallet),shortenWallet:Re(e.wallet),priceName:e.priceName,price:e.price||0,coupon:e.coupon||"",message:e.message||"",from:e.from||"",quantity:e.quantity||1,actions:at(e)})).filter(e=>{if(!f.value)return!0;const a=f.value.toLowerCase();return e.readerEmail.toLowerCase().includes(a)||e.buyerEmail.toLowerCase().includes(a)||e.buyerPhone.toLowerCase().includes(a)||e.wallet?.toLowerCase().includes(a)||e.priceName?.toLowerCase().includes(a)||e.statusLabel?.toLowerCase().includes(a)||e.orderDate?.toLowerCase().includes(a)||e.from?.toLowerCase().includes(a)})),st=b(()=>{const e=[{key:"wallet",label:n("table.wallet"),sortable:!0}];return pe.value&&e.push({key:"remove",label:"",sortable:!1}),e}),it=b(()=>X.value.map((e,a)=>({index:a,wallet:e,shortenWallet:Re(e),walletLink:Ee(e)})));function rt(e){switch(e){case"empty":return"Not set";default:return e}}const ct=b(()=>Object.entries(Ze.value)?.map(([e,a])=>({id:e,idLabel:rt(e),count:a.count||0,totalUSD:(a.totalUSD||0).toFixed(2)}))),ut=b(()=>T.value.prices?.map((e,a)=>({label:`${e.name.en||e.name} - $${e.price}`,value:a,disabled:a===A.value}))),dt=b(()=>{const e=[];return e.push({key:"sort",label:n("table.sort"),sortable:!1,class:"w-[60px]"},{key:"name",label:n("table.name"),sortable:!1},{key:"delivery",label:n("table.delivery"),sortable:!1,class:"w-[120px]"},{key:"stock",label:n("table.stock"),sortable:!1,class:"w-[120px]"},{key:"price",label:n("table.price_usd"),sortable:!1,class:"w-[120px]"}),pe.value&&e.push({key:"details",label:n("table.details"),sortable:!1,class:"w-[80px]"}),e}),mt=b(()=>{const e=c.value.map((a,r)=>({...a,originalIndex:r,isStockBalancePlaceholderRow:!1}));return c.value.some(a=>!a.isAutoDeliver)&&e.push({name:"",isAutoDeliver:!1,stock:n("table.stock_balance",{count:ne.value}),price:"",isStockBalancePlaceholderRow:!0}),e});be(N,e=>{e&&(E.value="")}),be(D,async e=>{e?await fe():ne.value=-99}),Ft(async()=>{N.value=!0;try{const e=await $fetch(`${O}/likernft/book/store/${_.value}`,{headers:{authorization:`Bearer ${z.value}`}});T.value=e,c.value=T.value.prices;const{moderatorWallets:a,connectedWallets:r,mustClaimToView:d,tableOfContents:I,enableCustomMessagePage:J,hideDownload:m}=e;X.value=a,ve.value=!!(r&&Object.keys(r).length),ge.value=r;const q=r&&Object.keys(r)[0];if(q&&(ye.value=q,q!==D.value)){Ye.value=!1;try{await K(q)}catch(x){console.error(x)}}if(ke.value=d,oe.value=m,we.value=J,ae.value=I,await ee.fetchOrdersByClassId([_.value]),D.value){await fe();try{await K(D.value)}catch(x){console.error(x)}}L(_.value)}catch(e){E.value=e.toString()}finally{N.value=!1}});async function fe(){const e=T.value.pendingNFTCount||0,a=await G(_.value,D.value),r=c.value.filter(d=>!d.isAutoDeliver).reduce((d,I)=>d+(I.stock||0),0);ne.value=Number(a)-r-Ma-e||0}async function pt(e){e<=0||await Ie(e,e-1)}async function _t(e){e>=c.value.length-1||await Ie(e,e+1)}async function Ie(e,a){try{i.value=!0;const r=[...c.value],[d]=r.splice(e,1);r.splice(a,0,d);const I=c.value[e].index;await $fetch(`${O}/likernft/book/store/${_.value}/price/${I}/order`,{method:"PUT",headers:{authorization:`Bearer ${z.value}`},body:{order:a}}),c.value=r.map((J,m)=>({...J,order:m})),T.value.prices=c.value,F.add({icon:"i-heroicons-check-circle",title:"Updated editions order successfully",timeout:2e3,color:"green"})}catch(r){c.value=T.value.prices,E.value=r.toString()}finally{i.value=!1}}async function ft(e){if(!se.value?.find(r=>r.id===e.id))throw new Error("ORDER_NOT_FOUND");await $fetch(`${O}/likernft/book/purchase/${_.value}/status/${e.id}/remind`,{method:"POST",headers:{authorization:`Bearer ${z.value}`}}),F.add({icon:"i-heroicons-check-circle",title:n("status_page.send_reminder_email"),timeout:2e3,color:"green"})}async function bt(e){if(!confirm("Do you want to skip the 'Send NFT' action and override this payment status to 'completed'?"))return;const r=se.value?.find(I=>I.id===e.id);if(!r)throw new Error("ORDER_NOT_FOUND");const d=r.status;r.status="completed";try{await $fetch(`${O}/likernft/book/purchase/${_.value}/sent/${e.id}`,{method:"POST",body:{txHash:null,quantity:e.quantity||1},headers:{authorization:`Bearer ${z.value}`}})}catch(I){throw r.status=d,I}d==="pendingNFT"&&(T.value.pendingNFTCount-=1,me(_.value,1))}function ht(){U.value&&(X.value.push(U.value),U.value="")}async function vt(){try{if(U.value)throw new Error(n("errors.add_moderator_wallet"));if(Ge.value)throw new Error(n("errors.add_notification_email"));N.value=!0;const e=ve.value&&ye.value?ge.value:null;await te(_.value,{moderatorWallets:X.value,connectedWallets:e,hideDownload:oe.value,mustClaimToView:ke.value,tableOfContents:ae.value,enableCustomMessagePage:we.value}),await Ae(w({name:"my-books"}))}catch(e){const a=e.data||e;console.error(a),E.value=a}finally{N.value=!1,Xe.value=!1}}async function Se(e=""){await navigator.clipboard.writeText(e),F.add({icon:"i-heroicons-check-circle",title:n("purchase_link.copied_to_clipboard"),timeout:2e3,color:"green"})}function yt(){Ht({data:C.value,fileName:`${_.value}_purchase_links.csv`,fileType:"csv"})}function gt(){try{sessionStorage.setItem("nft_book_press_batch_qrcode",Pe(C.value.map(({channel:e,...a})=>({key:e,...a})))),window.open("/batch-qrcode?print=1","batch_qrcode","popup,menubar=no,location=no,status=no")}catch(e){console.error(e),F.add({icon:"i-heroicons-exclamation-circle",title:n("purchase_link.failed_print_qr"),timeout:0,color:"red",ui:{title:"text-red-400 dark:text-red-400"}})}}async function kt(){try{sessionStorage.setItem("nft_book_press_batch_shorten_url",Pe(C.value.map(({channel:e,url:a})=>({key:e,url:a})))),await Ae(w({name:"batch-short-links",query:{print:1}}))}catch(e){console.error(e),F.add({icon:"i-heroicons-exclamation-circle",title:n("purchase_link.failed_shorten_links"),timeout:0,color:"red",ui:{title:"text-red-400 dark:text-red-400"}})}}function wt(){Y.value=!0}async function xt(){await fe(),Y.value=!1}function Ct(e){const r=ra().API_GET_ARWEAVE_V2_LINK;return e.some(d=>!!d.startsWith(r)||d.includes("?key="))}async function It({classId:e,metadata:a}){const{contentFingerprints:r}=a;if(r){const d=Ct(r);d!==oe.value&&(oe.value=d),await te(e,{hideDownload:d})}}return(e,a)=>{const r=Pt,d=je,I=Bt,J=Ot,m=qe,q=pa,x=Rt,Z=aa,ie=Mt,Ne=oa,Te=Wt,Ue=na,St=la,$e=zt,Nt=sa,De=jt,Tt=ta,Ut=qt,$t=ia;return v(),$($t,{class:"space-y-10 pb-10"},{default:s(()=>[t(E)?(v(),$(r,{key:0,icon:"i-heroicons-exclamation-triangle",color:"red",variant:"soft",title:`${t(E)}`,"close-button":{icon:"i-heroicons-x-mark-20-solid",color:"red",variant:"link",padded:!1},onClose:a[0]||(a[0]=o=>E.value="")},null,8,["title"])):S("",!0),t(N)?(v(),$(d,{key:1,animation:"carousel"},{indicator:s(()=>[he(h(t(n)("loading.progress")),1)]),_:1})):S("",!0),t(M).isAuthenticated?(v(),P(Fe,{key:2},[l(x,{ui:{header:{base:"flex justify-between items-center"},body:{padding:"12px"},ring:t(y)?"ring-2 ring-gray-500":"ring-1 ring-gray-200"}},{default:s(()=>[p("div",_a,[p("div",fa,[p("h3",{class:"font-bold font-mono",textContent:h(t(xe)||t(_))},null,8,ba),l(J,{to:`${t(ce)}/store/${t(_)}`,class:"flex items-center",target:"_blank"},{default:s(()=>[l(I,{name:"i-heroicons-arrow-top-right-on-square",size:"xl"})]),_:1},8,["to"])]),l(m,{color:"gray",variant:"ghost",trailing:"",label:t(n)("form.edit_iscn_metadata"),icon:t(y)?"i-heroicons-chevron-up":"i-heroicons-chevron-down",onClick:a[1]||(a[1]=()=>{y.value=!t(y)})},null,8,["label","icon"])]),t(y)?(v(),$(q,{key:0,"class-id":t(_),onIscnUpdated:It},null,8,["class-id"])):S("",!0)]),_:1},8,["ui"]),l(x,{ui:{body:{padding:""}}},{header:s(()=>[p("div",ha,[p("h3",{class:"font-bold font-mono",textContent:h(t(n)("pages.editions"))},null,8,va),p("div",ya,[l(m,{icon:"i-heroicons-plus",class:"mb-[12px]",variant:"outline",color:t(c).length>=Oe?"gray":"primary",disabled:t(c).length>=Oe,label:t(n)("form.add_edition"),to:t(w)({name:"my-books-status-classId-edit-new",params:{classId:t(_)},query:{price_index:t(c).length}})},null,8,["color","disabled","label","to"])])])]),footer:s(()=>[p("div",Sa,[l(m,{icon:"i-heroicons-plus",label:t(n)("buttons.mint_new_stock"),onClick:wt},null,8,["label"])])]),default:s(()=>[l(Z,{columns:t(dt),rows:t(mt)},{"sort-data":s(({row:o})=>[!o.isStockBalancePlaceholderRow&&t(c).length>1?(v(),P("div",ga,[l(m,{icon:o.originalIndex===0?"i-heroicons-chevron-down":"i-heroicons-chevron-up",variant:"ghost",color:"gray",size:"xs",label:String(o.originalIndex+1),disabled:t(i)||o.originalIndex<=0&&o.originalIndex>=t(c).length-1,loading:t(i),trailing:"",onClick:Le=>o.originalIndex===0?_t(o.originalIndex):pt(o.originalIndex)},null,8,["icon","label","disabled","loading","onClick"])])):S("",!0),!o.isStockBalancePlaceholderRow&&t(c).length===1?(v(),P("span",{key:1,textContent:h(String(o.originalIndex+1))},null,8,ka)):S("",!0)]),"name-data":s(({row:o})=>[p("h4",{class:"font-medium",textContent:h(o.name.zh)},null,8,wa)]),"delivery-data":s(({row:o})=>[o.isStockBalancePlaceholderRow?S("",!0):(v(),P("h4",{key:0,class:"font-medium",textContent:h(o.isAutoDeliver?t(n)("form.auto_delivery"):t(n)("form.manual_delivery"))},null,8,xa))]),"stock-data":s(({row:o})=>[p("span",Ca,h(o.isAutoDeliver?t(n)("form.auto_stock"):o.stock),1)]),"price-data":s(({row:o})=>[p("span",Ia,h(o.price),1)]),"details-data":s(({row:o})=>[o.isStockBalancePlaceholderRow?S("",!0):(v(),$(m,{key:0,icon:"i-heroicons-document",to:t(w)({name:"my-books-status-classId-edit-editionIndex",params:{classId:t(_),editionIndex:o.index}}),variant:"soft",color:"gray"},null,8,["to"]))]),_:1},8,["columns","rows"])]),_:1}),l(x,{ui:{header:{base:"flex justify-between items-center gap-4"},body:{padding:""}}},{header:s(()=>[p("h3",{class:"font-bold font-mono",textContent:h(t(n)("pages.orders"))},null,8,Na),l(ie,{modelValue:t(f),"onUpdate:modelValue":a[2]||(a[2]=o=>V(f)?f.value=o:null),icon:"i-heroicons-magnifying-glass-20-solid",placeholder:t(n)("status_page.search_placeholder")},null,8,["modelValue","placeholder"])]),default:s(()=>[l(Z,{ui:{th:{base:"whitespace-nowrap"}},columns:t(et),rows:t(lt)},{"buyerEmail-data":s(({row:o})=>[l(m,{label:o.buyerEmail,to:`mailto:${o.buyerEmail}`,variant:"link",padded:!1},null,8,["label","to"])]),"readerEmail-data":s(({row:o})=>[l(m,{label:o.readerEmail,to:`mailto:${o.readerEmail}`,variant:"link",padded:!1},null,8,["label","to"])]),"wallet-data":s(({row:o})=>[l(Ne,{text:o.wallet},{default:s(()=>[l(m,{class:"font-mono",label:o.shortenWallet,to:o.walletLink,variant:"link",padded:!1,size:"xs",target:"_blank"},null,8,["label","to"])]),_:2},1032,["text"])]),"status-data":s(({row:o})=>[l(Te,{color:o.statusLabelColor,label:o.statusLabel,variant:"outline",ui:{rounded:"rounded-full"}},null,8,["color","label"])]),"actions-data":s(({row:o})=>[l(Ue,{items:o.actions},{default:s(()=>[l(m,{class:Vt({hidden:!o.actions.length}),icon:"i-heroicons-ellipsis-horizontal-20-solid",color:"gray",variant:"ghost"},null,8,["class"])]),_:2},1032,["items"])]),_:1},8,["columns","rows"])]),_:1}),l(x,{ui:{header:{base:"flex justify-between items-center"},body:{padding:"12px"}}},{default:s(()=>[p("div",Ta,[p("h3",{class:"font-bold font-mono",textContent:h(t(n)("nft_book_form.advanced_settings"))},null,8,Ua),l(m,{color:"gray",variant:"ghost",icon:t(g)?"i-heroicons-chevron-up":"i-heroicons-chevron-down",onClick:a[3]||(a[3]=()=>{g.value=!t(g)})},null,8,["icon"])]),t(g)?(v(),P(Fe,{key:0},[p("div",$a,[l(x,{ui:{body:{padding:""}}},{header:s(()=>[p("h3",{class:"font-bold font-mono",textContent:h(t(n)("pages.sales_channel_summary"))},null,8,Da)]),default:s(()=>[l(Z,{columns:[{key:"id",label:t(n)("table.channel_id"),sortable:!0},{key:"count",label:t(n)("table.count"),sortable:!0},{key:"totalUSD",label:t(n)("table.total_usd"),sortable:!0}],rows:t(ct)},{"id-data":s(({row:o})=>[o.id!=="empty"?(v(),P("span",La,h(o.idLabel),1)):(v(),$(Te,{key:1,label:o.idLabel,ui:{rounded:"rounded-full"},color:"gray"},null,8,["label"]))]),_:1},8,["columns","rows"])]),_:1}),l(x,{ui:{header:{base:"flex justify-between items-center"},body:{padding:"",base:"space-y-8"}}},{header:s(()=>[p("h4",{class:"text-sm font-bold font-mono",textContent:h(t(n)("form.share_sales_data"))},null,8,Ea),p("div",Fa,[l(ie,{modelValue:t(U),"onUpdate:modelValue":a[4]||(a[4]=o=>V(U)?U.value=o:null),class:"font-mono",placeholder:"0x..."},null,8,["modelValue"]),l(m,{label:t(n)("common.add"),variant:t(U)?"outline":"solid",color:t(U)?"primary":"gray",disabled:!t(U),onClick:ht},null,8,["label","variant","color","disabled"])])]),default:s(()=>[l(Z,{columns:t(st),rows:t(it)},{"wallet-data":s(({row:o})=>[l(Ne,{text:o.wallet},{default:s(()=>[l(m,{class:"font-mono",label:o.shortenWallet,to:o.walletLink,variant:"link",padded:!1,size:"xs"},null,8,["label","to"])]),_:2},1032,["text"])]),"remove-data":s(({row:o})=>[p("div",Aa,[l(m,{icon:"i-heroicons-x-mark",variant:"soft",color:"red",onClick:()=>t(X).splice(o.index,1)},null,8,["onClick"])])]),_:1},8,["columns","rows"])]),_:1}),l(x,{ui:{body:{base:"space-y-4"}}},{header:s(()=>[p("h3",{class:"font-bold font-mono",textContent:h(t(n)("form.copy_purchase_link"))},null,8,Pa)]),default:s(()=>[l($e,{label:t(n)("form.edition")},{default:s(()=>[l(St,{modelValue:t(A),"onUpdate:modelValue":a[5]||(a[5]=o=>V(A)?A.value=o:null),options:t(ut)},null,8,["modelValue","options"])]),_:1},8,["label"]),l($e,{label:t(n)("form.sales_channel_for_links")},{default:s(()=>[l(ie,{modelValue:t(j),"onUpdate:modelValue":a[6]||(a[6]=o=>V(j)?j.value=o:null),placeholder:"Channel ID(s), separated by commas (e.g. store01, store02)"},null,8,["modelValue"])]),_:1},8,["label"]),t(C).length>1?(v(),$(x,{key:0,ui:{header:{base:"flex justify-between items-center"},body:{padding:""}}},{header:s(()=>[p("h4",{class:"text-sm font-bold font-mono",textContent:h(t(n)("purchase_link.download_all_links"))},null,8,Ra),l(Ue,{items:[[{label:t(n)("buttons.print_all_qr"),icon:"i-heroicons-qr-code",click:gt},{label:t(n)("buttons.download_all_links"),icon:"i-heroicons-arrow-down-on-square-stack",click:yt},{label:t(n)("buttons.shorten_all_links"),icon:"i-heroicons-sparkles",click:kt}]],popper:{placement:"top-end"}},{default:s(()=>[l(m,{icon:"i-heroicons-ellipsis-horizontal-20-solid",color:"gray",variant:"soft"})]),_:1},8,["items"])]),default:s(()=>[l(Z,{columns:[{key:"index",label:"#"},{key:"channel",label:t(n)("table.channel_id")},{key:"link",label:t(n)("purchase_link.download_links")}],rows:t(C),ui:{thead:"whitespace-nowrap"}},{"index-data":s(({index:o})=>[he(h(o+1),1)]),"link-data":s(({row:o})=>[p("div",Oa,[l(m,{icon:"i-heroicons-qr-code",variant:"outline",size:"xs",onClick:Le=>B.value=o},null,8,["onClick"]),l(m,{icon:"i-heroicons-document-duplicate",size:"xs",variant:"outline",disabled:!o.url,onClick:Le=>Se(o.url)},null,8,["disabled","onClick"]),l(m,{class:"font-mono break-all",label:o.url,to:o.url,color:"gray",variant:"outline",size:"xs",target:"_blank"},null,8,["label","to"])])]),_:1},8,["columns","rows"])]),_:1})):t(C)[0]?(v(),P("div",Ba,[l(m,{icon:"i-heroicons-qr-code",variant:"outline",size:"xs",onClick:a[7]||(a[7]=o=>B.value=t(C)[0])}),l(m,{icon:"i-heroicons-document-duplicate",size:"xs",variant:"outline",disabled:!t(C)[0]?.url,onClick:a[8]||(a[8]=o=>Se(t(C)[0]?.url))},null,8,["disabled"]),l(m,{icon:"i-heroicons-arrow-top-right-on-square",to:t(C)[0].url,target:"_blank",size:"xs",variant:"outline"},null,8,["to"]),l(ie,{class:"grow font-mono","model-value":t(C)[0].url,disabled:!0,color:"gray",variant:"outline",size:"xs"},null,8,["model-value"])])):S("",!0)]),_:1})]),p("div",Va,[l(m,{label:t(n)("common.save"),loading:t(N),size:"lg",disabled:t(N),onClick:vt},null,8,["label","loading","disabled"])])],64)):S("",!0)]),_:1})],64)):S("",!0),l(De,{modelValue:t(le),"onUpdate:modelValue":a[10]||(a[10]=o=>V(le)?le.value=o:null)},{default:s(()=>[t(B)?(v(),$(Nt,{key:0,data:t(B).url,"file-name":tt(t(B).channel),width:500,height:500},{header:s(()=>[p("h3",{class:"font-bold font-mono",textContent:h(t(n)("purchase_link.download_qr_modal"))},null,8,Wa),l(m,{icon:"i-heroicons-x-mark",color:"gray",variant:"ghost",onClick:a[9]||(a[9]=o=>le.value=!1)})]),_:1},8,["data","file-name"])):S("",!0)]),_:1},8,["modelValue"]),l(De,{modelValue:t(Y),"onUpdate:modelValue":a[11]||(a[11]=o=>V(Y)?Y.value=o:null)},{default:s(()=>[l(Tt,{"is-restock":!0,"restock-count":t(ne),"iscn-id":t(_),onSubmit:xt},null,8,["restock-count","iscn-id"])]),_:1},8,["modelValue"]),l(Ut,{transition:!1})]),_:1})}}});export{uo as default};
