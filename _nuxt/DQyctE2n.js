import{a_ as j,b6 as q,bk as G,bn as W,b0 as K,bm as Q,b8 as u,b9 as k,ba as X,b1 as Y,b3 as x,aX as l,aT as i,aU as t,br as b,aV as o,b4 as s,bs as H,bL as J,aY as Z,bt as tt,aW as h,aS as S,bi as et,bj as st,bf as at,bg as ot,b2 as nt}from"./QxK_I3gi.js";import{_ as lt}from"./RfmXB_TF.js";import{_ as it}from"./BJ1ENjzX.js";import{_ as rt}from"./B9jMEh-9.js";import{u as dt}from"./Czjw8vXH.js";import"./B_6mHhFI.js";import"./UwgYfZC9.js";(function(){try{var r=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},c=new r.Error().stack;c&&(r._sentryDebugIds=r._sentryDebugIds||{},r._sentryDebugIds[c]="2af187ea-a39e-4d15-a54e-396af96f7e3d",r._sentryDebugIdIdentifier="sentry-dbid-2af187ea-a39e-4d15-a54e-396af96f7e3d")}catch{}})();const pt={class:"text-lg font-bold font-mono"},ut={class:"divide-y w-full"},ct={class:"text-left px-4 py-3"},ft={class:"px-4 py-3"},_t={class:"px-4 py-3"},mt={class:"text-left px-4 py-3"},yt={class:"px-4 py-3"},xt={class:"text-left px-4 py-3"},bt={class:"text-left px-4 py-3"},ht={class:"text-left px-4 py-3"},gt={class:"text-left px-4 py-3 font-mono text-sm"},vt={class:"text-left px-4 py-3"},kt={class:"text-left px-4 py-3"},St={class:"text-left px-4 py-3"},It={class:"text-left px-4 py-3"},$t={class:"text-left px-4 py-3"},Bt={class:"text-left px-4 py-3"},wt={class:"divide-y w-full"},Ct={key:0},Dt={class:"text-left px-4 py-3"},Nt={class:"text-left px-4 py-3"},Tt={class:"text-left px-4 py-3"},Mt=j({__name:"[classId]",setup(r){const{LIKE_CO_API:c}=q().public,g=G(),{token:I}=W(g),U=K(),$=dt(),{lazyFetchClassMetadataById:V}=$,B=Q(),f=u(""),_=u(!1),d=u(B.params.classId),w=u(B.query.payment_id),p=u(""),a=u({}),P=k(()=>{var n;return(n=$.getClassMetadataById(d.value))==null?void 0:n.name}),C=k(()=>D.value||!p.value||_.value),D=k(()=>a.value.shippingStatus==="shipped");X(_,n=>{n&&(f.value="")}),Y(async()=>{const n=await $fetch(`${c}/likernft/book/purchase/${d.value}/status/${w.value}`,{headers:{authorization:`Bearer ${I.value}`}});a.value=n,a.value.shippingMessage&&(p.value=a.value.shippingMessage),V(d.value)});async function A(){if(!C.value)try{_.value=!0,await $fetch(`${c}/likernft/book/purchase/${d.value}/shipping/sent/${w.value}`,{method:"POST",body:{message:p.value},headers:{authorization:`Bearer ${I.value}`}}),await nt(U({name:"nft-book-store-status-classId",params:{classId:d.value}}))}catch(n){console.error(n),f.value=n.toString()}finally{_.value=!1}}return(n,e)=>{const E=H,L=J,v=tt,R=lt,M=it,F=ot,O=rt;return i(),x(O,null,{default:l(()=>[t("h1",pt,' NFT Book Physical Good shipping status "'+o(s(P)||s(d))+'" ',1),s(f)?(i(),x(E,{key:0,icon:"i-heroicons-exclamation-triangle",color:"red",variant:"soft",title:`${s(f)}`,"close-button":{icon:"i-heroicons-x-mark-20-solid",color:"red",variant:"link",padded:!1},onClose:e[0]||(e[0]=m=>f.value="")},null,8,["title"])):b("",!0),s(_)?(i(),x(L,{key:1,animation:"carousel"},{indicator:l(()=>e[2]||(e[2]=[Z(" Loading... ")])),_:1})):b("",!0),s(g).isAuthenticated?(i(),x(v,{key:2,ui:{footer:{base:"space-y-4"}}},{header:l(()=>e[3]||(e[3]=[t("h3",{class:"font-bold font-mono"}," Order status ",-1)])),footer:l(()=>[h(M,{label:"Enter shipping information and message emailed to buyer"},{default:l(()=>[h(R,{modelValue:s(p),"onUpdate:modelValue":e[1]||(e[1]=m=>at(p)?p.value=m:null),disabled:s(D),placeholder:"shipping tracking ID, ETA..."},null,8,["modelValue","disabled"])]),_:1}),h(F,{label:"Set as Shipped and send email",disabled:s(C),onClick:A},null,8,["disabled"])]),default:l(()=>{var m;return[h(v,{ui:{body:{padding:""}}},{default:l(()=>{var y;return[t("table",ut,[t("tbody",null,[t("tr",null,[t("th",ct,o(n.$t("table.buyer_email")),1),t("td",ft,o(s(a).email),1)]),t("tr",null,[e[4]||(e[4]=t("th",{class:"text-left px-4 py-3"}," Buyer Phone Number ",-1)),t("td",_t,o(s(a).phone),1)]),t("tr",null,[t("th",mt,o(n.$t("table.reader_email")),1),t("td",yt,o(((y=s(a).giftInfo)==null?void 0:y.toEmail)||s(a).email),1)]),t("tr",null,[t("th",xt,o(n.$t("table.shipping_status")),1),t("td",bt,o(s(a).shippingStatus),1)]),t("tr",null,[e[5]||(e[5]=t("th",{class:"text-left px-4 py-3"}," Shipping cost paid ",-1)),t("td",ht,o(s(a).shippingCost),1)]),t("tr",null,[e[6]||(e[6]=t("th",{class:"text-left px-4 py-3"}," Buyer Wallet ",-1)),t("td",gt,o(s(a).wallet),1)]),t("tr",null,[t("th",vt,o(n.$t("table.price_name")),1),t("td",kt,o(s(a).priceName),1)]),t("tr",null,[e[7]||(e[7]=t("th",{class:"text-left px-4 py-3"}," Price ",-1)),t("td",St,o(s(a).price),1)]),t("tr",null,[e[8]||(e[8]=t("th",{class:"text-left px-4 py-3"}," Quantity ",-1)),t("td",It,o(s(a).quantity),1)]),t("tr",null,[e[9]||(e[9]=t("th",{class:"text-left px-4 py-3"}," Buyer message ",-1)),t("td",$t,o(s(a).message),1)]),t("tr",null,[e[10]||(e[10]=t("th",{class:"text-left px-4 py-3"}," Sales channel ",-1)),t("td",Bt,o(s(a).from),1)])])])]}),_:1}),(m=s(a).shippingDetails)!=null&&m.address?(i(),x(v,{key:0},{header:l(()=>e[11]||(e[11]=[t("h3",{class:"text-sm font-bold font-mono"}," Shipping Details ",-1)])),default:l(()=>{var y,N;return[t("table",wt,[t("tbody",null,[(y=s(a).shippingDetails)!=null&&y.name?(i(),S("tr",Ct,[e[12]||(e[12]=t("td",{class:"text-left px-4 py-3"}," Name ",-1)),t("td",Dt,o(s(a).shippingDetails.name),1)])):b("",!0),(i(!0),S(et,null,st(Object.entries((N=s(a).shippingDetails)==null?void 0:N.address),([T,z])=>(i(),S("tr",{key:T},[t("td",Nt,o(T),1),t("td",Tt,o(z),1)]))),128))])])]}),_:1})):b("",!0)]}),_:1})):b("",!0)]),_:1})}}});export{Mt as default};
