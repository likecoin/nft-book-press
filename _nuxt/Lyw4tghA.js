import{_ as X}from"./Df6aoneV.js";import{_ as G}from"./CT6jEmLw.js";import{a_ as P,c4 as W,b0 as q,a$ as z,bn as F,c5 as E,b8 as U,b9 as D,ba as H,b3 as V,aT as o,bt as J,aX as S,aS as s,br as v,aU as a,aW as r,aV as f,b4 as e,bs as O,bg as Q,bf as Y,bK as Z}from"./CObEiTlD.js";import{_ as ee}from"./CIKxai_K.js";import{L as te}from"./Dad1k5ls.js";import{u as ne}from"./DnoxhuSq.js";(function(){try{var l=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},y=new l.Error().stack;y&&(l._sentryDebugIds=l._sentryDebugIds||{},l._sentryDebugIds[y]="0af4e252-67e0-416e-8cc3-4871ba1de65f",l._sentryDebugIdIdentifier="sentry-dbid-0af4e252-67e0-416e-8cc3-4871ba1de65f")}catch{}})();const oe={class:"font-bold font-mono"},le={key:0,class:"flex flex-col gap-[24px]"},se={class:"grid grid-cols-2 gap-[8px] w-full"},ae={class:"flex flex-col w-full"},ie={key:0,class:"flex flex-col items-start w-full"},ce={class:"flex flex-col gap-[8px] mt-[12px] px-[6px] py-[4px] w-[80%]"},re=["textContent"],ue={key:1},de={class:"flex flex-col w-full"},pe={class:"flex flex-col mt-[14px] w-[80%]"},_e={key:0,class:"text-red-700 text-[10px]"},fe={key:1,class:"flex flex-col gap-[8px] mt-[12px] px-[6px] py-[4px] w-[80%]"},me={key:0},ve=["textContent"],xe={class:"flex flex-col items-center justify-center gap-[8px] w-full"},ye={key:0,class:"text-center text-green-800 text-[12px]"},we=P({__name:"StripeConnectCard",props:W({loginAddress:{type:String,default:""},shouldDisableSetting:{type:Boolean,default:!1},stripeConnectWallet:{type:String,default:""},isUpdatingStripeAccount:{type:Boolean,default:!1}},{isStripeConnectChecked:{type:Boolean},isStripeConnectCheckedModifiers:{},isUsingDefaultAccount:{type:Boolean},isUsingDefaultAccountModifiers:{}}),emits:W(["save"],["update:isStripeConnectChecked","update:isUsingDefaultAccount"]),setup(l,{emit:y}){const A=q(),{t:n}=z(),R=ne(),{fetchStripeConnectStatusByWallet:L}=R,{getStripeConnectStatusByWallet:C}=F(R),u=E(l,"isStripeConnectChecked"),i=E(l,"isUsingDefaultAccount"),d=l,M=y,c=U(""),m=U(""),k=U(!1),b=D(()=>C.value(d.loginAddress)),x=D(()=>C.value(c.value)),B=D(()=>!(!u.value||i.value&&!b.value.isReady||!i.value&&!x.value.isReady||m.value));H(()=>d.stripeConnectWallet,p=>{p&&!i.value&&(c.value=p)},{immediate:!0});async function T(p){if(!u.value)return;const t=p.target.value.trim();if(c.value=t,m.value="",!(te.test(t)||t.startsWith("0x"))){m.value=n("stripe_connect.invalid_wallet");return}const g=C.value(t);if(g.isReady)return g;k.value=!0;try{await L(t)}catch(h){console.error(h)}finally{k.value=!1}}function N(){const p=i.value?d.loginAddress:c.value;M("save",p)}return(p,t)=>{const g=X,h=G,w=O,I=Q,$=ee,j=Z,K=J;return o(),V(K,{ui:{divide:u.value?void 0:"",header:{base:"flex flex-wrap justify-between items-center gap-2"},body:{padding:u.value?void 0:""}}},{header:S(()=>[a("h3",oe,f(e(n)("stripe_connect.connect_title")),1),r(g,{modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=_=>u.value=_),name:"stripe",label:e(n)("stripe_connect.connect_description")},null,8,["modelValue","label"])]),default:S(()=>[u.value?(o(),s("div",le,[a("div",se,[a("div",ae,[r(h,{modelValue:i.value,"onUpdate:modelValue":t[1]||(t[1]=_=>i.value=_),class:"w-[50%]",value:!0,disabled:!!d.shouldDisableSetting},{label:S(()=>[a("div",null,f(e(n)("stripe_connect.use_my_account")),1)]),_:1},8,["modelValue","disabled"]),e(b).isReady?(o(),s("div",ie,[a("div",ce,[r(w,{icon:"i-heroicons-check",color:"primary",variant:"outline",title:e(n)("stripe_connect.has_stripe_account")},null,8,["title"]),e(b).email?(o(),s("div",{key:0,textContent:f(`Email: ${e(b).email}`)},null,8,re)):v("",!0)])])):(o(),s("span",ue,[r(I,{class:"mt-2",label:e(n)("stripe_connect.create_one_here"),to:e(A)({name:"nft-book-store-user"}),target:"_blank",variant:"outline"},null,8,["label","to"])]))]),a("div",de,[r(h,{modelValue:i.value,"onUpdate:modelValue":t[2]||(t[2]=_=>i.value=_),value:!1,disabled:!!d.shouldDisableSetting},{label:S(()=>[a("span",null,f(e(n)("stripe_connect.use_another_account")),1)]),_:1},8,["modelValue","disabled"]),a("div",pe,[r($,{modelValue:e(c),"onUpdate:modelValue":t[3]||(t[3]=_=>Y(c)?c.value=_:null),color:e(m)?"rose":"white",class:"font-mono w-full",placeholder:"0x...",onInput:T},null,8,["modelValue","color"]),e(m)?(o(),s("span",_e,f(e(m)),1)):v("",!0)]),e(k)?(o(),V(j,{key:0,class:"my-[6px]",animation:"carousel"})):e(c)&&e(x)?(o(),s("div",fe,[e(x).isReady?(o(),s("div",me,[r(w,{icon:"i-heroicons-check",color:"primary",variant:"outline",title:e(n)("stripe_connect.has_stripe_account")},null,8,["title"]),e(x).email?(o(),s("div",{key:0,textContent:f(e(n)("stripe_connect.email_prefix")+e(x).email)},null,8,ve)):v("",!0)])):(o(),V(w,{key:1,icon:"i-heroicons-x-mark",color:"red",variant:"outline",title:e(n)("stripe_connect.no_account_connected")},null,8,["title"]))])):v("",!0)])]),a("div",xe,[r(I,{label:e(n)("stripe_connect.save_changes"),loading:l.isUpdatingStripeAccount,color:e(B)?"primary":"gray",disabled:!e(B)||!!d.shouldDisableSetting,onClick:N},null,8,["label","loading","color","disabled"]),d.shouldDisableSetting?(o(),s("div",ye,f(e(n)("stripe_connect.save_success")),1)):v("",!0)])])):v("",!0)]),_:1},8,["ui"])}}});export{we as _};
