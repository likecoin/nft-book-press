import{a_ as q,bm as z,b0 as W,bk as X,bx as Y,bn as G,b8 as g,a$ as H,b9 as k,ba as J,b1 as K,bb as O,b3 as v,aX as c,b2 as B,aT as I,br as U,aW as w,b4 as n,bs as Q,bL as Z,aY as ee,aV as C,bt as oe,bf as te,aU as N,bg as ne}from"./C_4W5mDG.js";import{_ as ae}from"./B6wm2cil.js";import{_ as le}from"./DV3fFC8W.js";import{_ as se}from"./DPi62uRW.js";import{u as ce}from"./BKpTc3Gx.js";import"./CbmZCkso.js";import"./nfR5Ykvy.js";(function(){try{var i=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},d=new i.Error().stack;d&&(i._sentryDebugIds=i._sentryDebugIds||{},i._sentryDebugIds[d]="cf9c1e99-923b-4ccb-a7cf-ee619281e91a",i._sentryDebugIdIdentifier="sentry-dbid-cf9c1e99-923b-4ccb-a7cf-ee619281e91a")}catch{}})();const ie={class:"text-xl font-bold font-mono"},re={class:"font-bold font-mono"},ye=q({__name:"index",setup(i){const d=z(),u=W(),V=ce(),R=X(),D=Y(),{listNFTBookCollections:P,listModeratedNFTBookCollections:A}=D,{getClassMetadataById:E,lazyFetchClassMetadataById:T}=V,{token:L}=G(R),_=g(""),S=g(!1),x=g([]),h=g([]),{t}=H(),m=k(()=>[{label:t("collection.current_collection_listing"),key:"current"},{label:t("collection.viewable_collection_listing"),key:"viewable"}]),b=k({get(){const e=m.value.findIndex(o=>o.key===d.query.tab);return e===-1?0:e},set(e){B(u({query:{tab:m.value[e].key}}),{replace:!0})}});J(S,e=>{e&&(_.value="")});const M=k(()=>[{key:"name",label:t("collection.collection_name"),sortable:!0},{key:"priceInUSD",label:t("table.price_in_usd"),sortable:!0},{key:"pendingAction",label:t("collection.pending_action"),sortable:!0},{key:"sold",label:t("table.sold"),sortable:!0}]);K(async()=>{const e=[P()];L.value&&e.push(A());const[o,a]=await Promise.all(e);x.value=o==null?void 0:o.list,x.value.forEach(l=>{l.classIds.forEach(s=>T(s))}),h.value=(a==null?void 0:a.list)||[],h.value.forEach(l=>{l.classIds.forEach(s=>T(s))})});const $=k(()=>(m.value[b.value].key==="viewable"?h:x).value.map(e=>{var o,a,l,s,f;return{collectionId:e.id,name:(o=e.name)==null?void 0:o.en,priceInUSD:((a=e.typePayload)==null?void 0:a.priceInDecimal)/100,classIds:e.classIds,classNames:(l=e.classIds)==null?void 0:l.map(p=>{var y;return(y=E(p))==null?void 0:y.name}),pendingAction:((s=e.typePayload)==null?void 0:s.pendingNFTCount)||0,sold:((f=e.typePayload)==null?void 0:f.sold)||0}}));O({title:()=>t("collection.collection_management"),ogTitle:()=>t("collection.collection_management")});async function F(e){await B(u({name:"nft-book-store-collection-status-collectionId",params:{collectionId:e.collectionId}}))}return(e,o)=>{const a=Q,l=Z,s=ne,f=ae,p=oe,y=le,j=se;return I(),v(j,{ui:{constrained:""}},{default:c(()=>[n(_)?(I(),v(a,{key:0,class:"mt-4",icon:"i-heroicons-exclamation-triangle",color:"red",variant:"soft",title:`${n(_)}`,"close-button":{icon:"i-heroicons-x-mark-20-solid",color:"red",variant:"link",padded:!1},onClose:o[0]||(o[0]=r=>_.value="")},null,8,["title"])):U("",!0),n(S)?(I(),v(l,{key:1,animation:"carousel"},{indicator:c(()=>[ee(C(n(t)("common.loading")),1)]),_:1})):U("",!0),w(p,{ui:{header:{base:"flex justify-between items-center gap-4"}}},{header:c(()=>[N("h2",ie,C(n(t)("collection.liker_land_collections")),1),w(s,{icon:"i-heroicons-plus-circle",label:n(t)("collection.new_collection_btn"),to:n(u)({name:"nft-book-store-collection-new"})},null,8,["label","to"])]),default:c(()=>[w(y,{modelValue:n(b),"onUpdate:modelValue":o[1]||(o[1]=r=>te(b)?b.value=r:null),class:"w-full",items:n(m)},{item:c(({item:r})=>[(I(),v(p,{key:r.key,ui:{header:{base:"flex justify-between items-center gap-4"},body:{base:"divide-y divide-gray-200 dark:divide-gray-700",padding:""}}},{header:c(()=>[N("h2",re,C(r.label),1)]),default:c(()=>[w(f,{columns:n(M),rows:n($),onSelect:F},null,8,["columns","rows"])]),_:2},1024))]),_:1},8,["modelValue","items"])]),_:1})]),_:1})}}});export{ye as default};
