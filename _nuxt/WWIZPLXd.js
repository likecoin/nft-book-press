import{a_ as N,a$ as P,b9 as w,b8 as T,b3 as v,aT as l,bh as te,aX as u,aW as p,aS as S,b4 as e,bL as K,aU as d,bj as oe,bt as F,bE as le,bg as H,bi as ae,br as I,aV as k,bA as ie,aY as se,ba as Z,bf as z,bs as J,bQ as ce,dM as X,b0 as pe,bn as de,dL as q,bK as ue}from"./CfpLx2LB.js";import{_ as re,a as _e}from"./CptZa1T_.js";import{_ as ee}from"./Sm8FFGW_.js";import{_ as ne}from"./CKGVi-eE.js";import{_ as me}from"./DGzvqedy.js";import{_ as he}from"./B3Fd3VR-.js";import{L as fe}from"./D6KCvO3T.js";import{u as ge}from"./CNiO1hQ7.js";(function(){try{var n=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},a=new n.Error().stack;a&&(n._sentryDebugIds=n._sentryDebugIds||{},n._sentryDebugIds[a]="55dc8b6b-c26d-4faa-8a32-9feb596184ae",n._sentryDebugIdIdentifier="sentry-dbid-55dc8b6b-c26d-4faa-8a32-9feb596184ae")}catch{}})();let G;const ye=new Uint8Array(16);function ve(){if(!G&&(G=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!G))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return G(ye)}const _=[];for(let n=0;n<256;++n)_.push((n+256).toString(16).slice(1));function be(n,a=0){return _[n[a+0]]+_[n[a+1]]+_[n[a+2]]+_[n[a+3]]+"-"+_[n[a+4]]+_[n[a+5]]+"-"+_[n[a+6]]+_[n[a+7]]+"-"+_[n[a+8]]+_[n[a+9]]+"-"+_[n[a+10]]+_[n[a+11]]+_[n[a+12]]+_[n[a+13]]+_[n[a+14]]+_[n[a+15]]}const xe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Q={randomUUID:xe};function Y(n,a,o){if(Q.randomUUID&&!n)return Q.randomUUID();n=n||{};const t=n.random||(n.rng||ve)();return t[6]=t[6]&15|64,t[8]=t[8]&63|128,be(t)}const Se={class:"flex justify-between items-center"},ke={class:"flex justify-center"},Ce={key:1,class:"flex justify-center items-center w-full gap-[8px] py-[36px]"},we={class:"flex justify-end items-center"},Ue={key:1,class:"flex justify-end items-center"},Ie=N({__name:"InfoModal",props:{modelValue:{type:Boolean},readOnly:{type:Boolean,default:!1},shippingInfo:{type:Array,default:()=>[]}},emits:["update:modelValue","update-shipping-rates"],setup(n,{emit:a}){const{t:o}=P(),t=n,E=a,g=w(()=>!L.value),b=w(()=>L.value),C=w(()=>g.value?o("shipping_rates.editing_shipping_options"):o("shipping_rates.shipping_options_info")),s=T(t.shippingInfo.length?t.shippingInfo.map(h=>{var $,c;return{price:h.priceInDecimal/100,nameEn:($=h.name)==null?void 0:$.en,nameZh:(c=h.name)==null?void 0:c.zh}}):[]),y=w(()=>s.value.length>1),L=T(t.readOnly);function f(){E("update:modelValue",!1)}function V(){L.value=!1}function U(h,$,c){var i;s.value[c][$]=(i=h.target)==null?void 0:i.value}function R(){if(!s.value.length){s.value.push({index:Y(),price:10,nameEn:"Standard Shipping",nameZh:"標準寄送"});return}s.value.push({index:Y(),price:20,nameEn:"International Shipping",nameZh:"國際寄送"})}function m(h){s.value.splice(h,1)}function x(){E("update-shipping-rates",s.value.map(h=>({name:{en:h.nameEn,zh:h.nameZh},priceInDecimal:Math.round(Number(h.price)*100)}))),f()}return(h,$)=>{const c=H,i=ne,D=ee,M=F,O=ie,r=te;return l(),v(r,{"model-value":n.modelValue},{default:u(()=>[p(M,{ui:{header:{base:"font-bold font-mono"}}},{header:u(()=>[d("div",Se,[se(k(e(C))+" ",1),p(c,{color:"gray",variant:"ghost",icon:"i-heroicons-x-mark-20-solid",onClick:f})])]),footer:u(()=>[d("div",we,[e(g)?(l(),v(c,{key:0,label:e(o)("shipping_rates.save"),onClick:x},null,8,["label"])):(l(),S("div",Ue,[p(c,{label:e(o)("shipping_rates.set_shipping_options"),variant:"outline",onClick:V},{trailing:u(()=>[p(O,{name:"i-heroicons-arrow-right-20-solid"})]),_:1},8,["label"])]))])]),default:u(()=>[e(s).length?(l(),v(K(e(y)?"ul":"div"),{key:0,class:"space-y-4"},{default:u(()=>[(l(!0),S(ae,null,oe(e(s),(B,A)=>(l(),v(K(e(y)?"li":"div"),{key:B.index},{default:u(()=>[p(M,{ui:{body:{base:"space-y-4"},footer:{base:"flex justify-end items-center"}}},le({default:u(()=>[p(D,{label:e(o)("shipping_rates.name_of_option"),ui:{container:"space-y-2"}},{default:u(()=>[p(i,{"model-value":B.nameEn,placeholder:e(o)("shipping_rates.shipping_option_name"),disabled:e(b),onInput:j=>U(j,"nameEn",A)},null,8,["model-value","placeholder","disabled","onInput"]),p(i,{placeholder:e(o)("shipping_rates.shipping_option_name_zh"),"model-value":B.nameZh,disabled:e(b),onInput:j=>U(j,"nameZh",A)},null,8,["placeholder","model-value","disabled","onInput"])]),_:2},1032,["label"]),p(D,{label:e(o)("shipping_rates.price_usd_of_option")},{default:u(()=>[p(i,{"model-value":B.price,type:"number",step:"0.01",min:0,disabled:e(b),onInput:j=>U(j,"price",A)},null,8,["model-value","disabled","onInput"])]),_:2},1032,["label"])]),_:2},[e(y)&&e(g)?{name:"footer",fn:u(()=>[p(c,{label:e(o)("shipping_rates.delete"),variant:"outline",color:"red",onClick:j=>m(A)},null,8,["label","onClick"])]),key:"0"}:void 0]),1024)]),_:2},1024))),128)),d("div",ke,[e(g)?(l(),v(c,{key:0,label:e(o)("shipping_rates.add_options"),variant:"outline",icon:"i-heroicons-plus-20-solid",onClick:R},null,8,["label"])):I("",!0)])]),_:1})):(l(),S("div",Ce,[d("span",null,k(e(o)("shipping_rates.no_items")),1),e(g)?(l(),v(c,{key:0,label:e(o)("shipping_rates.add_options"),variant:"outline",icon:"i-heroicons-plus-20-solid",onClick:R},null,8,["label"])):I("",!0)]))]),_:1})]),_:1},8,["model-value"])}}}),Ve={class:"flex flex-row justify-between items-center"},Re={class:"flex justify-start items-center gap-[8px]"},$e={class:"font-bold font-mono"},De={class:"flex flex-col gap-[8px] items-start"},Me={class:"text-center"},Be={class:"text-center"},Ae={class:"text-center"},Ee={key:1,class:"px-[24px] py-[12px]"},je={class:"flex flex-col gap-[16px]"},cn=N({__name:"RateTable",props:{isLoading:{type:Boolean,default:!1},isShowPhysicalGoodsCheckbox:{type:Boolean,default:!1},shippingInfo:{type:Array,default:()=>[]},modelValue:{type:Boolean},isShowSettingModalButton:{type:Boolean,default:!1}},emits:["update:modelValue","update-shipping-rates"],setup(n,{emit:a}){const{t:o}=P(),t=n,E=a,g=T(!1),b=T(t.modelValue),C=T(t.isShowPhysicalGoodsCheckbox);Z(()=>t.modelValue,m=>{b.value=m}),Z(b,m=>{E("update:modelValue",m)});const s=w(()=>!t.isShowPhysicalGoodsCheckbox),y=w(()=>t.isShowPhysicalGoodsCheckbox),L=w(()=>!!(y.value&&t.isShowSettingModalButton)),f=w(()=>{if(s.value)return t.shippingInfo.length?{icon:"i-heroicons-pencil-square",text:o("shipping_rates.edit"),action:U}:{icon:"i-heroicons-plus-20-solid",text:o("shipping_rates.add"),action:U};if(y.value)return t.shippingInfo.length?{icon:"i-heroicons-eye-20-solid",text:o("shipping_rates.view_current_options"),action:U}:{icon:"i-heroicons-plus-20-solid",text:o("shipping_rates.add_shipping_options"),action:R}}),V=w(()=>t.shippingInfo.length?t.shippingInfo.map((m,x)=>({index:x+1,name:m.name,price:m.priceInDecimal/100})):[]);function U(){g.value=!0}function R(){C.value=!1,g.value=!0}return(m,x)=>{const h=H,$=re,c=_e,i=J,D=ee,M=Ie,O=F;return l(),v(O,{ui:{body:{padding:""}}},{header:u(()=>{var r,B,A;return[d("div",Ve,[d("div",Re,[d("h3",$e,k(e(o)("form.shipping_options")),1),ce(m.$slots,"header")]),e(L)?I("",!0):(l(),v(h,{key:0,icon:(r=e(f))==null?void 0:r.icon,label:(B=e(f))==null?void 0:B.text,loading:n.isLoading,onClick:(A=e(f))==null?void 0:A.action},null,8,["icon","label","loading","onClick"]))])]}),default:u(()=>[e(s)?(l(),v($,{key:0,columns:[{key:"index"},{key:"name",label:e(o)("shipping_rates.name")},{key:"price",label:e(o)("shipping_rates.price_usd")}],rows:e(V)},{"name-data":u(({row:r})=>[d("div",De,[d("span",Me,"en: "+k(r.name.en),1),d("span",Be,"zh: "+k(r.name.zh),1)])]),"price-data":u(({row:r})=>[d("span",Ae,k(r.price),1)]),_:1},8,["columns","rows"])):(l(),S("div",Ee,[p(D,{label:e(o)("shipping_rates.physical_goods"),ui:{label:{base:"font-mono font-bold"}}},{default:u(()=>[d("div",je,[p(c,{modelValue:e(b),"onUpdate:modelValue":x[0]||(x[0]=r=>z(b)?b.value=r:null),name:"hasShipping",label:e(o)("shipping_rates.includes_physical_good"),disabled:!n.shippingInfo.length},null,8,["modelValue","label","disabled"]),n.shippingInfo.length?I("",!0):(l(),v(i,{key:0,icon:"i-heroicons-face-frown-solid",color:"yellow",variant:"solid",title:e(o)("shipping_rates.enable_in_advanced_settings")},null,8,["title"]))])]),_:1},8,["label"])])),e(g)?(l(),v(M,{key:2,modelValue:e(g),"onUpdate:modelValue":x[1]||(x[1]=r=>z(g)?g.value=r:null),"read-only":e(C),"shipping-info":n.shippingInfo,onUpdateShippingRates:x[2]||(x[2]=r=>E("update-shipping-rates",r))},null,8,["modelValue","read-only","shipping-info"])):I("",!0)]),_:3})}}}),Te={class:"font-bold font-mono"},Le={key:0,class:"flex flex-col gap-[24px]"},Oe={class:"grid grid-cols-2 gap-[8px] w-full"},We={class:"flex flex-col w-full"},Ge={key:0,class:"flex flex-col items-start w-full"},Ze={class:"flex flex-col gap-[8px] mt-[12px] px-[6px] py-[4px] w-[80%]"},ze=["textContent"],Ne={key:1},Pe={class:"flex flex-col w-full"},Fe={class:"flex flex-col mt-[14px] w-[80%]"},He={key:0,class:"text-red-700 text-[10px]"},Ke={key:1,class:"flex flex-col gap-[8px] mt-[12px] px-[6px] py-[4px] w-[80%]"},Xe={key:0},qe=["textContent"],Qe={class:"flex flex-col items-center justify-center gap-[8px] w-full"},Ye={key:0,class:"text-center text-green-800 text-[12px]"},pn=N({__name:"StripeConnectCard",props:X({loginAddress:{type:String,default:""},shouldDisableSetting:{type:Boolean,default:!1},stripeConnectWallet:{type:String,default:""},isUpdatingStripeAccount:{type:Boolean,default:!1}},{isStripeConnectChecked:{type:Boolean},isStripeConnectCheckedModifiers:{},isUsingDefaultAccount:{type:Boolean},isUsingDefaultAccountModifiers:{}}),emits:X(["save"],["update:isStripeConnectChecked","update:isUsingDefaultAccount"]),setup(n,{emit:a}){const o=pe(),{t}=P(),E=ge(),{fetchStripeConnectStatusByWallet:g}=E,{getStripeConnectStatusByWallet:b}=de(E),C=q(n,"isStripeConnectChecked"),s=q(n,"isUsingDefaultAccount"),y=n,L=a,f=T(""),V=T(""),U=T(!1),R=w(()=>b.value(y.loginAddress)),m=w(()=>b.value(f.value)),x=w(()=>!(!C.value||s.value&&!R.value.isReady||!s.value&&!m.value.isReady||V.value));Z(()=>y.stripeConnectWallet,c=>{c&&!s.value&&(f.value=c)},{immediate:!0});async function h(c){if(!C.value)return;const i=c.target.value.trim();if(f.value=i,V.value="",!fe.test(i)){V.value=t("stripe_connect.invalid_wallet");return}const D=b.value(i);if(D.isReady)return D;U.value=!0;try{await g(i)}catch(M){console.error(M)}finally{U.value=!1}}function $(){const c=s.value?y.loginAddress:f.value;L("save",c)}return(c,i)=>{const D=me,M=he,O=J,r=H,B=ne,A=ue,j=F;return l(),v(j,{ui:{divide:C.value?void 0:"",header:{base:"flex flex-wrap justify-between items-center gap-2"},body:{padding:C.value?void 0:""}}},{header:u(()=>[d("h3",Te,k(e(t)("stripe_connect.connect_title")),1),p(D,{modelValue:C.value,"onUpdate:modelValue":i[0]||(i[0]=W=>C.value=W),name:"stripe",label:e(t)("stripe_connect.connect_description")},null,8,["modelValue","label"])]),default:u(()=>[C.value?(l(),S("div",Le,[d("div",Oe,[d("div",We,[p(M,{modelValue:s.value,"onUpdate:modelValue":i[1]||(i[1]=W=>s.value=W),class:"w-[50%]",value:!0,disabled:!!y.shouldDisableSetting},{label:u(()=>[d("div",null,k(e(t)("stripe_connect.use_my_account")),1)]),_:1},8,["modelValue","disabled"]),e(R).isReady?(l(),S("div",Ge,[d("div",Ze,[p(O,{icon:"i-heroicons-check",color:"primary",variant:"outline",title:e(t)("stripe_connect.has_stripe_account")},null,8,["title"]),e(R).email?(l(),S("div",{key:0,textContent:k(`Email: ${e(R).email}`)},null,8,ze)):I("",!0)])])):(l(),S("span",Ne,[p(r,{class:"mt-2",label:e(t)("stripe_connect.create_one_here"),to:e(o)({name:"nft-book-store-user"}),target:"_blank",variant:"outline"},null,8,["label","to"])]))]),d("div",Pe,[p(M,{modelValue:s.value,"onUpdate:modelValue":i[2]||(i[2]=W=>s.value=W),value:!1,disabled:!!y.shouldDisableSetting},{label:u(()=>[d("span",null,k(e(t)("stripe_connect.use_another_account")),1)]),_:1},8,["modelValue","disabled"]),d("div",Fe,[p(B,{modelValue:e(f),"onUpdate:modelValue":i[3]||(i[3]=W=>z(f)?f.value=W:null),color:e(V)?"rose":"white",class:"font-mono w-full",placeholder:"0x...",onInput:h},null,8,["modelValue","color"]),e(V)?(l(),S("span",He,k(e(V)),1)):I("",!0)]),e(U)?(l(),v(A,{key:0,class:"my-[6px]",animation:"carousel"})):e(f)&&e(m)?(l(),S("div",Ke,[e(m).isReady?(l(),S("div",Xe,[p(O,{icon:"i-heroicons-check",color:"primary",variant:"outline",title:e(t)("stripe_connect.has_stripe_account")},null,8,["title"]),e(m).email?(l(),S("div",{key:0,textContent:k(e(t)("stripe_connect.email_prefix")+e(m).email)},null,8,qe)):I("",!0)])):(l(),v(O,{key:1,icon:"i-heroicons-x-mark",color:"red",variant:"outline",title:e(t)("stripe_connect.no_account_connected")},null,8,["title"]))])):I("",!0)])]),d("div",Qe,[p(r,{label:e(t)("stripe_connect.save_changes"),loading:n.isUpdatingStripeAccount,color:e(x)?"primary":"gray",disabled:!e(x)||!!y.shouldDisableSetting,onClick:$},null,8,["label","loading","color","disabled"]),y.shouldDisableSetting?(l(),S("div",Ye,k(e(t)("stripe_connect.save_success")),1)):I("",!0)])])):I("",!0)]),_:1},8,["ui"])}}});export{cn as _,pn as a,Y as v};
