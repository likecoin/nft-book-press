import{_ as G}from"./Bc0j_xCf.js";import{_ as H}from"./BimtM7Sk.js";import{a_ as X,ea as E,b0 as K,bn as O,e5 as I,b8 as k,b9 as w,ba as P,b3 as U,aT as o,bt as Y,aX as b,aS as l,br as m,aU as a,aW as c,b4 as t,bs as q,aV as A,bg as z,bf as F,bO as J,eG as Q}from"./C7XQIrPM.js";import{_ as Z}from"./DvV_81yL.js";import{u as ee}from"./mc_zd3Xm.js";(function(){try{var n=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},v=new n.Error().stack;v&&(n._sentryDebugIds=n._sentryDebugIds||{},n._sentryDebugIds[v]="69fc5ad8-f2fa-4cf7-8c82-54e42beb2eec",n._sentryDebugIdIdentifier="sentry-dbid-69fc5ad8-f2fa-4cf7-8c82-54e42beb2eec")}catch{}})();const te={key:0,class:"flex flex-col gap-[24px]"},oe={class:"grid grid-cols-2 gap-[8px] w-full"},ne={class:"flex flex-col w-full"},le={key:0,class:"flex flex-col items-start w-full"},ae={class:"flex flex-col gap-[8px] mt-[12px] px-[6px] py-[4px] w-[80%]"},se=["textContent"],ie={key:1},ce={class:"flex flex-col w-full"},ue={class:"flex flex-col mt-[14px] w-[80%]"},re={key:0,class:"text-red-700 text-[10px]"},de={key:1,class:"flex flex-col gap-[8px] mt-[12px] px-[6px] py-[4px] w-[80%]"},pe={key:0},fe=["textContent"],me={class:"flex flex-col items-center justify-center gap-[8px] w-full"},_e={key:0,class:"text-center text-green-800 text-[12px]"},Se=X({__name:"StripeConnectCard",props:E({loginAddress:{type:String,default:""},shouldDisableSetting:{type:Boolean,default:!1},stripeConnectWallet:{type:String,default:""},isUpdatingStripeAccount:{type:Boolean,default:!1}},{isStripeConnectChecked:{type:Boolean},isStripeConnectCheckedModifiers:{},isUsingDefaultAccount:{type:Boolean},isUsingDefaultAccountModifiers:{}}),emits:E(["save"],["update:isStripeConnectChecked","update:isUsingDefaultAccount"]),setup(n,{emit:v}){const D=K(),V=ee(),{fetchStripeConnectStatusByWallet:W}=V,{getStripeConnectStatusByWallet:S}=O(V),u=I(n,"isStripeConnectChecked"),s=I(n,"isUsingDefaultAccount"),r=n,M=v,i=k(""),f=k(""),C=k(!1),x=w(()=>S.value(r.loginAddress)),_=w(()=>S.value(i.value)),R=w(()=>!(!u.value||s.value&&!x.value.isReady||!s.value&&!_.value.isReady||f.value));P(()=>r.stripeConnectWallet,d=>{d&&!s.value&&(i.value=d)},{immediate:!0});async function N(d){if(!u.value)return;const e=d.target.value.trim();if(i.value=e,f.value="",!Q.test(e)){f.value="You have entered an invalid wallet address";return}const y=S.value(e);if(y.isReady)return y;C.value=!0;try{await W(e)}catch(g){console.error(g)}finally{C.value=!1}}function T(){const d=s.value?r.loginAddress:i.value;M("save",d)}return(d,e)=>{const y=G,g=H,h=q,B=z,L=Z,$=J,j=Y;return o(),U(j,{ui:{divide:u.value?void 0:"",header:{base:"flex flex-wrap justify-between items-center gap-2"},body:{padding:u.value?void 0:""}}},{header:b(()=>[e[4]||(e[4]=a("h3",{class:"font-bold font-mono"}," Connect to a Stripe Account / 連接 Stripe 帳戶 ",-1)),c(y,{modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=p=>u.value=p),name:"stripe",label:"Use a Stripe Connect account for receiving payments"},null,8,["modelValue"])]),default:b(()=>[u.value?(o(),l("div",te,[a("div",oe,[a("div",ne,[c(g,{modelValue:s.value,"onUpdate:modelValue":e[1]||(e[1]=p=>s.value=p),class:"w-[50%]",value:!0,disabled:!!r.shouldDisableSetting},{label:b(()=>e[5]||(e[5]=[a("div",null,"Use my account",-1)])),_:1},8,["modelValue","disabled"]),t(x).isReady?(o(),l("div",le,[a("div",ae,[c(h,{icon:"i-heroicons-check",color:"primary",variant:"outline",title:"Has Stripe Account"}),t(x).email?(o(),l("div",{key:0,textContent:A(`Email: ${t(x).email}`)},null,8,se)):m("",!0)])])):(o(),l("span",ie,[c(B,{class:"mt-2",label:"Create one here",to:t(D)({name:"nft-book-store-user"}),target:"_blank",variant:"outline"},null,8,["to"])]))]),a("div",ce,[c(g,{modelValue:s.value,"onUpdate:modelValue":e[2]||(e[2]=p=>s.value=p),value:!1,disabled:!!r.shouldDisableSetting},{label:b(()=>e[6]||(e[6]=[a("span",null,"Use another Stripe Express account",-1)])),_:1},8,["modelValue","disabled"]),a("div",ue,[c(L,{modelValue:t(i),"onUpdate:modelValue":e[3]||(e[3]=p=>F(i)?i.value=p:null),color:t(f)?"rose":"white",class:"font-mono w-full",placeholder:"like1...",onInput:N},null,8,["modelValue","color"]),t(f)?(o(),l("span",re,A(t(f)),1)):m("",!0)]),t(C)?(o(),U($,{key:0,class:"my-[6px]",animation:"carousel"})):t(i)&&t(_)?(o(),l("div",de,[t(_).isReady?(o(),l("div",pe,[c(h,{icon:"i-heroicons-check",color:"primary",variant:"outline",title:"Has Stripe Account"}),t(_).email?(o(),l("div",{key:0,textContent:A(`Email: ${t(_).email}`)},null,8,fe)):m("",!0)])):(o(),U(h,{key:1,icon:"i-heroicons-x-mark",color:"red",variant:"outline",title:"No Stripe account connected to this wallet yet."}))])):m("",!0)])]),a("div",me,[c(B,{label:"Save Changes",loading:n.isUpdatingStripeAccount,color:t(R)?"primary":"gray",disabled:!t(R)||!!r.shouldDisableSetting,onClick:T},null,8,["loading","color","disabled"]),r.shouldDisableSetting?(o(),l("div",_e," Successfully save the Stripe Connect account! ")):m("",!0)])])):m("",!0)]),_:1},8,["ui"])}}});export{Se as _};
