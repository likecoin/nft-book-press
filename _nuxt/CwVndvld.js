import{_ as X}from"./C0NvWQVA.js";import{_ as K}from"./V2UD1H7b.js";import{a_ as O,ea as E,b0 as P,a$ as q,bn as z,e5 as W,b8 as U,b9 as D,ba as F,b3 as V,aT as n,bt as H,aX as S,aS as s,br as v,aU as a,aW as u,aV as f,b4 as e,bs as J,bg as Q,bf as Y,bO as Z,eG as ee}from"./Dlo-y4Nz.js";import{_ as te}from"./CM69E4AT.js";import{u as ne}from"./Do6rTtY8.js";(function(){try{var l=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},b=new l.Error().stack;b&&(l._sentryDebugIds=l._sentryDebugIds||{},l._sentryDebugIds[b]="79854147-feab-479c-8dad-fcb8ce804b37",l._sentryDebugIdIdentifier="sentry-dbid-79854147-feab-479c-8dad-fcb8ce804b37")}catch{}})();const oe={class:"font-bold font-mono"},le={key:0,class:"flex flex-col gap-[24px]"},se={class:"grid grid-cols-2 gap-[8px] w-full"},ae={class:"flex flex-col w-full"},ie={key:0,class:"flex flex-col items-start w-full"},ce={class:"flex flex-col gap-[8px] mt-[12px] px-[6px] py-[4px] w-[80%]"},ue=["textContent"],re={key:1},de={class:"flex flex-col w-full"},pe={class:"flex flex-col mt-[14px] w-[80%]"},_e={key:0,class:"text-red-700 text-[10px]"},fe={key:1,class:"flex flex-col gap-[8px] mt-[12px] px-[6px] py-[4px] w-[80%]"},me={key:0},ve=["textContent"],xe={class:"flex flex-col items-center justify-center gap-[8px] w-full"},be={key:0,class:"text-center text-green-800 text-[12px]"},ke=O({__name:"StripeConnectCard",props:E({loginAddress:{type:String,default:""},shouldDisableSetting:{type:Boolean,default:!1},stripeConnectWallet:{type:String,default:""},isUpdatingStripeAccount:{type:Boolean,default:!1}},{isStripeConnectChecked:{type:Boolean},isStripeConnectCheckedModifiers:{},isUsingDefaultAccount:{type:Boolean},isUsingDefaultAccountModifiers:{}}),emits:E(["save"],["update:isStripeConnectChecked","update:isUsingDefaultAccount"]),setup(l,{emit:b}){const A=P(),{t:o}=q(),R=ne(),{fetchStripeConnectStatusByWallet:$}=R,{getStripeConnectStatusByWallet:C}=z(R),r=W(l,"isStripeConnectChecked"),i=W(l,"isUsingDefaultAccount"),d=l,M=b,c=U(""),m=U(""),k=U(!1),y=D(()=>C.value(d.loginAddress)),x=D(()=>C.value(c.value)),B=D(()=>!(!r.value||i.value&&!y.value.isReady||!i.value&&!x.value.isReady||m.value));F(()=>d.stripeConnectWallet,p=>{p&&!i.value&&(c.value=p)},{immediate:!0});async function T(p){if(!r.value)return;const t=p.target.value.trim();if(c.value=t,m.value="",!ee.test(t)){m.value=o("stripe_connect.invalid_wallet");return}const g=C.value(t);if(g.isReady)return g;k.value=!0;try{await $(t)}catch(h){console.error(h)}finally{k.value=!1}}function L(){const p=i.value?d.loginAddress:c.value;M("save",p)}return(p,t)=>{const g=X,h=K,w=J,I=Q,N=te,j=Z,G=H;return n(),V(G,{ui:{divide:r.value?void 0:"",header:{base:"flex flex-wrap justify-between items-center gap-2"},body:{padding:r.value?void 0:""}}},{header:S(()=>[a("h3",oe,f(e(o)("stripe_connect.connect_title")),1),u(g,{modelValue:r.value,"onUpdate:modelValue":t[0]||(t[0]=_=>r.value=_),name:"stripe",label:e(o)("stripe_connect.connect_description")},null,8,["modelValue","label"])]),default:S(()=>[r.value?(n(),s("div",le,[a("div",se,[a("div",ae,[u(h,{modelValue:i.value,"onUpdate:modelValue":t[1]||(t[1]=_=>i.value=_),class:"w-[50%]",value:!0,disabled:!!d.shouldDisableSetting},{label:S(()=>[a("div",null,f(e(o)("stripe_connect.use_my_account")),1)]),_:1},8,["modelValue","disabled"]),e(y).isReady?(n(),s("div",ie,[a("div",ce,[u(w,{icon:"i-heroicons-check",color:"primary",variant:"outline",title:e(o)("stripe_connect.has_stripe_account")},null,8,["title"]),e(y).email?(n(),s("div",{key:0,textContent:f(`Email: ${e(y).email}`)},null,8,ue)):v("",!0)])])):(n(),s("span",re,[u(I,{class:"mt-2",label:e(o)("stripe_connect.create_one_here"),to:e(A)({name:"nft-book-store-user"}),target:"_blank",variant:"outline"},null,8,["label","to"])]))]),a("div",de,[u(h,{modelValue:i.value,"onUpdate:modelValue":t[2]||(t[2]=_=>i.value=_),value:!1,disabled:!!d.shouldDisableSetting},{label:S(()=>[a("span",null,f(e(o)("stripe_connect.use_another_account")),1)]),_:1},8,["modelValue","disabled"]),a("div",pe,[u(N,{modelValue:e(c),"onUpdate:modelValue":t[3]||(t[3]=_=>Y(c)?c.value=_:null),color:e(m)?"rose":"white",class:"font-mono w-full",placeholder:"like1...",onInput:T},null,8,["modelValue","color"]),e(m)?(n(),s("span",_e,f(e(m)),1)):v("",!0)]),e(k)?(n(),V(j,{key:0,class:"my-[6px]",animation:"carousel"})):e(c)&&e(x)?(n(),s("div",fe,[e(x).isReady?(n(),s("div",me,[u(w,{icon:"i-heroicons-check",color:"primary",variant:"outline",title:e(o)("stripe_connect.has_stripe_account")},null,8,["title"]),e(x).email?(n(),s("div",{key:0,textContent:f(`Email: ${e(x).email}`)},null,8,ve)):v("",!0)])):(n(),V(w,{key:1,icon:"i-heroicons-x-mark",color:"red",variant:"outline",title:e(o)("stripe_connect.no_account_connected")},null,8,["title"]))])):v("",!0)])]),a("div",xe,[u(I,{label:e(o)("stripe_connect.save_changes"),loading:l.isUpdatingStripeAccount,color:e(B)?"primary":"gray",disabled:!e(B)||!!d.shouldDisableSetting,onClick:L},null,8,["label","loading","color","disabled"]),d.shouldDisableSetting?(n(),s("div",be,f(e(o)("stripe_connect.save_success")),1)):v("",!0)])])):v("",!0)]),_:1},8,["ui"])}}});export{ke as _};
