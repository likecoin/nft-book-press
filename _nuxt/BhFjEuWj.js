import{_ as H}from"./BKFA-Uh3.js";import{_ as K}from"./COmfUxAF.js";import{_ as L}from"./WnC6mHIO.js";import{n as P,ce as I,s as F,cP as E,r as w,C as U,h as G,o,B as A,w as S,a as l,b as i,c as a,F as t,t as D,N as f,dI as Q,K as X,a2 as Y,Q as q}from"./Cgediu4u.js";import{_ as z}from"./D9BEK66i.js";import{u as J}from"./CP-LXiew.js";(function(){try{var n=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},v=new Error().stack;v&&(n._sentryDebugIds=n._sentryDebugIds||{},n._sentryDebugIds[v]="0cf24b6a-edd5-4797-84bb-144b1c6462bf",n._sentryDebugIdIdentifier="sentry-dbid-0cf24b6a-edd5-4797-84bb-144b1c6462bf")}catch{}})();const O={key:0,class:"flex flex-col gap-[24px]"},Z={class:"grid grid-cols-2 gap-[8px] w-full"},ee={class:"flex flex-col w-full"},te={key:0,class:"flex flex-col items-start w-full"},oe={class:"flex flex-col gap-[8px] mt-[12px] px-[6px] py-[4px] w-[80%]"},ne=["textContent"],le={key:1},ae={class:"flex flex-col w-full"},se={class:"flex flex-col mt-[14px] w-[80%]"},ie={key:0,class:"text-red-700 text-[10px]"},ce={key:1,class:"flex flex-col gap-[8px] mt-[12px] px-[6px] py-[4px] w-[80%]"},re={key:0},ue=["textContent"],de={class:"flex flex-col items-center justify-center gap-[8px] w-full"},pe={key:0,class:"text-center text-green-800 text-[12px]"},ge=P({__name:"StripeConnectCard",props:I({loginAddress:{type:String,default:""},shouldDisableSetting:{type:Boolean,default:!1},stripeConnectWallet:{type:String,default:""},isUpdatingStripeAccount:{type:Boolean,default:!1}},{isStripeConnectChecked:{type:Boolean},isStripeConnectCheckedModifiers:{},isUsingDefaultAccount:{type:Boolean},isUsingDefaultAccountModifiers:{}}),emits:I(["save"],["update:isStripeConnectChecked","update:isUsingDefaultAccount"]),setup(n,{emit:v}){const b=J(),{fetchStripeConnectStatusByWallet:R}=b,{getStripeConnectStatusByWallet:C}=F(b),c=E(n,"isStripeConnectChecked"),s=E(n,"isUsingDefaultAccount"),r=n,W=v,d=w(""),p=w(""),h=w(!1),x=U(()=>C.value(r.loginAddress)),_=U(()=>C.value(d.value)),V=U(()=>!(!c.value||s.value&&!x.value.isReady||!s.value&&!_.value.isReady||p.value));G(()=>r.stripeConnectWallet,u=>{u&&!s.value&&(d.value=u)},{immediate:!0});async function N(u){if(!c.value)return;const e=u.target.value.trim();if(d.value=e,p.value="",!Q.test(e)){p.value="You have entered an invalid wallet address";return}const y=C.value(e);if(y.isReady)return y;h.value=!0;try{await R(e)}catch(g){console.error(g)}finally{h.value=!1}}function M(){const u=s.value?r.loginAddress:d.value;W("save",u)}return(u,e)=>{const y=H,g=K,k=L,B=X,$=z,T=Y,j=q;return o(),A(j,{ui:{divide:c.value?void 0:"",header:{base:"flex flex-wrap justify-between items-center gap-2"},body:{padding:c.value?void 0:""}}},{header:S(()=>[e[3]||(e[3]=l("h3",{class:"font-bold font-mono"}," Connect to a Stripe Account / 連接 Stripe 帳戶 ",-1)),i(y,{modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=m=>c.value=m),name:"stripe",label:"Use a Stripe Connect account for receiving payments"},null,8,["modelValue"])]),default:S(()=>[c.value?(o(),a("div",O,[l("div",Z,[l("div",ee,[i(g,{modelValue:s.value,"onUpdate:modelValue":e[1]||(e[1]=m=>s.value=m),class:"w-[50%]",value:!0,disabled:!!r.shouldDisableSetting},{label:S(()=>e[4]||(e[4]=[l("div",null,"Use my account",-1)])),_:1},8,["modelValue","disabled"]),t(x).isReady?(o(),a("div",te,[l("div",oe,[i(k,{icon:"i-heroicons-check",color:"primary",variant:"outline",title:"Has Stripe Account"}),t(x).email?(o(),a("div",{key:0,textContent:D(`Email: ${t(x).email}`)},null,8,ne)):f("",!0)])])):(o(),a("span",le,[i(B,{class:"mt-2",label:"Create one here",to:{name:"nft-book-store-user"},target:"_blank",variant:"outline"})]))]),l("div",ae,[i(g,{modelValue:s.value,"onUpdate:modelValue":e[2]||(e[2]=m=>s.value=m),value:!1,disabled:!!r.shouldDisableSetting},{label:S(()=>e[5]||(e[5]=[l("span",null,"Use another Stripe Express account",-1)])),_:1},8,["modelValue","disabled"]),l("div",se,[i($,{value:t(d),color:t(p)?"rose":"white",class:"font-mono w-full",placeholder:"like1...",onInput:N},null,8,["value","color"]),t(p)?(o(),a("span",ie,D(t(p)),1)):f("",!0)]),t(h)?(o(),A(T,{key:0,class:"my-[6px]",animation:"carousel"})):t(d)&&t(_)?(o(),a("div",ce,[t(_).isReady?(o(),a("div",re,[i(k,{icon:"i-heroicons-check",color:"primary",variant:"outline",title:"Has Stripe Account"}),t(_).email?(o(),a("div",{key:0,textContent:D(`Email: ${t(_).email}`)},null,8,ue)):f("",!0)])):(o(),A(k,{key:1,icon:"i-heroicons-x-mark",color:"red",variant:"outline",title:"No Stripe account connected to this wallet yet."}))])):f("",!0)])]),l("div",de,[i(B,{label:"Save Changes",loading:n.isUpdatingStripeAccount,color:t(V)?"primary":"gray",disabled:!t(V)||!!r.shouldDisableSetting,onClick:M},null,8,["loading","color","disabled"]),r.shouldDisableSetting?(o(),a("div",pe," Successfully save the Stripe Connect account! ")):f("",!0)])])):f("",!0)]),_:1},8,["ui"])}}});export{ge as _};
//# sourceMappingURL=BhFjEuWj.js.map
