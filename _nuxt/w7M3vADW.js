import{_ as Et}from"./CD-4Q-qY.js";import{a_ as Re,a$ as Be,bs as We,b6 as Me,b8 as fe,bw as ze,b9 as u,ba as b,bb as qe,aS as ee,aT as g,b3 as F,aU as p,b4 as a,bf as je,bd as K,aW as l,aX as i,aY as be,aV as f,bq as He,b7 as Lt,bj as Ft,b0 as At,b1 as Ot,c8 as Pt,cs as Le,bi as H,bn as Fe,bA as Vt,ct as Rt,bX as Bt,bY as Wt,be as Mt,bg as zt,cu as qt,b2 as Ae,ca as jt,cb as Oe}from"./i2g2lvRV.js";import{a as Ht,v as Kt,_ as Xt,f as Gt,c as Qt}from"./CGiC19-H.js";import{a as Ke,u as Xe,b as Yt}from"./B08BaLnF.js";import{D as Jt}from"./BhSKwtMN.js";import{a as Zt,u as ea}from"./Bl8lUxiO.js";import{_ as ta}from"./nVxR0ReZ.js";import{_ as aa}from"./F7SCs34-.js";import{_ as oa}from"./DFFvKhhN.js";import{_ as na}from"./HCgGO2C1.js";import{_ as la}from"./Cgt9qUqX.js";import{_ as sa}from"./BP8zbyVC.js";import{_ as ia}from"./B1Ty97At.js";import{_ as ra}from"./D6dPTMm6.js";import{u as ca}from"./Bvo1NORS.js";import{g as ua}from"./DoFNrxg8.js";import"./CAqM0xna.js";import"./vxqXeKSX.js";import"./DOwP1tK0.js";import"./fAhO-Vbn.js";import"./DUNmRo7X.js";import"./pCXN5HAC.js";import"./DYDaPUA2.js";import"./Bi4DZzsR.js";(function(){try{var N=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},o=new N.Error().stack;o&&(N._sentryDebugIds=N._sentryDebugIds||{},N._sentryDebugIds[o]="519a3493-0176-40bb-81f7-ade6113e2856",N._sentryDebugIdIdentifier="sentry-dbid-519a3493-0176-40bb-81f7-ade6113e2856")}catch{}})();const da={class:"my-4"},ma={class:"w-full flex justify-center items-center gap-2 my-4"},pa=Re({__name:"EditISCNMetadataForm",props:{classId:{}},emits:["iscnUpdated"],setup(N,{emit:o}){const{t:M}=Be(),ue=o,R=Ke(),X=We(),G=Me(),{wallet:te,signer:de}=fe(G),{initIfNecessary:z}=G,{writeContractAsync:B}=Zt(),{checkAndGrantUpdater:oe,waitForTransactionReceipt:me}=ea(),{getNFTClassConfig:pe}=Xe(),{refreshBookMetadata:ne}=ze(),A=N,le=u({}),O=u(!1),P=u(!1),k=u({type:"Book",title:"",description:"",isbn:"",publisher:"",publicationDate:"",author:{name:"",description:""},license:"All rights reserved",contentFingerprints:[{url:""}],downloadableUrls:[{url:"",type:"",fileName:""}],customLicense:"",language:"",bookInfoUrl:"",tags:[],coverUrl:""}),U=u({}),{payload:_,getFileTypeFromMime:Q}=Ht({iscnFormData:k,iscnChainData:U}),V=b(()=>Kt(k.value)),$=b(()=>{var m;return!((m=V.value)!=null&&m.length)});qe(()=>A.classId,async m=>{var y,w,x,T;if(m)try{P.value=!0,le.value=await R.lazyFetchClassMetadataById(m);const c=le.value;let J=[{url:"",type:"",fileName:""}];(y=c.potentialAction)!=null&&y.target&&Array.isArray(c.potentialAction.target)?J=c.potentialAction.target.map(D=>({type:Q(D.contentType),url:D.url,fileName:D.name})):c.sameAs&&Array.isArray(c.sameAs)&&(J=c.sameAs.map(v));const C=[];c.keywords&&(Array.isArray(c.keywords)?C.push(...c.keywords):C.push(...c.keywords.split(",").map(D=>D.trim()).filter(D=>D))),U.value=c,k.value={...c,type:c["@type"]||"Book",title:c.name||"",description:c.description||"",isbn:c.isbn||"",publisher:c.publisher||"",publicationDate:c.datePublished||"",author:{name:((w=c.author)==null?void 0:w.name)||c.author||"",description:((x=c.author)==null?void 0:x.description)||""},license:c.usageInfo||"All Rights Reserved",contentFingerprints:((T=c.contentFingerprints)==null?void 0:T.map(D=>({url:D})))||[{url:""}],downloadableUrls:J,customLicense:"",language:c.inLanguage||"",bookInfoUrl:c.url||"",tags:C,coverUrl:c.thumbnailUrl||c.image||""}}catch(c){console.error("Error fetching ISCN data:",c)}finally{P.value=!1}},{immediate:!0});function v(m){try{const w=new URL(m).searchParams.get("name")||"",[x,T]=w.split(".");return{url:m.split("?")[0],fileName:x,type:T||""}}catch{return{url:m,fileName:"",type:""}}}async function Y(){if(await z(),!te.value||!de.value){X.add({title:M("auth.login_required"),color:"red"});return}if(!$.value){X.add({title:V.value.join(", "),color:"red"});return}O.value=!0;try{const m=Gt(_.value),y={name:m.name,description:m.description,...m,symbol:"BOOK",external_link:(m==null?void 0:m.url)||"",nft_meta_collection_id:"nft_book",nft_meta_collection_name:"NFT Book",nft_meta_collection_description:"NFT Book by Liker Land",recordTimestamp:new Date().toISOString()},w=await pe(A.classId);await oe({classId:A.classId,wallet:te.value});const x=await B({address:A.classId,abi:Yt,functionName:"update",args:[{name:y.name,symbol:w.symbol,metadata:JSON.stringify(y),max_supply:Jt}]}),T=await me({hash:x});if(!T||T.status!=="success")throw new Error("INVALID_RECEIPT");X.add({title:M("edit_iscn.update_success"),color:"blue"}),await R.fetchClassMetadataById(A.classId),await ne(A.classId),ue("iscnUpdated",{classId:A.classId,metadata:y})}catch(m){X.add({title:M("edit_iscn.update_failed"),description:m.message,color:"red"})}finally{O.value=!1}}return(m,y)=>{const w=je,x=Xt,T=He;return g(),ee("div",da,[a(P)?(g(),F(w,{key:0,animation:"carousel",color:"primary",class:"w-full"})):(g(),F(x,{key:1,modelValue:a(k),"onUpdate:modelValue":y[0]||(y[0]=c=>K(k)?k.value=c:null)},null,8,["modelValue"])),p("div",ma,[l(T,{color:"primary",loading:a(O),onClick:Y},{default:i(()=>[be(f(a(M)("common.save")),1)]),_:1},8,["loading"])])])}}});function Pe(N){return N?`${N.slice(0,10)}...${N.slice(-6)}`:"-"}const _a={class:"flex justify-between items-center w-full"},fa={class:"flex items-center gap-2"},ba=["textContent"],ha={class:"flex justify-between items-center"},va=["textContent"],ya={class:"flex justify-between items-center gap-4"},ga=["textContent"],ka=["textContent"],wa=["textContent"],xa={class:"text-right"},Ca={class:"text-right"},Ia={class:"flex justify-end items-center"},Sa=["textContent"],Na={class:"flex justify-between items-center w-full"},$a=["textContent"],Ta={class:"mt-[24px] flex flex-col gap-[12px]"},Ua=["textContent"],Da={key:0,class:"font-bold font-mono"},Ea=["textContent"],La={class:"flex gap-2"},Fa={class:"flex justify-end items-center"},Aa=["textContent"],Oa=["textContent"],Pa={class:"flex items-center gap-2"},Va={key:1,class:"flex items-center gap-2"},Ra={class:"flex items-center justify-center w-full mt-4"},Ba=["textContent"],Ve=2,mo=Re({__name:"[classId]",setup(N){const{t:o}=Be(),{CHAIN_EXPLORER_URL:M,BOOK3_URL:ue,LIKE_CO_API:R}=Lt().public,X=Me(),G=ze(),te=Ke(),de=ca(),{token:z}=fe(G),{wallet:B}=fe(X),{updateBookListingSetting:oe,reduceListingPendingNFTCountById:me}=G,{lazyFetchClassMetadataById:pe}=te,{fetchStripeConnectStatusByWallet:ne}=de,{getBalanceOf:A}=Xe(),le=Ft(),O=At(),P=We(),k=u(""),U=u(!1),_=u(le.params.classId),Q=u(""),V=u(0),$=u({}),v=u([]),Y=u(!1),m=u({}),y=u(!1),w=u(!1),x=u(""),T=u(""),c=u([]),J=u([]),C=u(""),D=u(""),he=u(!1),ve=u(""),ye=u({}),ge=u(!0),se=u(!1),ke=u(!0),Ge=u(!0),Qe=u(!1),Ye=u(!0),Je=u(0),ae=u(!1),we=u(""),xe=b(()=>{var e;return(e=te.getClassMetadataById(_.value))==null?void 0:e.name}),Ce=b(()=>{var e;return(e=$==null?void 0:$.value)==null?void 0:e.ownerWallet}),ie=b(()=>B.value&&Ce.value===B.value),Ze=b(()=>ie.value),E=b(()=>Q.value.split(",").filter((e,t)=>!!e||t===0).map(e=>e.trim()).map(e=>({channel:e,url:Pt({classId:_.value,priceIndex:V.value,channel:e,isUseLikerLandLink:Ge.value})}))),q=u(void 0),re=b({get:()=>!!q.value,set:e=>{e||(q.value=void 0)}}),et=b(()=>_e.value.length?_e.value.reduce((t,s)=>{const r=s.from||"empty";return t[r]||(t[r]={count:0,totalUSD:0}),t[r].count+=1,t[r].totalUSD+=s.price,t},{}):{}),_e=b(()=>{var e;return(e=m.value)!=null&&e.orders?m.value.orders.map(t=>{const s=t.timestamp,r=new Date(s),h=`${r.getDate()}/${r.getMonth()+1}/${r.getFullYear()}`;return{...t,formattedDate:h}}).sort((t,s)=>s.timestamp-t.timestamp):[]}),tt=b(()=>[{key:"actions",label:o("table.actions"),sortable:!1},{key:"orderDate",label:o("table.order_date"),sortable:!0},{key:"status",label:o("table.status"),sortable:!0},{key:"from",label:o("table.sales_channel"),sortable:!0},{key:"price",label:o("form.price"),sortable:!0,class:"w-[120px]"},{key:"priceName",label:o("table.price_name"),sortable:!1},{key:"quantity",label:o("table.quantity"),sortable:!0},{key:"coupon",label:o("table.coupon_applied"),sortable:!1},{key:"buyerEmail",label:o("table.buyer_email"),sortable:!0},{key:"readerEmail",label:o("table.reader_email"),sortable:!0},{key:"wallet",label:o("table.reader_wallet"),sortable:!0},{key:"message",label:o("table.reader_message"),sortable:!1}]);function at(e=""){const t=[`${xe.value||_.value}`,`price_${V.value}`];return e&&t.push(`channel_${e}`),t.join("_")}function ot(e){const t=[];return e.status==="completed"&&e.txHash?t.push([{label:o("status_page.view_transaction"),icon:"i-heroicons-magnifying-glass",to:`${M}/${e.txHash}`,target:"_blank"}]):e.status==="pendingNFT"&&Ze.value&&t.push([{label:"Send NFT",icon:"i-heroicons-paper-airplane",to:O({name:"my-books-send-classId",params:{classId:e.classId},query:{owner_wallet:Ce.value,payment_id:e.id}})}]),e.status==="paid"&&t.push([{label:o("status_page.send_reminder_email"),icon:"i-heroicons-envelope",click:()=>{bt(e)}}]),["pendingNFT","paid"].includes(e.status)&&t.push([{label:o("status_page.mark_complete"),icon:"i-heroicons-check-circle",click:()=>{ht(e)}}]),t}function nt(e){switch(e.status){case"paid":return"Paid";case"pendingNFT":return o("status.pendingNFT");case"completed":return o("status.completed");default:return e.status}}function lt(e){switch(e.status){case"paid":return"blue";case"pendingNFT":return"amber";case"completed":return"green";default:return"gray"}}const st=b(()=>{var e;return(e=_e.value)==null?void 0:e.map((t,s)=>{var r;return{index:s,readerEmail:((r=t.giftInfo)==null?void 0:r.toEmail)||t.email,buyerEmail:t.email,buyerPhone:t.phone||"",status:t.status,statusLabel:nt(t),statusLabelColor:lt(t),orderDate:t.formattedDate,wallet:t.wallet||"",walletLink:Le(t.wallet),shortenWallet:Pe(t.wallet),priceName:t.priceName,price:t.price||0,coupon:t.coupon||"",message:t.message||"",from:t.from||"",quantity:t.quantity||1,actions:ot(t)}}).filter(t=>{var r,h,L,d,Z;if(!x.value)return!0;const s=x.value.toLowerCase();return t.readerEmail.toLowerCase().includes(s)||t.buyerEmail.toLowerCase().includes(s)||t.buyerPhone.toLowerCase().includes(s)||((r=t.wallet)==null?void 0:r.toLowerCase().includes(s))||((h=t.priceName)==null?void 0:h.toLowerCase().includes(s))||((L=t.statusLabel)==null?void 0:L.toLowerCase().includes(s))||((d=t.orderDate)==null?void 0:d.toLowerCase().includes(s))||((Z=t.from)==null?void 0:Z.toLowerCase().includes(s))})}),it=b(()=>{const e=[{key:"wallet",label:o("table.wallet"),sortable:!0}];return ie.value&&e.push({key:"remove",label:"",sortable:!1}),e}),rt=b(()=>c.value.map((e,t)=>({index:t,wallet:e,shortenWallet:Pe(e),walletLink:Le(e)})));function ct(e){switch(e){case"empty":return"Not set";default:return e}}const ut=b(()=>{var e;return(e=Object.entries(et.value))==null?void 0:e.map(([t,s])=>({id:t,idLabel:ct(t),count:s.count||0,totalUSD:(s.totalUSD||0).toFixed(2)}))}),dt=b(()=>{var e;return(e=$.value.prices)==null?void 0:e.map((t,s)=>({label:`${t.name.en||t.name} - $${t.price}`,value:s,disabled:s===V.value}))}),mt=b(()=>{const e=[];return e.push({key:"sort",label:o("table.sort"),sortable:!1,class:"w-[60px]"},{key:"name",label:o("table.name"),sortable:!1},{key:"delivery",label:o("table.delivery"),sortable:!1,class:"w-[120px]"},{key:"stock",label:o("table.stock"),sortable:!1,class:"w-[120px]"},{key:"price",label:o("table.price_usd"),sortable:!1,class:"w-[120px]"}),ie.value&&e.push({key:"details",label:o("table.details"),sortable:!1,class:"w-[80px]"}),e}),pt=b(()=>v.value.map((e,t)=>({...e,originalIndex:t})));qe(U,e=>{e&&(k.value="")}),Ot(async()=>{U.value=!0;try{const e=await $fetch(`${R}/likernft/book/store/${_.value}`,{headers:{authorization:`Bearer ${z.value}`}});$.value=e,v.value=$.value.prices;const{moderatorWallets:t,notificationEmails:s,connectedWallets:r,mustClaimToView:h,tableOfContents:L,enableCustomMessagePage:d,hideDownload:Z}=e;c.value=t,J.value=s,he.value=!!(r&&Object.keys(r).length),ye.value=r;const S=r&&Object.keys(r)[0];if(S&&(ve.value=S,S!==B.value)){Ye.value=!1;try{await ne(S)}catch(W){console.error(W)}}ge.value=h,se.value=Z,ke.value=d,T.value=L;const j=await $fetch(`${R}/likernft/book/purchase/${_.value}/orders`,{headers:{authorization:`Bearer ${z.value}`}});if(m.value=j,await Ie(),B.value)try{await ne(B.value)}catch(W){console.error(W)}pe(_.value)}catch(e){console.error(e),k.value=e.toString()}finally{U.value=!1}});async function Ie(){const e=$.value.pendingNFTCount||0,t=await A(_.value,B.value),s=v.value.filter(r=>!r.isAutoDeliver).reduce((r,h)=>r+(h.stock||0),0);Je.value=Math.max(Number(t)-s-e||0,0)}async function _t(e){e<=0||await Se(e,e-1)}async function ft(e){e>=v.value.length-1||await Se(e,e+1)}async function Se(e,t){try{Y.value=!0;const s=[...v.value],[r]=s.splice(e,1);s.splice(t,0,r);const h=v.value[e].index;await $fetch(`${R}/likernft/book/store/${_.value}/price/${h}/order`,{method:"PUT",headers:{authorization:`Bearer ${z.value}`},body:{order:t}}),v.value=s.map((L,d)=>({...L,order:d})),$.value.prices=v.value,P.add({icon:"i-heroicons-check-circle",title:"Updated editions order successfully",timeout:2e3,color:"green"})}catch(s){v.value=$.value.prices,k.value=s.toString()}finally{Y.value=!1}}async function bt(e){var s,r;if(!((r=(s=m.value)==null?void 0:s.orders)==null?void 0:r.find(h=>h.id===e.id)))throw new Error("ORDER_NOT_FOUND");await $fetch(`${R}/likernft/book/purchase/${_.value}/status/${e.id}/remind`,{method:"POST",headers:{authorization:`Bearer ${z.value}`}}),P.add({icon:"i-heroicons-check-circle",title:o("status_page.send_reminder_email"),timeout:2e3,color:"green"})}async function ht(e){var h,L;if(!confirm("Do you want to skip the 'Send NFT' action and override this payment status to 'completed'?"))return;const s=(L=(h=m.value)==null?void 0:h.orders)==null?void 0:L.find(d=>d.id===e.id);if(!s)throw new Error("ORDER_NOT_FOUND");const r=s.status;s.status="completed";try{await $fetch(`${R}/likernft/book/purchase/${_.value}/sent/${e.id}`,{method:"POST",body:{txHash:null,quantity:e.quantity||1},headers:{authorization:`Bearer ${z.value}`}})}catch(d){throw s.status=r,d}r==="pendingNFT"&&($.value.pendingNFTCount-=1,me(_.value,1))}function vt(){C.value&&(c.value.push(C.value),C.value="")}async function yt(){try{if(C.value)throw new Error(o("errors.add_moderator_wallet"));if(D.value)throw new Error(o("errors.add_notification_email"));U.value=!0;const e=he.value&&ve.value?ye.value:null;await oe(_.value,{moderatorWallets:c.value,notificationEmails:J.value,connectedWallets:e,hideDownload:se.value,mustClaimToView:ge.value,tableOfContents:T.value,enableCustomMessagePage:ke.value}),await Ae(O({name:"my-books"}))}catch(e){const t=e.data||e;console.error(t),k.value=t}finally{U.value=!1,Qe.value=!1}}async function Ne(e=""){await navigator.clipboard.writeText(e),P.add({icon:"i-heroicons-check-circle",title:o("purchase_link.copied_to_clipboard"),timeout:2e3,color:"green"})}function gt(){jt({data:E.value,fileName:`${_.value}_purchase_links.csv`,fileType:"csv"})}function kt(){try{sessionStorage.setItem("nft_book_press_batch_qrcode",Oe(E.value.map(({channel:e,...t})=>({key:e,...t})))),window.open("/batch-qrcode?print=1","batch_qrcode","popup,menubar=no,location=no,status=no")}catch(e){console.error(e),P.add({icon:"i-heroicons-exclamation-circle",title:o("purchase_link.failed_print_qr"),timeout:0,color:"red",ui:{title:"text-red-400 dark:text-red-400"}})}}async function wt(){try{sessionStorage.setItem("nft_book_press_batch_shorten_url",Oe(E.value.map(({channel:e,url:t})=>({key:e,url:t})))),await Ae(O({name:"batch-short-links",query:{print:1}}))}catch(e){console.error(e),P.add({icon:"i-heroicons-exclamation-circle",title:o("purchase_link.failed_shorten_links"),timeout:0,color:"red",ui:{title:"text-red-400 dark:text-red-400"}})}}function xt(){ae.value=!0,we.value=_.value}async function Ct(){await Ie(),ae.value=!1}function It(e){const s=ua().API_GET_ARWEAVE_V2_LINK;return e.some(r=>!!r.startsWith(s)||r.includes("?key="))}async function St({classId:e,metadata:t}){const{contentFingerprints:s}=t;if(s){const r=It(s);r!==se.value&&(se.value=r),await oe(e,{hideDownload:r})}}return(e,t)=>{const s=Et,r=je,h=Bt,L=Rt,d=He,Z=pa,S=Vt,j=ta,W=aa,$e=oa,Te=Mt,Ue=na,Nt=la,De=sa,$t=ia,Ee=zt,Tt=Qt,Ut=qt,Dt=ra;return g(),F(Dt,{class:"space-y-10 pb-10"},{default:i(()=>[a(k)?(g(),F(s,{key:0,icon:"i-heroicons-exclamation-triangle",color:"red",variant:"soft",title:`${a(k)}`,"close-button":{icon:"i-heroicons-x-mark-20-solid",color:"red",variant:"link",padded:!1},onClose:t[0]||(t[0]=n=>k.value="")},null,8,["title"])):H("",!0),a(U)?(g(),F(r,{key:1,animation:"carousel"},{indicator:i(()=>[be(f(a(o)("loading.progress")),1)]),_:1})):H("",!0),a(G).isAuthenticated?(g(),ee(Fe,{key:2},[l(S,{ui:{header:{base:"flex justify-between items-center"},body:{padding:"12px"},ring:a(w)?"ring-2 ring-gray-500":"ring-1 ring-gray-200"}},{default:i(()=>[p("div",_a,[p("div",fa,[p("h3",{class:"font-bold font-mono",textContent:f(a(xe)||a(_))},null,8,ba),l(L,{to:`${a(ue)}/store/${a(_)}`,class:"flex items-center",target:"_blank"},{default:i(()=>[l(h,{name:"i-heroicons-arrow-top-right-on-square",size:"xl"})]),_:1},8,["to"])]),l(d,{color:"gray",variant:"ghost",trailing:"",label:a(o)("form.edit_iscn_metadata"),icon:a(w)?"i-heroicons-chevron-up":"i-heroicons-chevron-down",onClick:t[1]||(t[1]=()=>{w.value=!a(w)})},null,8,["label","icon"])]),a(w)?(g(),F(Z,{key:0,"class-id":a(_),onIscnUpdated:St},null,8,["class-id"])):H("",!0)]),_:1},8,["ui"]),l(S,{ui:{body:{padding:""}}},{header:i(()=>[p("div",ha,[p("h3",{class:"font-bold font-mono",textContent:f(a(o)("pages.editions"))},null,8,va),p("div",ya,[l(d,{icon:"i-heroicons-plus",class:"mb-[12px]",variant:"outline",color:a(v).length>=Ve?"gray":"primary",disabled:a(v).length>=Ve,label:a(o)("form.add_edition"),to:a(O)({name:"my-books-status-classId-edit-new",params:{classId:a(_)},query:{price_index:a(v).length}})},null,8,["color","disabled","label","to"])])])]),footer:i(()=>[p("div",Ia,[l(d,{icon:"i-heroicons-plus",label:a(o)("buttons.mint_new_stock"),onClick:xt},null,8,["label"])])]),default:i(()=>[l(j,{columns:a(mt),rows:a(pt)},{"sort-data":i(({row:n})=>[a(ie)&&a(v).length>1?(g(),F(d,{key:0,icon:n.originalIndex===0?"i-heroicons-chevron-down":"i-heroicons-chevron-up",variant:"ghost",color:"gray",size:"xs",label:String(n.originalIndex+1),disabled:a(Y)||n.originalIndex<=0&&n.originalIndex>=a(v).length-1,loading:a(Y),trailing:"",onClick:I=>n.originalIndex===0?ft(n.originalIndex):_t(n.originalIndex)},null,8,["icon","label","disabled","loading","onClick"])):(g(),ee("span",{key:1,textContent:f(String(n.originalIndex+1))},null,8,ga))]),"name-data":i(({row:n})=>[p("h4",{class:"font-medium",textContent:f(n.name.zh)},null,8,ka)]),"delivery-data":i(({row:n})=>[p("h4",{class:"font-medium",textContent:f(n.isAutoDeliver?a(o)("form.auto_delivery"):a(o)("form.manual_delivery"))},null,8,wa)]),"stock-data":i(({row:n})=>[p("span",xa,f(n.isAutoDeliver?a(o)("form.auto_stock"):n.stock),1)]),"price-data":i(({row:n})=>[p("span",Ca,f(n.price),1)]),"details-data":i(({row:n})=>[l(d,{icon:"i-heroicons-document",to:a(O)({name:"my-books-status-classId-edit-editionIndex",params:{classId:a(_),editionIndex:n.index}}),variant:"soft",color:"gray"},null,8,["to"])]),_:1},8,["columns","rows"])]),_:1}),l(S,{ui:{header:{base:"flex justify-between items-center gap-4"},body:{padding:""}}},{header:i(()=>[p("h3",{class:"font-bold font-mono",textContent:f(a(o)("pages.orders"))},null,8,Sa),l(W,{modelValue:a(x),"onUpdate:modelValue":t[2]||(t[2]=n=>K(x)?x.value=n:null),icon:"i-heroicons-magnifying-glass-20-solid",placeholder:a(o)("status_page.search_placeholder")},null,8,["modelValue","placeholder"])]),default:i(()=>[l(j,{ui:{th:{base:"whitespace-nowrap"}},columns:a(tt),rows:a(st)},{"buyerEmail-data":i(({row:n})=>[l(d,{label:n.buyerEmail,to:`mailto:${n.buyerEmail}`,variant:"link",padded:!1},null,8,["label","to"])]),"readerEmail-data":i(({row:n})=>[l(d,{label:n.readerEmail,to:`mailto:${n.readerEmail}`,variant:"link",padded:!1},null,8,["label","to"])]),"wallet-data":i(({row:n})=>[l($e,{text:n.wallet},{default:i(()=>[l(d,{class:"font-mono",label:n.shortenWallet,to:n.walletLink,variant:"link",padded:!1,size:"xs",target:"_blank"},null,8,["label","to"])]),_:2},1032,["text"])]),"status-data":i(({row:n})=>[l(Te,{color:n.statusLabelColor,label:n.statusLabel,variant:"outline",ui:{rounded:"rounded-full"}},null,8,["color","label"])]),"actions-data":i(({row:n})=>[l(Ue,{items:n.actions},{default:i(()=>[l(d,{class:Wt({hidden:!n.actions.length}),icon:"i-heroicons-ellipsis-horizontal-20-solid",color:"gray",variant:"ghost"},null,8,["class"])]),_:2},1032,["items"])]),_:1},8,["columns","rows"])]),_:1}),l(S,{ui:{header:{base:"flex justify-between items-center"},body:{padding:"12px"}}},{default:i(()=>[p("div",Na,[p("h3",{class:"font-bold font-mono",textContent:f(a(o)("nft_book_form.advanced_settings"))},null,8,$a),l(d,{color:"gray",variant:"ghost",icon:a(y)?"i-heroicons-chevron-up":"i-heroicons-chevron-down",onClick:t[3]||(t[3]=()=>{y.value=!a(y)})},null,8,["icon"])]),a(y)?(g(),ee(Fe,{key:0},[p("div",Ta,[l(S,{ui:{body:{padding:""}}},{header:i(()=>[p("h3",{class:"font-bold font-mono",textContent:f(a(o)("pages.sales_channel_summary"))},null,8,Ua)]),default:i(()=>[l(j,{columns:[{key:"id",label:a(o)("table.channel_id"),sortable:!0},{key:"count",label:a(o)("table.count"),sortable:!0},{key:"totalUSD",label:a(o)("table.total_usd"),sortable:!0}],rows:a(ut)},{"id-data":i(({row:n})=>[n.id!=="empty"?(g(),ee("span",Da,f(n.idLabel),1)):(g(),F(Te,{key:1,label:n.idLabel,ui:{rounded:"rounded-full"},color:"gray"},null,8,["label"]))]),_:1},8,["columns","rows"])]),_:1}),l(S,{ui:{header:{base:"flex justify-between items-center"},body:{padding:"",base:"space-y-8"}}},{header:i(()=>[p("h4",{class:"text-sm font-bold font-mono",textContent:f(a(o)("form.share_sales_data"))},null,8,Ea),p("div",La,[l(W,{modelValue:a(C),"onUpdate:modelValue":t[4]||(t[4]=n=>K(C)?C.value=n:null),class:"font-mono",placeholder:"0x..."},null,8,["modelValue"]),l(d,{label:a(o)("common.add"),variant:a(C)?"outline":"solid",color:a(C)?"primary":"gray",disabled:!a(C),onClick:vt},null,8,["label","variant","color","disabled"])])]),default:i(()=>[l(j,{columns:a(it),rows:a(rt)},{"wallet-data":i(({row:n})=>[l($e,{text:n.wallet},{default:i(()=>[l(d,{class:"font-mono",label:n.shortenWallet,to:n.walletLink,variant:"link",padded:!1,size:"xs"},null,8,["label","to"])]),_:2},1032,["text"])]),"remove-data":i(({row:n})=>[p("div",Fa,[l(d,{icon:"i-heroicons-x-mark",variant:"soft",color:"red",onClick:()=>a(c).splice(n.index,1)},null,8,["onClick"])])]),_:1},8,["columns","rows"])]),_:1}),l(S,{ui:{body:{base:"space-y-4"}}},{header:i(()=>[p("h3",{class:"font-bold font-mono",textContent:f(a(o)("form.copy_purchase_link"))},null,8,Aa)]),default:i(()=>{var n;return[l(De,{label:a(o)("form.edition")},{default:i(()=>[l(Nt,{modelValue:a(V),"onUpdate:modelValue":t[5]||(t[5]=I=>K(V)?V.value=I:null),options:a(dt)},null,8,["modelValue","options"])]),_:1},8,["label"]),l(De,{label:a(o)("form.sales_channel_for_links")},{default:i(()=>[l(W,{modelValue:a(Q),"onUpdate:modelValue":t[6]||(t[6]=I=>K(Q)?Q.value=I:null),placeholder:"Channel ID(s), separated by commas (e.g. store01, store02)"},null,8,["modelValue"])]),_:1},8,["label"]),a(E).length>1?(g(),F(S,{key:0,ui:{header:{base:"flex justify-between items-center"},body:{padding:""}}},{header:i(()=>[p("h4",{class:"text-sm font-bold font-mono",textContent:f(a(o)("purchase_link.download_all_links"))},null,8,Oa),l(Ue,{items:[[{label:a(o)("buttons.print_all_qr"),icon:"i-heroicons-qr-code",click:kt},{label:a(o)("buttons.download_all_links"),icon:"i-heroicons-arrow-down-on-square-stack",click:gt},{label:a(o)("buttons.shorten_all_links"),icon:"i-heroicons-sparkles",click:wt}]],popper:{placement:"top-end"}},{default:i(()=>[l(d,{icon:"i-heroicons-ellipsis-horizontal-20-solid",color:"gray",variant:"soft"})]),_:1},8,["items"])]),default:i(()=>[l(j,{columns:[{key:"index",label:"#"},{key:"channel",label:a(o)("table.channel_id")},{key:"link",label:a(o)("purchase_link.download_links")}],rows:a(E),ui:{thead:"whitespace-nowrap"}},{"index-data":i(({index:I})=>[be(f(I+1),1)]),"link-data":i(({row:I})=>[p("div",Pa,[l(d,{icon:"i-heroicons-qr-code",variant:"outline",size:"xs",onClick:ce=>q.value=I},null,8,["onClick"]),l(d,{icon:"i-heroicons-document-duplicate",size:"xs",variant:"outline",disabled:!I.url,onClick:ce=>Ne(I.url)},null,8,["disabled","onClick"]),l(d,{class:"font-mono break-all",label:I.url,to:I.url,color:"gray",variant:"outline",size:"xs",target:"_blank"},null,8,["label","to"])])]),_:1},8,["columns","rows"])]),_:1})):a(E)[0]?(g(),ee("div",Va,[l(d,{icon:"i-heroicons-qr-code",variant:"outline",size:"xs",onClick:t[7]||(t[7]=I=>q.value=a(E)[0])}),l(d,{icon:"i-heroicons-document-duplicate",size:"xs",variant:"outline",disabled:!((n=a(E)[0])!=null&&n.url),onClick:t[8]||(t[8]=I=>{var ce;return Ne((ce=a(E)[0])==null?void 0:ce.url)})},null,8,["disabled"]),l(d,{icon:"i-heroicons-arrow-top-right-on-square",to:a(E)[0].url,target:"_blank",size:"xs",variant:"outline"},null,8,["to"]),l(W,{class:"grow font-mono","model-value":a(E)[0].url,disabled:!0,color:"gray",variant:"outline",size:"xs"},null,8,["model-value"])])):H("",!0)]}),_:1})]),p("div",Ra,[l(d,{label:a(o)("common.save"),loading:a(U),size:"lg",disabled:a(U),onClick:yt},null,8,["label","loading","disabled"])])],64)):H("",!0)]),_:1})],64)):H("",!0),l(Ee,{modelValue:a(re),"onUpdate:modelValue":t[10]||(t[10]=n=>K(re)?re.value=n:null)},{default:i(()=>[a(q)?(g(),F($t,{key:0,data:a(q).url,"file-name":at(a(q).channel),width:500,height:500},{header:i(()=>[p("h3",{class:"font-bold font-mono",textContent:f(a(o)("purchase_link.download_qr_modal"))},null,8,Ba),l(d,{icon:"i-heroicons-x-mark",color:"gray",variant:"ghost",onClick:t[9]||(t[9]=n=>re.value=!1)})]),_:1},8,["data","file-name"])):H("",!0)]),_:1},8,["modelValue"]),l(Ee,{modelValue:a(ae),"onUpdate:modelValue":t[11]||(t[11]=n=>K(ae)?ae.value=n:null)},{default:i(()=>[l(Tt,{"iscn-id":a(we),onSubmit:Ct},null,8,["iscn-id"])]),_:1},8,["modelValue"]),l(Ut,{transition:!1})]),_:1})}}});export{mo as default};
