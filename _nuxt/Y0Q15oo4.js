import{a_ as z,b3 as G,bi as W,bl as j,bk as K,a$ as Q,b5 as u,b6 as S,b7 as X,b0 as Y,b1 as x,aX as l,aT as i,aU as t,bp as b,aV as a,bd as s,bq as H,bM as J,aY as Z,br as tt,aW as h,aS as k,bg as et,bh as st,bc as ot,be as at}from"./D2CEXfd8.js";import{_ as nt}from"./1bYBi-Kd.js";import{_ as lt}from"./Dre5-GPS.js";import{_ as it}from"./DmqhpNPL.js";import{u as rt}from"./CgnXYxAp.js";import"./BuRo9X_H.js";import"./C41sjMgJ.js";(function(){try{var r=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},f=new r.Error().stack;f&&(r._sentryDebugIds=r._sentryDebugIds||{},r._sentryDebugIds[f]="f91b334f-4325-4983-9b96-02c71a8c9dba",r._sentryDebugIdIdentifier="sentry-dbid-f91b334f-4325-4983-9b96-02c71a8c9dba")}catch{}})();const pt={class:"text-lg font-bold font-mono"},dt={class:"divide-y w-full"},ut={class:"px-4 py-3"},ft={class:"px-4 py-3"},ct={class:"px-4 py-3"},mt={class:"text-left px-4 py-3"},_t={class:"text-left px-4 py-3"},yt={class:"text-left px-4 py-3 font-mono text-sm"},xt={class:"text-left px-4 py-3"},bt={class:"text-left px-4 py-3"},ht={class:"text-left px-4 py-3"},gt={class:"text-left px-4 py-3"},vt={class:"text-left px-4 py-3"},St={class:"divide-y w-full"},kt={key:0},It={class:"text-left px-4 py-3"},Bt={class:"text-left px-4 py-3"},$t={class:"text-left px-4 py-3"},Vt=z({__name:"[classId]",setup(r){const{LIKE_CO_API:f}=G().public,g=W(),{token:I}=j(g),B=rt(),{lazyFetchClassMetadataById:P}=B,$=K(),U=Q(),c=u(""),m=u(!1),p=u($.params.classId),w=u($.query.payment_id),d=u(""),o=u({}),V=S(()=>{var n;return(n=B.getClassMetadataById(p.value))==null?void 0:n.name}),C=S(()=>D.value||!d.value||m.value),D=S(()=>o.value.shippingStatus==="shipped");X(m,n=>{n&&(c.value="")}),Y(async()=>{const n=await $fetch(`${f}/likernft/book/purchase/${p.value}/status/${w.value}`,{headers:{authorization:`Bearer ${I.value}`}});o.value=n,o.value.shippingMessage&&(d.value=o.value.shippingMessage),P(p.value)});async function T(){if(!C.value)try{m.value=!0,await $fetch(`${f}/likernft/book/purchase/${p.value}/shipping/sent/${w.value}`,{method:"POST",body:{message:d.value},headers:{authorization:`Bearer ${I.value}`}}),U.push({name:"nft-book-store-status-classId",params:{classId:p.value}})}catch(n){console.error(n),c.value=n.toString()}finally{m.value=!1}}return(n,e)=>{const A=H,M=J,v=tt,R=nt,F=lt,L=at,O=it;return i(),x(O,null,{default:l(()=>[t("h1",pt,' NFT Book Physical Good shipping status "'+a(s(V)||s(p))+'" ',1),s(c)?(i(),x(A,{key:0,icon:"i-heroicons-exclamation-triangle",color:"red",variant:"soft",title:`${s(c)}`,"close-button":{icon:"i-heroicons-x-mark-20-solid",color:"red",variant:"link",padded:!1},onClose:e[0]||(e[0]=_=>c.value="")},null,8,["title"])):b("",!0),s(m)?(i(),x(M,{key:1,animation:"carousel"},{indicator:l(()=>e[2]||(e[2]=[Z(" Loading... ")])),_:1})):b("",!0),s(g).isAuthenticated?(i(),x(v,{key:2,ui:{footer:{base:"space-y-4"}}},{header:l(()=>e[3]||(e[3]=[t("h3",{class:"font-bold font-mono"}," Order status ",-1)])),footer:l(()=>[h(F,{label:"Enter shipping information and message emailed to buyer"},{default:l(()=>[h(R,{modelValue:s(d),"onUpdate:modelValue":e[1]||(e[1]=_=>ot(d)?d.value=_:null),disabled:s(D),placeholder:"shipping tracking ID, ETA..."},null,8,["modelValue","disabled"])]),_:1}),h(L,{label:"Set as Shipped and send email",disabled:s(C),onClick:T},null,8,["disabled"])]),default:l(()=>{var _;return[h(v,{ui:{body:{padding:""}}},{default:l(()=>{var y;return[t("table",dt,[t("tbody",null,[t("tr",null,[e[4]||(e[4]=t("th",{class:"text-left px-4 py-3"}," Buyer Email ",-1)),t("td",ut,a(s(o).email),1)]),t("tr",null,[e[5]||(e[5]=t("th",{class:"text-left px-4 py-3"}," Buyer Phone Number ",-1)),t("td",ft,a(s(o).phone),1)]),t("tr",null,[e[6]||(e[6]=t("th",{class:"text-left px-4 py-3"}," Reader Email ",-1)),t("td",ct,a(((y=s(o).giftInfo)==null?void 0:y.toEmail)||s(o).email),1)]),t("tr",null,[e[7]||(e[7]=t("th",{class:"text-left px-4 py-3"}," Shipping Status ",-1)),t("td",mt,a(s(o).shippingStatus),1)]),t("tr",null,[e[8]||(e[8]=t("th",{class:"text-left px-4 py-3"}," Shipping cost paid ",-1)),t("td",_t,a(s(o).shippingCost),1)]),t("tr",null,[e[9]||(e[9]=t("th",{class:"text-left px-4 py-3"}," Buyer Wallet ",-1)),t("td",yt,a(s(o).wallet),1)]),t("tr",null,[e[10]||(e[10]=t("th",{class:"text-left px-4 py-3"}," Price Name ",-1)),t("td",xt,a(s(o).priceName),1)]),t("tr",null,[e[11]||(e[11]=t("th",{class:"text-left px-4 py-3"}," Price ",-1)),t("td",bt,a(s(o).price),1)]),t("tr",null,[e[12]||(e[12]=t("th",{class:"text-left px-4 py-3"}," Quantity ",-1)),t("td",ht,a(s(o).quantity),1)]),t("tr",null,[e[13]||(e[13]=t("th",{class:"text-left px-4 py-3"}," Buyer message ",-1)),t("td",gt,a(s(o).message),1)]),t("tr",null,[e[14]||(e[14]=t("th",{class:"text-left px-4 py-3"}," Sales channel ",-1)),t("td",vt,a(s(o).from),1)])])])]}),_:1}),(_=s(o).shippingDetails)!=null&&_.address?(i(),x(v,{key:0},{header:l(()=>e[15]||(e[15]=[t("h3",{class:"text-sm font-bold font-mono"}," Shipping Details ",-1)])),default:l(()=>{var y,N;return[t("table",St,[t("tbody",null,[(y=s(o).shippingDetails)!=null&&y.name?(i(),k("tr",kt,[e[16]||(e[16]=t("td",{class:"text-left px-4 py-3"}," Name ",-1)),t("td",It,a(s(o).shippingDetails.name),1)])):b("",!0),(i(!0),k(et,null,st(Object.entries((N=s(o).shippingDetails)==null?void 0:N.address),([E,q])=>(i(),k("tr",{key:E},[t("td",Bt,a(E),1),t("td",$t,a(q),1)]))),128))])])]}),_:1})):b("",!0)]}),_:1})):b("",!0)]),_:1})}}});export{Vt as default};
