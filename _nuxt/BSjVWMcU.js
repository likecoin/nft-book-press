import{_ as H}from"./g2066BjX.js";import{_ as L}from"./DfD8qvRM.js";import{a_ as X,e9 as R,bl as q,e4 as E,b5 as w,b6 as U,b7 as F,b1 as A,aT as o,br as G,aX as b,aS as l,bp as m,aU as a,aW as c,bd as t,bq as K,aV as D,be as P,bc as Y,bM as z,eF as J}from"./Bb_DOv85.js";import{_ as O}from"./BkqXD9Lk.js";import{u as Q}from"./DY1FD8XL.js";(function(){try{var n=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},v=new n.Error().stack;v&&(n._sentryDebugIds=n._sentryDebugIds||{},n._sentryDebugIds[v]="163497fb-2131-44f2-8d88-a881ac880bf2",n._sentryDebugIdIdentifier="sentry-dbid-163497fb-2131-44f2-8d88-a881ac880bf2")}catch{}})();const Z={key:0,class:"flex flex-col gap-[24px]"},ee={class:"grid grid-cols-2 gap-[8px] w-full"},te={class:"flex flex-col w-full"},oe={key:0,class:"flex flex-col items-start w-full"},ne={class:"flex flex-col gap-[8px] mt-[12px] px-[6px] py-[4px] w-[80%]"},le=["textContent"],ae={key:1},se={class:"flex flex-col w-full"},ie={class:"flex flex-col mt-[14px] w-[80%]"},ce={key:0,class:"text-red-700 text-[10px]"},re={key:1,class:"flex flex-col gap-[8px] mt-[12px] px-[6px] py-[4px] w-[80%]"},ue={key:0},de=["textContent"],pe={class:"flex flex-col items-center justify-center gap-[8px] w-full"},fe={key:0,class:"text-center text-green-800 text-[12px]"},ge=X({__name:"StripeConnectCard",props:R({loginAddress:{type:String,default:""},shouldDisableSetting:{type:Boolean,default:!1},stripeConnectWallet:{type:String,default:""},isUpdatingStripeAccount:{type:Boolean,default:!1}},{isStripeConnectChecked:{type:Boolean},isStripeConnectCheckedModifiers:{},isUsingDefaultAccount:{type:Boolean},isUsingDefaultAccountModifiers:{}}),emits:R(["save"],["update:isStripeConnectChecked","update:isUsingDefaultAccount"]),setup(n,{emit:v}){const S=Q(),{fetchStripeConnectStatusByWallet:I}=S,{getStripeConnectStatusByWallet:C}=q(S),r=E(n,"isStripeConnectChecked"),s=E(n,"isUsingDefaultAccount"),u=n,W=v,i=w(""),f=w(""),h=w(!1),x=U(()=>C.value(u.loginAddress)),_=U(()=>C.value(i.value)),V=U(()=>!(!r.value||s.value&&!x.value.isReady||!s.value&&!_.value.isReady||f.value));F(()=>u.stripeConnectWallet,d=>{d&&!s.value&&(i.value=d)},{immediate:!0});async function M(d){if(!r.value)return;const e=d.target.value.trim();if(i.value=e,f.value="",!J.test(e)){f.value="You have entered an invalid wallet address";return}const y=C.value(e);if(y.isReady)return y;h.value=!0;try{await I(e)}catch(g){console.error(g)}finally{h.value=!1}}function N(){const d=s.value?u.loginAddress:i.value;W("save",d)}return(d,e)=>{const y=H,g=L,k=K,B=P,T=O,$=z,j=G;return o(),A(j,{ui:{divide:r.value?void 0:"",header:{base:"flex flex-wrap justify-between items-center gap-2"},body:{padding:r.value?void 0:""}}},{header:b(()=>[e[4]||(e[4]=a("h3",{class:"font-bold font-mono"}," Connect to a Stripe Account / 連接 Stripe 帳戶 ",-1)),c(y,{modelValue:r.value,"onUpdate:modelValue":e[0]||(e[0]=p=>r.value=p),name:"stripe",label:"Use a Stripe Connect account for receiving payments"},null,8,["modelValue"])]),default:b(()=>[r.value?(o(),l("div",Z,[a("div",ee,[a("div",te,[c(g,{modelValue:s.value,"onUpdate:modelValue":e[1]||(e[1]=p=>s.value=p),class:"w-[50%]",value:!0,disabled:!!u.shouldDisableSetting},{label:b(()=>e[5]||(e[5]=[a("div",null,"Use my account",-1)])),_:1},8,["modelValue","disabled"]),t(x).isReady?(o(),l("div",oe,[a("div",ne,[c(k,{icon:"i-heroicons-check",color:"primary",variant:"outline",title:"Has Stripe Account"}),t(x).email?(o(),l("div",{key:0,textContent:D(`Email: ${t(x).email}`)},null,8,le)):m("",!0)])])):(o(),l("span",ae,[c(B,{class:"mt-2",label:"Create one here",to:{name:"nft-book-store-user"},target:"_blank",variant:"outline"})]))]),a("div",se,[c(g,{modelValue:s.value,"onUpdate:modelValue":e[2]||(e[2]=p=>s.value=p),value:!1,disabled:!!u.shouldDisableSetting},{label:b(()=>e[6]||(e[6]=[a("span",null,"Use another Stripe Express account",-1)])),_:1},8,["modelValue","disabled"]),a("div",ie,[c(T,{modelValue:t(i),"onUpdate:modelValue":e[3]||(e[3]=p=>Y(i)?i.value=p:null),color:t(f)?"rose":"white",class:"font-mono w-full",placeholder:"like1...",onInput:M},null,8,["modelValue","color"]),t(f)?(o(),l("span",ce,D(t(f)),1)):m("",!0)]),t(h)?(o(),A($,{key:0,class:"my-[6px]",animation:"carousel"})):t(i)&&t(_)?(o(),l("div",re,[t(_).isReady?(o(),l("div",ue,[c(k,{icon:"i-heroicons-check",color:"primary",variant:"outline",title:"Has Stripe Account"}),t(_).email?(o(),l("div",{key:0,textContent:D(`Email: ${t(_).email}`)},null,8,de)):m("",!0)])):(o(),A(k,{key:1,icon:"i-heroicons-x-mark",color:"red",variant:"outline",title:"No Stripe account connected to this wallet yet."}))])):m("",!0)])]),a("div",pe,[c(B,{label:"Save Changes",loading:n.isUpdatingStripeAccount,color:t(V)?"primary":"gray",disabled:!t(V)||!!u.shouldDisableSetting,onClick:N},null,8,["loading","color","disabled"]),u.shouldDisableSetting?(o(),l("div",fe," Successfully save the Stripe Connect account! ")):m("",!0)])])):m("",!0)]),_:1},8,["ui"])}}});export{ge as _};
