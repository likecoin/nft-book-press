import{a_ as We,a$ as ze,bt as Me,b6 as je,b8 as de,bz as qe,b9 as d,ba as f,bb as ye,aS as z,aT as h,b3 as F,aU as p,b4 as a,bf as He,bd as H,aW as s,aX as i,aY as ge,aV as b,br as Ke,b7 as Lt,bk as Et,b0 as Ft,b1 as At,cb as Pt,cx as Ae,bi as L,bj as Rt,bo as Pe,bD as Ot,cy as Bt,b_ as Vt,b$ as Wt,be as zt,bw as Mt,bv as jt,bg as qt,cz as Ht,b2 as Re,cd as Kt,ce as Oe}from"./CFpP0Qfr.js";import{u as Gt,v as Qt,_ as Xt,f as Yt}from"./CT8jtLTZ.js";import{a as Ge,u as Qe,b as Jt}from"./l4Q9i8j1.js";import{D as Zt}from"./B7iuO3sF.js";import{b as ea,u as ta,_ as aa}from"./FLvd_8g7.js";import{_ as oa}from"./oAF15bOe.js";import{_ as na}from"./BL62hFLV.js";import{_ as la}from"./CxljOOW8.js";import{_ as sa}from"./DdpYE5kc.js";import{_ as ia}from"./Du-Ev3ZH.js";import{_ as ra}from"./ChNgszvx.js";import{g as ca}from"./BFnfdNQ7.js";import{u as ua}from"./BpTop20-.js";import{u as da}from"./ChnNUsB3.js";import"./BxhtcnH3.js";import"./CrJ7IZ_X.js";import"./C3jLROnn.js";import"./Dgbln9FO.js";import"./CKvoyTkq.js";import"./D6TRAm2U.js";import"./CsGK_NXO.js";(function(){try{var I=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},o=new I.Error().stack;o&&(I._sentryDebugIds=I._sentryDebugIds||{},I._sentryDebugIds[o]="93f751c4-e76f-4ebc-a447-e37a542c6fd4",I._sentryDebugIdIdentifier="sentry-dbid-93f751c4-e76f-4ebc-a447-e37a542c6fd4")}catch{}})();const ma={class:"my-4"},pa={class:"w-full flex justify-center items-center gap-2 my-4"},_a=We({__name:"EditISCNMetadataForm",props:{classId:{}},emits:["iscnUpdated"],setup(I,{emit:o}){const{t:M}=ze(),me=o,j=Ge(),K=Me(),G=je(),{wallet:Y,signer:pe}=de(G),{validateWalletConsistency:oe}=G,{writeContractAsync:Q}=ea(),{checkAndGrantUpdater:A,waitForTransactionReceipt:_e}=ta(),{getNFTClassConfig:ne}=Qe(),{refreshBookMetadata:fe}=qe(),P=I,J=d({}),Z=d(!1),ee=d(!1),S=d({type:"Book",title:"",description:"",isbn:"",publisher:"",publicationDate:"",author:{name:"",description:""},license:"All rights reserved",contentFingerprints:[{url:""}],downloadableUrls:[{url:"",type:"",fileName:""}],customLicense:"",language:"",bookInfoUrl:"",tags:[],coverUrl:""}),V=d({}),{payload:R,getFileTypeFromMime:E}=Gt({iscnFormData:S,iscnChainData:V}),_=f(()=>Qt(S.value)),X=f(()=>{var r;return!((r=_.value)!=null&&r.length)});ye(()=>P.classId,async r=>{var v,C,k,y;if(r)try{ee.value=!0,J.value=await j.lazyFetchClassMetadataById(r);const u=J.value;let O=[{url:"",type:"",fileName:""}];(v=u.potentialAction)!=null&&v.target&&Array.isArray(u.potentialAction.target)?O=u.potentialAction.target.map($=>({type:E($.contentType),url:$.url,fileName:$.name})):u.sameAs&&Array.isArray(u.sameAs)&&(O=u.sameAs.map(W));const w=[];u.keywords&&(Array.isArray(u.keywords)?w.push(...u.keywords):w.push(...u.keywords.split(",").map($=>$.trim()).filter($=>$))),V.value=u,S.value={...u,type:u["@type"]||"Book",title:u.name||"",description:u.description||"",isbn:u.isbn||"",publisher:u.publisher||"",publicationDate:u.datePublished||"",author:{name:((C=u.author)==null?void 0:C.name)||u.author||"",description:((k=u.author)==null?void 0:k.description)||""},license:u.usageInfo||"All Rights Reserved",contentFingerprints:((y=u.contentFingerprints)==null?void 0:y.map($=>({url:$})))||[{url:""}],downloadableUrls:O,customLicense:"",language:u.inLanguage||"",bookInfoUrl:u.url||"",tags:w,coverUrl:u.thumbnailUrl||u.image||""}}catch(u){console.error("Error fetching ISCN data:",u)}finally{ee.value=!1}},{immediate:!0});function W(r){try{const C=new URL(r).searchParams.get("name")||"",[k,y]=C.split(".");return{url:r.split("?")[0],fileName:k,type:y||""}}catch{return{url:r,fileName:"",type:""}}}async function N(){if(await oe(),!Y.value||!pe.value){K.add({title:M("auth.login_required"),color:"red"});return}if(!X.value){K.add({title:_.value.join(", "),color:"red"});return}Z.value=!0;try{const r=Yt(R.value),v={name:r.name,description:r.description,...r,symbol:"BOOK",external_link:(r==null?void 0:r.url)||"",image:(r==null?void 0:r.thumbnailUrl)||"",nft_meta_collection_id:"nft_book",nft_meta_collection_name:"NFT Book",nft_meta_collection_description:"NFT Book by Liker Land",recordTimestamp:new Date().toISOString()},C=await ne(P.classId);await A({classId:P.classId,wallet:Y.value});const k=await Q({address:P.classId,abi:Jt,functionName:"update",args:[{name:v.name,symbol:C.symbol,metadata:JSON.stringify(v),max_supply:Zt}]}),y=await _e({hash:k});if(!y||y.status!=="success")throw new Error("INVALID_RECEIPT");K.add({title:M("edit_iscn.update_success"),color:"blue"}),await j.fetchClassMetadataById(P.classId),await fe(P.classId),me("iscnUpdated",{classId:P.classId,metadata:v})}catch(r){K.add({title:M("edit_iscn.update_failed"),description:r.message,color:"red"})}finally{Z.value=!1}}return(r,v)=>{const C=He,k=Xt,y=Ke;return h(),z("div",ma,[a(ee)?(h(),F(C,{key:0,animation:"carousel",color:"primary",class:"w-full"})):(h(),F(k,{key:1,modelValue:a(S),"onUpdate:modelValue":v[0]||(v[0]=u=>H(S)?S.value=u:null)},null,8,["modelValue"])),p("div",pa,[s(y,{color:"primary",loading:a(Z),onClick:N},{default:i(()=>[ge(b(a(M)("common.save")),1)]),_:1},8,["loading"])])])}}});function Be(I){return I?`${I.slice(0,10)}...${I.slice(-6)}`:"-"}const fa={class:"flex justify-between items-center w-full"},ba={class:"flex items-center gap-2"},ha=["textContent"],va={class:"flex justify-between items-center"},ya=["textContent"],ga={class:"flex justify-between items-center gap-4"},ka={key:0,class:"flex flex-col gap-1"},wa=["textContent"],xa=["textContent"],Ca=["textContent"],Ia={class:"text-right"},Sa={class:"text-right"},Na={class:"flex justify-end items-center"},Ta=["textContent"],Ua={class:"flex justify-between items-center w-full"},$a=["textContent"],Da={class:"mt-[24px] flex flex-col gap-[12px]"},La=["textContent"],Ea={key:0,class:"font-bold font-mono"},Fa=["textContent"],Aa={class:"flex gap-2"},Pa={class:"flex justify-end items-center"},Ra=["textContent"],Oa=["textContent"],Ba={class:"flex items-center gap-2"},Va={key:1,class:"flex items-center gap-2"},Wa={class:"flex items-center justify-center w-full mt-4"},za=["textContent"],Ve=2,Ma=1,mo=We({__name:"[classId]",setup(I){const{t:o}=ze(),{CHAIN_EXPLORER_URL:M,BOOK3_URL:me,LIKE_CO_API:j}=Lt().public,K=je(),G=qe(),Y=Ge(),pe=da(),oe=ua(),{token:Q}=de(G),{wallet:A}=de(K),{ordersByClassIdMap:_e}=de(oe),{updateBookListingSetting:ne,reduceListingPendingNFTCountById:fe}=G,{lazyFetchClassMetadataById:P}=Y,{fetchStripeConnectStatusByWallet:J}=pe,{getBalanceOf:Z}=Qe(),ee=Et(),S=Ft(),V=Me(),R=d(""),E=d(!1),_=d(ee.params.classId),X=d(""),W=d(0),N=d({}),r=d([]),v=d(!1),C=d(!1),k=d(!1),y=d(""),u=d(""),O=d([]),w=d(""),$=d(""),ke=d(!1),we=d(""),xe=d({}),Ce=d(!0),le=d(!1),Ie=d(!0),Xe=d(!0),Ye=d(!1),Je=d(!0),se=d(-99),te=d(!1),Se=f(()=>{var e;return(e=Y.getClassMetadataById(_.value))==null?void 0:e.name}),Ne=f(()=>{var e;return(e=N==null?void 0:N.value)==null?void 0:e.ownerWallet}),be=f(()=>A.value&&Ne.value===A.value),Ze=f(()=>be.value),D=f(()=>X.value.split(",").filter((e,t)=>!!e||t===0).map(e=>e.trim()).map(e=>({channel:e,url:Pt({classId:_.value,priceIndex:W.value,channel:e,isUseLikerLandLink:Xe.value})}))),q=d(void 0),ie=f({get:()=>!!q.value,set:e=>{e||(q.value=void 0)}}),et=f(()=>he.value.length?he.value.reduce((t,l)=>{const c=l.from||"empty";return t[c]||(t[c]={count:0,totalUSD:0}),t[c].count+=1,t[c].totalUSD+=l.price,t},{}):{}),he=f(()=>{var e;return(e=re.value)!=null&&e.length?re.value.map(t=>{const l=t.timestamp,c=new Date(l),g=`${c.getDate()}/${c.getMonth()+1}/${c.getFullYear()}`;return{...t,formattedDate:g}}).sort((t,l)=>l.timestamp-t.timestamp):[]}),tt=f(()=>[{key:"actions",label:o("table.actions"),sortable:!1},{key:"orderDate",label:o("table.order_date"),sortable:!0},{key:"status",label:o("table.status"),sortable:!0},{key:"from",label:o("table.sales_channel"),sortable:!0},{key:"price",label:o("form.price"),sortable:!0,class:"w-[120px]"},{key:"priceName",label:o("table.price_name"),sortable:!1},{key:"quantity",label:o("table.quantity"),sortable:!0},{key:"coupon",label:o("table.coupon_applied"),sortable:!1},{key:"buyerEmail",label:o("table.buyer_email"),sortable:!0},{key:"readerEmail",label:o("table.reader_email"),sortable:!0},{key:"wallet",label:o("table.reader_wallet"),sortable:!0},{key:"message",label:o("table.reader_message"),sortable:!1}]),re=f(()=>_e.value.get(_.value)||[]);function at(e=""){const t=[`${Se.value||_.value}`,`price_${W.value}`];return e&&t.push(`channel_${e}`),t.join("_")}function ot(e){const t=[];return e.status==="completed"&&e.txHash?t.push([{label:o("status_page.view_transaction"),icon:"i-heroicons-magnifying-glass",to:`${M}/${e.txHash}`,target:"_blank"}]):e.status==="pendingNFT"&&Ze.value&&t.push([{label:"Send NFT",icon:"i-heroicons-paper-airplane",to:S({name:"my-books-send-classId",params:{classId:e.classId},query:{owner_wallet:Ne.value,payment_id:e.id}})}]),e.status==="paid"&&t.push([{label:o("status_page.send_reminder_email"),icon:"i-heroicons-envelope",click:()=>{bt(e)}}]),["pendingNFT","paid"].includes(e.status)&&t.push([{label:o("status_page.mark_complete"),icon:"i-heroicons-check-circle",click:()=>{ht(e)}}]),t}function nt(e){switch(e.status){case"paid":return"Paid";case"pendingNFT":return o("status.pendingNFT");case"completed":return o("status.completed");default:return e.status}}function lt(e){switch(e.status){case"paid":return"blue";case"pendingNFT":return"amber";case"completed":return"green";default:return"gray"}}const st=f(()=>{var e;return(e=he.value)==null?void 0:e.map((t,l)=>{var c;return{index:l,readerEmail:((c=t.giftInfo)==null?void 0:c.toEmail)||t.email,buyerEmail:t.email,buyerPhone:t.phone||"",status:t.status,statusLabel:nt(t),statusLabelColor:lt(t),orderDate:t.formattedDate,wallet:t.wallet||"",walletLink:Ae(t.wallet),shortenWallet:Be(t.wallet),priceName:t.priceName,price:t.price||0,coupon:t.coupon||"",message:t.message||"",from:t.from||"",quantity:t.quantity||1,actions:ot(t)}}).filter(t=>{var c,g,T,m,B;if(!y.value)return!0;const l=y.value.toLowerCase();return t.readerEmail.toLowerCase().includes(l)||t.buyerEmail.toLowerCase().includes(l)||t.buyerPhone.toLowerCase().includes(l)||((c=t.wallet)==null?void 0:c.toLowerCase().includes(l))||((g=t.priceName)==null?void 0:g.toLowerCase().includes(l))||((T=t.statusLabel)==null?void 0:T.toLowerCase().includes(l))||((m=t.orderDate)==null?void 0:m.toLowerCase().includes(l))||((B=t.from)==null?void 0:B.toLowerCase().includes(l))})}),it=f(()=>{const e=[{key:"wallet",label:o("table.wallet"),sortable:!0}];return be.value&&e.push({key:"remove",label:"",sortable:!1}),e}),rt=f(()=>O.value.map((e,t)=>({index:t,wallet:e,shortenWallet:Be(e),walletLink:Ae(e)})));function ct(e){switch(e){case"empty":return"Not set";default:return e}}const ut=f(()=>{var e;return(e=Object.entries(et.value))==null?void 0:e.map(([t,l])=>({id:t,idLabel:ct(t),count:l.count||0,totalUSD:(l.totalUSD||0).toFixed(2)}))}),dt=f(()=>{var e;return(e=N.value.prices)==null?void 0:e.map((t,l)=>({label:`${t.name.en||t.name} - $${t.price}`,value:l,disabled:l===W.value}))}),mt=f(()=>{const e=[];return e.push({key:"sort",label:o("table.sort"),sortable:!1,class:"w-[60px]"},{key:"name",label:o("table.name"),sortable:!1},{key:"delivery",label:o("table.delivery"),sortable:!1,class:"w-[120px]"},{key:"stock",label:o("table.stock"),sortable:!1,class:"w-[120px]"},{key:"price",label:o("table.price_usd"),sortable:!1,class:"w-[120px]"}),be.value&&e.push({key:"details",label:o("table.details"),sortable:!1,class:"w-[80px]"}),e}),pt=f(()=>{const e=r.value.map((t,l)=>({...t,originalIndex:l,isStockBalancePlaceholderRow:!1}));return r.value.some(t=>!t.isAutoDeliver)&&e.push({name:"",isAutoDeliver:!1,stock:o("table.stock_balance",{count:se.value}),price:"",isStockBalancePlaceholderRow:!0}),e});ye(E,e=>{e&&(R.value="")}),ye(A,async e=>{e?await ve():se.value=-99}),At(async()=>{E.value=!0;try{const e=await $fetch(`${j}/likernft/book/store/${_.value}`,{headers:{authorization:`Bearer ${Q.value}`}});N.value=e,r.value=N.value.prices;const{moderatorWallets:t,connectedWallets:l,mustClaimToView:c,tableOfContents:g,enableCustomMessagePage:T,hideDownload:m}=e;O.value=t,ke.value=!!(l&&Object.keys(l).length),xe.value=l;const B=l&&Object.keys(l)[0];if(B&&(we.value=B,B!==A.value)){Je.value=!1;try{await J(B)}catch(U){console.error(U)}}if(Ce.value=c,le.value=m,Ie.value=T,u.value=g,await oe.fetchOrdersByClassId([_.value]),A.value){await ve();try{await J(A.value)}catch(U){console.error(U)}}P(_.value)}catch(e){R.value=e.toString()}finally{E.value=!1}});async function ve(){const e=N.value.pendingNFTCount||0,t=await Z(_.value,A.value),l=r.value.filter(c=>!c.isAutoDeliver).reduce((c,g)=>c+(g.stock||0),0);se.value=Number(t)-l-Ma-e||0}async function _t(e){e<=0||await Te(e,e-1)}async function ft(e){e>=r.value.length-1||await Te(e,e+1)}async function Te(e,t){try{v.value=!0;const l=[...r.value],[c]=l.splice(e,1);l.splice(t,0,c);const g=r.value[e].index;await $fetch(`${j}/likernft/book/store/${_.value}/price/${g}/order`,{method:"PUT",headers:{authorization:`Bearer ${Q.value}`},body:{order:t}}),r.value=l.map((T,m)=>({...T,order:m})),N.value.prices=r.value,V.add({icon:"i-heroicons-check-circle",title:"Updated editions order successfully",timeout:2e3,color:"green"})}catch(l){r.value=N.value.prices,R.value=l.toString()}finally{v.value=!1}}async function bt(e){var l;if(!((l=re.value)==null?void 0:l.find(c=>c.id===e.id)))throw new Error("ORDER_NOT_FOUND");await $fetch(`${j}/likernft/book/purchase/${_.value}/status/${e.id}/remind`,{method:"POST",headers:{authorization:`Bearer ${Q.value}`}}),V.add({icon:"i-heroicons-check-circle",title:o("status_page.send_reminder_email"),timeout:2e3,color:"green"})}async function ht(e){var g;if(!confirm("Do you want to skip the 'Send NFT' action and override this payment status to 'completed'?"))return;const l=(g=re.value)==null?void 0:g.find(T=>T.id===e.id);if(!l)throw new Error("ORDER_NOT_FOUND");const c=l.status;l.status="completed";try{await $fetch(`${j}/likernft/book/purchase/${_.value}/sent/${e.id}`,{method:"POST",body:{txHash:null,quantity:e.quantity||1},headers:{authorization:`Bearer ${Q.value}`}})}catch(T){throw l.status=c,T}c==="pendingNFT"&&(N.value.pendingNFTCount-=1,fe(_.value,1))}function vt(){w.value&&(O.value.push(w.value),w.value="")}async function yt(){try{if(w.value)throw new Error(o("errors.add_moderator_wallet"));if($.value)throw new Error(o("errors.add_notification_email"));E.value=!0;const e=ke.value&&we.value?xe.value:null;await ne(_.value,{moderatorWallets:O.value,connectedWallets:e,hideDownload:le.value,mustClaimToView:Ce.value,tableOfContents:u.value,enableCustomMessagePage:Ie.value}),await Re(S({name:"my-books"}))}catch(e){const t=e.data||e;console.error(t),R.value=t}finally{E.value=!1,Ye.value=!1}}async function Ue(e=""){await navigator.clipboard.writeText(e),V.add({icon:"i-heroicons-check-circle",title:o("purchase_link.copied_to_clipboard"),timeout:2e3,color:"green"})}function gt(){Kt({data:D.value,fileName:`${_.value}_purchase_links.csv`,fileType:"csv"})}function kt(){try{sessionStorage.setItem("nft_book_press_batch_qrcode",Oe(D.value.map(({channel:e,...t})=>({key:e,...t})))),window.open("/batch-qrcode?print=1","batch_qrcode","popup,menubar=no,location=no,status=no")}catch(e){console.error(e),V.add({icon:"i-heroicons-exclamation-circle",title:o("purchase_link.failed_print_qr"),timeout:0,color:"red",ui:{title:"text-red-400 dark:text-red-400"}})}}async function wt(){try{sessionStorage.setItem("nft_book_press_batch_shorten_url",Oe(D.value.map(({channel:e,url:t})=>({key:e,url:t})))),await Re(S({name:"batch-short-links",query:{print:1}}))}catch(e){console.error(e),V.add({icon:"i-heroicons-exclamation-circle",title:o("purchase_link.failed_shorten_links"),timeout:0,color:"red",ui:{title:"text-red-400 dark:text-red-400"}})}}function xt(){te.value=!0}async function Ct(){await ve(),te.value=!1}function It(e){const l=ca().API_GET_ARWEAVE_V2_LINK;return e.some(c=>!!c.startsWith(l)||c.includes("?key="))}async function St({classId:e,metadata:t}){const{contentFingerprints:l}=t;if(l){const c=It(l);c!==le.value&&(le.value=c),await ne(e,{hideDownload:c})}}return(e,t)=>{const l=Rt,c=He,g=Vt,T=Bt,m=Ke,B=_a,U=Ot,ae=oa,ce=Mt,$e=na,De=zt,Le=la,Nt=sa,Ee=jt,Tt=ia,Fe=qt,Ut=aa,$t=Ht,Dt=ra;return h(),F(Dt,{class:"space-y-10 pb-10"},{default:i(()=>[a(R)?(h(),F(l,{key:0,icon:"i-heroicons-exclamation-triangle",color:"red",variant:"soft",title:`${a(R)}`,"close-button":{icon:"i-heroicons-x-mark-20-solid",color:"red",variant:"link",padded:!1},onClose:t[0]||(t[0]=n=>R.value="")},null,8,["title"])):L("",!0),a(E)?(h(),F(c,{key:1,animation:"carousel"},{indicator:i(()=>[ge(b(a(o)("loading.progress")),1)]),_:1})):L("",!0),a(G).isAuthenticated?(h(),z(Pe,{key:2},[s(U,{ui:{header:{base:"flex justify-between items-center"},body:{padding:"12px"},ring:a(k)?"ring-2 ring-gray-500":"ring-1 ring-gray-200"}},{default:i(()=>[p("div",fa,[p("div",ba,[p("h3",{class:"font-bold font-mono",textContent:b(a(Se)||a(_))},null,8,ha),s(T,{to:`${a(me)}/store/${a(_)}`,class:"flex items-center",target:"_blank"},{default:i(()=>[s(g,{name:"i-heroicons-arrow-top-right-on-square",size:"xl"})]),_:1},8,["to"])]),s(m,{color:"gray",variant:"ghost",trailing:"",label:a(o)("form.edit_iscn_metadata"),icon:a(k)?"i-heroicons-chevron-up":"i-heroicons-chevron-down",onClick:t[1]||(t[1]=()=>{k.value=!a(k)})},null,8,["label","icon"])]),a(k)?(h(),F(B,{key:0,"class-id":a(_),onIscnUpdated:St},null,8,["class-id"])):L("",!0)]),_:1},8,["ui"]),s(U,{ui:{body:{padding:""}}},{header:i(()=>[p("div",va,[p("h3",{class:"font-bold font-mono",textContent:b(a(o)("pages.editions"))},null,8,ya),p("div",ga,[s(m,{icon:"i-heroicons-plus",class:"mb-[12px]",variant:"outline",color:a(r).length>=Ve?"gray":"primary",disabled:a(r).length>=Ve,label:a(o)("form.add_edition"),to:a(S)({name:"my-books-status-classId-edit-new",params:{classId:a(_)},query:{price_index:a(r).length}})},null,8,["color","disabled","label","to"])])])]),footer:i(()=>[p("div",Na,[s(m,{icon:"i-heroicons-plus",label:a(o)("buttons.mint_new_stock"),onClick:xt},null,8,["label"])])]),default:i(()=>[s(ae,{columns:a(mt),rows:a(pt)},{"sort-data":i(({row:n})=>[!n.isStockBalancePlaceholderRow&&a(r).length>1?(h(),z("div",ka,[s(m,{icon:n.originalIndex===0?"i-heroicons-chevron-down":"i-heroicons-chevron-up",variant:"ghost",color:"gray",size:"xs",label:String(n.originalIndex+1),disabled:a(v)||n.originalIndex<=0&&n.originalIndex>=a(r).length-1,loading:a(v),trailing:"",onClick:x=>n.originalIndex===0?ft(n.originalIndex):_t(n.originalIndex)},null,8,["icon","label","disabled","loading","onClick"])])):L("",!0),!n.isStockBalancePlaceholderRow&&a(r).length===1?(h(),z("span",{key:1,textContent:b(String(n.originalIndex+1))},null,8,wa)):L("",!0)]),"name-data":i(({row:n})=>[p("h4",{class:"font-medium",textContent:b(n.name.zh)},null,8,xa)]),"delivery-data":i(({row:n})=>[n.isStockBalancePlaceholderRow?L("",!0):(h(),z("h4",{key:0,class:"font-medium",textContent:b(n.isAutoDeliver?a(o)("form.auto_delivery"):a(o)("form.manual_delivery"))},null,8,Ca))]),"stock-data":i(({row:n})=>[p("span",Ia,b(n.isAutoDeliver?a(o)("form.auto_stock"):n.stock),1)]),"price-data":i(({row:n})=>[p("span",Sa,b(n.price),1)]),"details-data":i(({row:n})=>[n.isStockBalancePlaceholderRow?L("",!0):(h(),F(m,{key:0,icon:"i-heroicons-document",to:a(S)({name:"my-books-status-classId-edit-editionIndex",params:{classId:a(_),editionIndex:n.index}}),variant:"soft",color:"gray"},null,8,["to"]))]),_:1},8,["columns","rows"])]),_:1}),s(U,{ui:{header:{base:"flex justify-between items-center gap-4"},body:{padding:""}}},{header:i(()=>[p("h3",{class:"font-bold font-mono",textContent:b(a(o)("pages.orders"))},null,8,Ta),s(ce,{modelValue:a(y),"onUpdate:modelValue":t[2]||(t[2]=n=>H(y)?y.value=n:null),icon:"i-heroicons-magnifying-glass-20-solid",placeholder:a(o)("status_page.search_placeholder")},null,8,["modelValue","placeholder"])]),default:i(()=>[s(ae,{ui:{th:{base:"whitespace-nowrap"}},columns:a(tt),rows:a(st)},{"buyerEmail-data":i(({row:n})=>[s(m,{label:n.buyerEmail,to:`mailto:${n.buyerEmail}`,variant:"link",padded:!1},null,8,["label","to"])]),"readerEmail-data":i(({row:n})=>[s(m,{label:n.readerEmail,to:`mailto:${n.readerEmail}`,variant:"link",padded:!1},null,8,["label","to"])]),"wallet-data":i(({row:n})=>[s($e,{text:n.wallet},{default:i(()=>[s(m,{class:"font-mono",label:n.shortenWallet,to:n.walletLink,variant:"link",padded:!1,size:"xs",target:"_blank"},null,8,["label","to"])]),_:2},1032,["text"])]),"status-data":i(({row:n})=>[s(De,{color:n.statusLabelColor,label:n.statusLabel,variant:"outline",ui:{rounded:"rounded-full"}},null,8,["color","label"])]),"actions-data":i(({row:n})=>[s(Le,{items:n.actions},{default:i(()=>[s(m,{class:Wt({hidden:!n.actions.length}),icon:"i-heroicons-ellipsis-horizontal-20-solid",color:"gray",variant:"ghost"},null,8,["class"])]),_:2},1032,["items"])]),_:1},8,["columns","rows"])]),_:1}),s(U,{ui:{header:{base:"flex justify-between items-center"},body:{padding:"12px"}}},{default:i(()=>[p("div",Ua,[p("h3",{class:"font-bold font-mono",textContent:b(a(o)("nft_book_form.advanced_settings"))},null,8,$a),s(m,{color:"gray",variant:"ghost",icon:a(C)?"i-heroicons-chevron-up":"i-heroicons-chevron-down",onClick:t[3]||(t[3]=()=>{C.value=!a(C)})},null,8,["icon"])]),a(C)?(h(),z(Pe,{key:0},[p("div",Da,[s(U,{ui:{body:{padding:""}}},{header:i(()=>[p("h3",{class:"font-bold font-mono",textContent:b(a(o)("pages.sales_channel_summary"))},null,8,La)]),default:i(()=>[s(ae,{columns:[{key:"id",label:a(o)("table.channel_id"),sortable:!0},{key:"count",label:a(o)("table.count"),sortable:!0},{key:"totalUSD",label:a(o)("table.total_usd"),sortable:!0}],rows:a(ut)},{"id-data":i(({row:n})=>[n.id!=="empty"?(h(),z("span",Ea,b(n.idLabel),1)):(h(),F(De,{key:1,label:n.idLabel,ui:{rounded:"rounded-full"},color:"gray"},null,8,["label"]))]),_:1},8,["columns","rows"])]),_:1}),s(U,{ui:{header:{base:"flex justify-between items-center"},body:{padding:"",base:"space-y-8"}}},{header:i(()=>[p("h4",{class:"text-sm font-bold font-mono",textContent:b(a(o)("form.share_sales_data"))},null,8,Fa),p("div",Aa,[s(ce,{modelValue:a(w),"onUpdate:modelValue":t[4]||(t[4]=n=>H(w)?w.value=n:null),class:"font-mono",placeholder:"0x..."},null,8,["modelValue"]),s(m,{label:a(o)("common.add"),variant:a(w)?"outline":"solid",color:a(w)?"primary":"gray",disabled:!a(w),onClick:vt},null,8,["label","variant","color","disabled"])])]),default:i(()=>[s(ae,{columns:a(it),rows:a(rt)},{"wallet-data":i(({row:n})=>[s($e,{text:n.wallet},{default:i(()=>[s(m,{class:"font-mono",label:n.shortenWallet,to:n.walletLink,variant:"link",padded:!1,size:"xs"},null,8,["label","to"])]),_:2},1032,["text"])]),"remove-data":i(({row:n})=>[p("div",Pa,[s(m,{icon:"i-heroicons-x-mark",variant:"soft",color:"red",onClick:()=>a(O).splice(n.index,1)},null,8,["onClick"])])]),_:1},8,["columns","rows"])]),_:1}),s(U,{ui:{body:{base:"space-y-4"}}},{header:i(()=>[p("h3",{class:"font-bold font-mono",textContent:b(a(o)("form.copy_purchase_link"))},null,8,Ra)]),default:i(()=>{var n;return[s(Ee,{label:a(o)("form.edition")},{default:i(()=>[s(Nt,{modelValue:a(W),"onUpdate:modelValue":t[5]||(t[5]=x=>H(W)?W.value=x:null),options:a(dt)},null,8,["modelValue","options"])]),_:1},8,["label"]),s(Ee,{label:a(o)("form.sales_channel_for_links")},{default:i(()=>[s(ce,{modelValue:a(X),"onUpdate:modelValue":t[6]||(t[6]=x=>H(X)?X.value=x:null),placeholder:"Channel ID(s), separated by commas (e.g. store01, store02)"},null,8,["modelValue"])]),_:1},8,["label"]),a(D).length>1?(h(),F(U,{key:0,ui:{header:{base:"flex justify-between items-center"},body:{padding:""}}},{header:i(()=>[p("h4",{class:"text-sm font-bold font-mono",textContent:b(a(o)("purchase_link.download_all_links"))},null,8,Oa),s(Le,{items:[[{label:a(o)("buttons.print_all_qr"),icon:"i-heroicons-qr-code",click:kt},{label:a(o)("buttons.download_all_links"),icon:"i-heroicons-arrow-down-on-square-stack",click:gt},{label:a(o)("buttons.shorten_all_links"),icon:"i-heroicons-sparkles",click:wt}]],popper:{placement:"top-end"}},{default:i(()=>[s(m,{icon:"i-heroicons-ellipsis-horizontal-20-solid",color:"gray",variant:"soft"})]),_:1},8,["items"])]),default:i(()=>[s(ae,{columns:[{key:"index",label:"#"},{key:"channel",label:a(o)("table.channel_id")},{key:"link",label:a(o)("purchase_link.download_links")}],rows:a(D),ui:{thead:"whitespace-nowrap"}},{"index-data":i(({index:x})=>[ge(b(x+1),1)]),"link-data":i(({row:x})=>[p("div",Ba,[s(m,{icon:"i-heroicons-qr-code",variant:"outline",size:"xs",onClick:ue=>q.value=x},null,8,["onClick"]),s(m,{icon:"i-heroicons-document-duplicate",size:"xs",variant:"outline",disabled:!x.url,onClick:ue=>Ue(x.url)},null,8,["disabled","onClick"]),s(m,{class:"font-mono break-all",label:x.url,to:x.url,color:"gray",variant:"outline",size:"xs",target:"_blank"},null,8,["label","to"])])]),_:1},8,["columns","rows"])]),_:1})):a(D)[0]?(h(),z("div",Va,[s(m,{icon:"i-heroicons-qr-code",variant:"outline",size:"xs",onClick:t[7]||(t[7]=x=>q.value=a(D)[0])}),s(m,{icon:"i-heroicons-document-duplicate",size:"xs",variant:"outline",disabled:!((n=a(D)[0])!=null&&n.url),onClick:t[8]||(t[8]=x=>{var ue;return Ue((ue=a(D)[0])==null?void 0:ue.url)})},null,8,["disabled"]),s(m,{icon:"i-heroicons-arrow-top-right-on-square",to:a(D)[0].url,target:"_blank",size:"xs",variant:"outline"},null,8,["to"]),s(ce,{class:"grow font-mono","model-value":a(D)[0].url,disabled:!0,color:"gray",variant:"outline",size:"xs"},null,8,["model-value"])])):L("",!0)]}),_:1})]),p("div",Wa,[s(m,{label:a(o)("common.save"),loading:a(E),size:"lg",disabled:a(E),onClick:yt},null,8,["label","loading","disabled"])])],64)):L("",!0)]),_:1})],64)):L("",!0),s(Fe,{modelValue:a(ie),"onUpdate:modelValue":t[10]||(t[10]=n=>H(ie)?ie.value=n:null)},{default:i(()=>[a(q)?(h(),F(Tt,{key:0,data:a(q).url,"file-name":at(a(q).channel),width:500,height:500},{header:i(()=>[p("h3",{class:"font-bold font-mono",textContent:b(a(o)("purchase_link.download_qr_modal"))},null,8,za),s(m,{icon:"i-heroicons-x-mark",color:"gray",variant:"ghost",onClick:t[9]||(t[9]=n=>ie.value=!1)})]),_:1},8,["data","file-name"])):L("",!0)]),_:1},8,["modelValue"]),s(Fe,{modelValue:a(te),"onUpdate:modelValue":t[11]||(t[11]=n=>H(te)?te.value=n:null)},{default:i(()=>[s(Ut,{"is-restock":!0,"restock-count":a(se),"iscn-id":a(_),onSubmit:Ct},null,8,["restock-count","iscn-id"])]),_:1},8,["modelValue"]),s($t,{transition:!1})]),_:1})}}});export{mo as default};
