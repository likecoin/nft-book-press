import{_ as Y}from"./CfKJKcgq.js";import{bQ as ce,bR as L,aQ as pe,a_ as fe,aS as u,aT as s,aU as c,bV as p,bi as k,bY as d,aV as S,bn as $,bo as j,aW as U,bW as v,b3 as A,bf as J,c$ as Q,aY as ge,bq as G,bX as H,c0 as ye,c1 as T,ba as f,eu as W,dc as z,dg as I,dU as R,dX as me}from"./2yXN0IN4.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},o=new e.Error().stack;o&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[o]="3a792947-07a4-4dc6-91f1-299767e10eb1",e._sentryDebugIdIdentifier="sentry-dbid-3a792947-07a4-4dc6-91f1-299767e10eb1")}catch{}})();const be={wrapper:"relative overflow-x-auto",base:"min-w-full table-fixed",divide:"divide-y divide-gray-300 dark:divide-gray-700",thead:"relative",tbody:"divide-y divide-gray-200 dark:divide-gray-800",caption:"sr-only",tr:{base:"",selected:"bg-gray-50 dark:bg-gray-800/50",expanded:"bg-gray-50 dark:bg-gray-800/50",active:"hover:bg-gray-50 dark:hover:bg-gray-800/50 cursor-pointer"},th:{base:"text-left rtl:text-right",padding:"px-4 py-3.5",color:"text-gray-900 dark:text-white",font:"font-semibold",size:"text-sm"},td:{base:"whitespace-nowrap",padding:"px-4 py-4",color:"text-gray-500 dark:text-gray-400",font:"",size:"text-sm"},checkbox:{padding:"ps-4"},loadingState:{wrapper:"flex flex-col items-center justify-center flex-1 px-6 py-14 sm:px-14",label:"text-sm text-center text-gray-900 dark:text-white",icon:"w-6 h-6 mx-auto text-gray-400 dark:text-gray-500 mb-4 animate-spin"},emptyState:{wrapper:"flex flex-col items-center justify-center flex-1 px-6 py-14 sm:px-14",label:"text-sm text-center text-gray-900 dark:text-white",icon:"w-6 h-6 mx-auto text-gray-400 dark:text-gray-500 mb-4"},expand:{icon:"transform transition-transform duration-200"},progress:{wrapper:"absolute inset-x-0 -bottom-[0.5px] p-0"},default:{sortAscIcon:"i-heroicons-bars-arrow-up-20-solid",sortDescIcon:"i-heroicons-bars-arrow-down-20-solid",sortButton:{icon:"i-heroicons-arrows-up-down-20-solid",trailing:!0,square:!0,color:"gray",variant:"ghost",class:"-m-1.5"},expandButton:{icon:"i-heroicons-chevron-down",color:"gray",variant:"ghost",size:"xs",class:"-my-1.5 align-middle"},checkbox:{color:"primary"},progress:{color:"primary",animation:"carousel"},loadingState:{icon:"i-heroicons-arrow-path-20-solid",label:"Loading..."},emptyState:{icon:"i-heroicons-circle-stack-20-solid",label:"No items."}}};function he(e){return e?e[0].toUpperCase()+e.slice(1):""}const b=ce(L.ui.strategy,L.ui.table,be);function ke(e,o){return me(e,o)}function N(e,o,g){return e===o?0:g==="asc"?e<o?-1:1:e>o?-1:1}function X(e){return new Set(e.map(o=>JSON.stringify(o)))}function ve(e){return o=>I(o,e)}const Se=fe({components:{UIcon:H,UButton:G,UProgress:J,UCheckbox:Y},inheritAttrs:!1,props:{modelValue:{type:Array,default:null},by:{type:[String,Function],default:()=>ke},rows:{type:Array,default:()=>[]},columns:{type:Array,default:null},columnAttribute:{type:String,default:"label"},sort:{type:Object,default:()=>({})},sortMode:{type:String,default:"auto"},sortButton:{type:Object,default:()=>b.default.sortButton},sortAscIcon:{type:String,default:()=>b.default.sortAscIcon},sortDescIcon:{type:String,default:()=>b.default.sortDescIcon},expandButton:{type:Object,default:()=>b.default.expandButton},expand:{type:Object,default:()=>null},loading:{type:Boolean,default:!1},loadingState:{type:Object,default:()=>b.default.loadingState},emptyState:{type:Object,default:()=>b.default.emptyState},caption:{type:String,default:null},progress:{type:Object,default:()=>b.default.progress},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})},multipleExpand:{type:Boolean,default:!0},singleSelect:{type:Boolean,default:!1}},emits:["update:modelValue","update:sort","update:expand","select:all"],setup(e,{emit:o,attrs:g}){const{ui:C,attrs:F}=ye("table",T(e,"ui"),b,T(e,"class")),D=f(()=>{const a=e.columns??Object.keys(e.rows[0]).map(i=>({key:i,label:he(i),sortable:!1,class:void 0,sort:N}));return a.find(i=>i.key==="select")||!e.modelValue?a:[{key:"select",sortable:!1,class:void 0,sort:N},...a]}),r=W(e,"sort",o,{passive:!0,defaultValue:z({},e.sort,{column:null,direction:"asc"})}),y=W(e,"expand",o,{passive:!0,defaultValue:z({},e.expand,{openedRows:[],row:null})}),E={column:r.value.column,direction:null},w=f(()=>{var i;if(!((i=r.value)!=null&&i.column)||e.sortMode==="manual")return e.rows;const{column:a,direction:n}=r.value;return e.rows.slice().sort((le,ie)=>{var P;const re=I(le,a),de=I(ie,a);return(((P=D.value.find(ue=>ue.key===a))==null?void 0:P.sort)??N)(re,de,n)})}),t=f({get(){return e.modelValue},set(a){o("update:modelValue",a)}}),m=f(()=>e.rows.length),l=f(()=>{const a=X(t.value),n=X(e.rows);return Array.from(a).filter(i=>n.has(i)).length}),O=f(()=>!t.value||!e.rows?!1:l.value>0&&l.value<m.value),B=f(()=>l.value===m.value),h=f(()=>e.emptyState===null?null:{...C.value.default.emptyState,...e.emptyState}),K=f(()=>e.loadingState===null?null:{...C.value.default.loadingState,...e.loadingState});function V(a,n){if(typeof e.by=="string"){const i=ve(e.by);return i(a)===i(n)}return e.by(a,n)}function M(a){return e.modelValue?t.value.some(n=>V(R(n),R(a))):!1}function Z(a){if(r.value.column===a.key){const n=!a.direction||a.direction==="asc"?"desc":"asc";r.value.direction===n?r.value=z({},E,{column:null,direction:"asc"}):r.value={column:r.value.column,direction:r.value.direction==="asc"?"desc":"asc"}}else r.value={column:a.key,direction:a.direction||"asc"}}function x(a){const n=window.getSelection();n&&n.toString().length>0||g.onSelect&&g.onSelect(a)}function _(a,n){g.onContextmenu&&g.onContextmenu(a,n)}function ee(){const a=[...t.value];e.rows.forEach(n=>{M(n)||a.push(n)}),t.value=a}function te(a){a?ee():t.value=[],o("select:all",a)}function ae(a,n){a?t.value=e.singleSelect?[n]:[...t.value,n]:t.value=t.value.filter(i=>!V(R(i),R(n)))}function ne(a,n,i=""){return I(a,n,i)}function q(a){var n;return(n=y.value)!=null&&n.openedRows?y.value.openedRows.some(i=>V(i,a)):!1}function oe(a){y.value={openedRows:q(a)?y.value.openedRows.filter(n=>!V(n,a)):e.multipleExpand?[...y.value.openedRows,a]:[a],row:a}}function se(a){if(a.sortable){if(r.value.column!==a.key)return"none";if(r.value.direction==="asc")return"ascending";if(r.value.direction==="desc")return"descending"}}return{ui:C,attrs:F,sort:r,columns:D,rows:w,selected:t,indeterminate:O,emptyState:h,loadingState:K,isAllRowChecked:B,onChangeCheckbox:ae,isSelected:M,onSort:Z,onSelect:x,onContextmenu:_,onChange:te,getRowData:ne,toggleOpened:oe,getAriaSort:se,isExpanded:q}}}),Ce=["aria-sort"],we={key:1},Be={key:0},Ve={key:0},$e=["colspan"],Ae={key:1},Re=["colspan"],Ie=["onClick","onContextmenu"],De={key:0},Ee={colspan:"100%"};function Oe(e,o,g,C,F,D){const r=Y,y=G,E=J,w=H;return s(),u("div",v({class:e.ui.wrapper},e.attrs),[c("table",{class:d([e.ui.base,e.ui.divide])},[e.$slots.caption||e.caption?p(e.$slots,"caption",{key:0},()=>[c("caption",{class:d(e.ui.caption)},S(e.caption),3)]):k("",!0),c("thead",{class:d(e.ui.thead)},[c("tr",{class:d(e.ui.tr.base)},[e.expand?(s(),u("th",{key:0,scope:"col",class:d(e.ui.tr.base)},o[0]||(o[0]=[c("span",{class:"sr-only"},"Expand",-1)]),2)):k("",!0),(s(!0),u($,null,j(e.columns,(t,m)=>(s(),u("th",{key:m,scope:"col",class:d([e.ui.th.base,e.ui.th.padding,e.ui.th.color,e.ui.th.font,e.ui.th.size,t.key==="select"&&e.ui.checkbox.padding,t.class]),"aria-sort":e.getAriaSort(t)},[!e.singleSelect&&e.modelValue&&t.key==="select"?p(e.$slots,"select-header",{key:0,indeterminate:e.indeterminate,checked:e.isAllRowChecked,change:e.onChange},()=>[U(r,v({"model-value":e.isAllRowChecked,indeterminate:e.indeterminate},{ref_for:!0},e.ui.default.checkbox,{"aria-label":"Select all",onChange:e.onChange}),null,16,["model-value","indeterminate","onChange"])]):p(e.$slots,`${t.key}-header`,{key:1,column:t,sort:e.sort,onSort:e.onSort},()=>[t.sortable?(s(),A(y,v({key:0,ref_for:!0},{...e.ui.default.sortButton||{},...e.sortButton},{icon:!e.sort.column||e.sort.column!==t.key?e.sortButton.icon||e.ui.default.sortButton.icon:e.sort.direction==="asc"?e.sortAscIcon:e.sortDescIcon,label:t[e.columnAttribute],onClick:l=>e.onSort(t)}),null,16,["icon","label","onClick"])):(s(),u("span",we,S(t[e.columnAttribute]),1))])],10,Ce))),128))],2),e.loading&&e.progress?(s(),u("tr",Be,[c("td",{colspan:0,class:d(e.ui.progress.wrapper)},[U(E,v({...e.ui.default.progress||{},...e.progress},{size:"2xs"}),null,16)],2)])):k("",!0)],2),c("tbody",{class:d(e.ui.tbody)},[e.loadingState&&e.loading&&!e.rows.length?(s(),u("tr",Ve,[c("td",{colspan:e.columns.length+(e.modelValue?1:0)+(e.expand?1:0)},[p(e.$slots,"loading-state",{},()=>[c("div",{class:d(e.ui.loadingState.wrapper)},[e.loadingState.icon?(s(),A(w,{key:0,name:e.loadingState.icon,class:d(e.ui.loadingState.icon),"aria-hidden":"true"},null,8,["name","class"])):k("",!0),c("p",{class:d(e.ui.loadingState.label)},S(e.loadingState.label),3)],2)])],8,$e)])):e.emptyState&&!e.rows.length?(s(),u("tr",Ae,[c("td",{colspan:e.columns.length+(e.modelValue?1:0)+(e.expand?1:0)},[p(e.$slots,"empty-state",{},()=>[c("div",{class:d(e.ui.emptyState.wrapper)},[e.emptyState.icon?(s(),A(w,{key:0,name:e.emptyState.icon,class:d(e.ui.emptyState.icon),"aria-hidden":"true"},null,8,["name","class"])):k("",!0),c("p",{class:d(e.ui.emptyState.label)},S(e.emptyState.label),3)],2)])],8,Re)])):(s(!0),u($,{key:2},j(e.rows,(t,m)=>(s(),u($,{key:m},[c("tr",{class:d([e.ui.tr.base,e.isSelected(t)&&e.ui.tr.selected,e.isExpanded(t)&&e.ui.tr.expanded,e.$attrs.onSelect&&e.ui.tr.active,t==null?void 0:t.class]),onClick:()=>e.onSelect(t),onContextmenu:l=>e.onContextmenu(l,t)},[e.expand?(s(),u("td",{key:0,class:d([e.ui.td.base,e.ui.td.padding,e.ui.td.color,e.ui.td.font,e.ui.td.size])},[e.$slots["expand-action"]?p(e.$slots,"expand-action",{key:0,row:t,isExpanded:e.isExpanded(t),toggle:()=>e.toggleOpened(t)}):(s(),A(y,v({key:1,disabled:t.disabledExpand},{ref_for:!0},{...e.ui.default.expandButton||{},...e.expandButton},{ui:{icon:{base:[e.ui.expand.icon,e.isExpanded(t)&&"rotate-180"].join(" ")}},onClickCapture:Q(l=>e.toggleOpened(t),["stop"])}),null,16,["disabled","ui","onClickCapture"]))],2)):k("",!0),(s(!0),u($,null,j(e.columns,(l,O)=>{var B;return s(),u("td",{key:O,class:d([e.ui.td.base,e.ui.td.padding,e.ui.td.color,e.ui.td.font,e.ui.td.size,l==null?void 0:l.rowClass,(B=t[l.key])==null?void 0:B.class,l.key==="select"&&e.ui.checkbox.padding])},[e.modelValue&&l.key==="select"?(s(),u("span",{key:0,onClickCapture:Q(()=>{},["stop"])},[p(e.$slots,"select-data",{checked:e.isSelected(t),change:h=>e.onChangeCheckbox(h,t)},()=>[U(r,v({"model-value":e.isSelected(t)},{ref_for:!0},e.ui.default.checkbox,{"aria-label":"Select row",onChange:h=>e.onChangeCheckbox(h,t)}),null,16,["model-value","onChange"])])],32)):p(e.$slots,`${l.key}-data`,{key:1,column:l,row:t,index:m,getRowData:h=>e.getRowData(t,l.key,h)},()=>[ge(S(e.getRowData(t,l.key)),1)])],2)}),128))],42,Ie),e.isExpanded(t)?(s(),u("tr",De,[c("td",Ee,[p(e.$slots,"expand",{row:t,index:m})])])):k("",!0)],64))),128))],2)],2)],16)}const Ne=pe(Se,[["render",Oe]]);export{Ne as _};
