import{a_ as H,b9 as v,b8 as D,b3 as f,aT as s,bh as X,aX as a,aW as c,aS as P,b4 as t,bP as G,aU as m,bj as Y,bt as L,bH as J,bg as q,bi as K,br as R,bD as Q,aY as ee,aV as M,ba as T,bf as Z,bs as ne,cs as te}from"./C_iIk3B2.js";import{_ as oe,a as ie}from"./CBTjIy1e.js";import{_ as W}from"./DoLT8sxl.js";import{_ as ae}from"./jkTzhJ-8.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},n=new e.Error().stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="0b549929-e44b-4585-8258-0674667cdce0",e._sentryDebugIdIdentifier="sentry-dbid-0b549929-e44b-4585-8258-0674667cdce0")}catch{}})();let $;const le=new Uint8Array(16);function se(){if(!$&&($=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!$))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return $(le)}const o=[];for(let e=0;e<256;++e)o.push((e+256).toString(16).slice(1));function de(e,n=0){return o[e[n+0]]+o[e[n+1]]+o[e[n+2]]+o[e[n+3]]+"-"+o[e[n+4]]+o[e[n+5]]+"-"+o[e[n+6]]+o[e[n+7]]+"-"+o[e[n+8]]+o[e[n+9]]+"-"+o[e[n+10]]+o[e[n+11]]+o[e[n+12]]+o[e[n+13]]+o[e[n+14]]+o[e[n+15]]}const pe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),z={randomUUID:pe};function F(e,n,i){if(z.randomUUID&&!e)return z.randomUUID();e=e||{};const h=e.random||(e.rng||se)();return h[6]=h[6]&15|64,h[8]=h[8]&63|128,de(h)}const ce={class:"flex justify-between items-center"},ue={class:"flex justify-center"},re={key:1,class:"flex justify-center items-center w-full gap-[8px] py-[36px]"},me={class:"flex justify-end items-center"},he={key:1,class:"flex justify-end items-center"},_e=H({__name:"InfoModal",props:{modelValue:{type:Boolean},readOnly:{type:Boolean,default:!1},shippingInfo:{type:Array,default:()=>[]}},emits:["update:modelValue","update-shipping-rates"],setup(e,{emit:n}){const i=e,h=n,u=v(()=>!C.value),y=v(()=>C.value),B=v(()=>u.value?"Editing Shipping Options":"Shipping Options Info"),r=D(i.shippingInfo.length?i.shippingInfo.map(d=>{var b,p;return{price:d.priceInDecimal/100,nameEn:(b=d.name)==null?void 0:b.en,nameZh:(p=d.name)==null?void 0:p.zh}}):[]),w=v(()=>r.value.length>1),C=D(i.readOnly);function U(){h("update:modelValue",!1)}function A(){C.value=!1}function S(d,b,p){var x;r.value[p][b]=(x=d.target)==null?void 0:x.value}function O(){if(!r.value.length){r.value.push({index:F(),price:10,nameEn:"Standard Shipping",nameZh:"標準寄送"});return}r.value.push({index:F(),price:20,nameEn:"International Shipping",nameZh:"國際寄送"})}function _(d){r.value.splice(d,1)}function g(){h("update-shipping-rates",r.value.map(d=>({name:{en:d.nameEn,zh:d.nameZh},priceInDecimal:Math.round(Number(d.price)*100)}))),U()}return(d,b)=>{const p=q,x=ae,E=W,j=L,N=Q,l=X;return s(),f(l,{"model-value":e.modelValue},{default:a(()=>[c(j,{ui:{header:{base:"font-bold font-mono"}}},{header:a(()=>[m("div",ce,[ee(M(t(B))+" ",1),c(p,{color:"gray",variant:"ghost",icon:"i-heroicons-x-mark-20-solid",onClick:U})])]),footer:a(()=>[m("div",me,[t(u)?(s(),f(p,{key:0,label:"Save",onClick:g})):(s(),P("div",he,[c(p,{label:"Set Shipping Options",variant:"outline",onClick:A},{trailing:a(()=>[c(N,{name:"i-heroicons-arrow-right-20-solid"})]),_:1})]))])]),default:a(()=>[t(r).length?(s(),f(G(t(w)?"ul":"div"),{key:0,class:"space-y-4"},{default:a(()=>[(s(!0),P(K,null,Y(t(r),(I,k)=>(s(),f(G(t(w)?"li":"div"),{key:I.index},{default:a(()=>[c(j,{ui:{body:{base:"space-y-4"},footer:{base:"flex justify-end items-center"}}},J({default:a(()=>[c(E,{label:"Name of this shipping option",ui:{container:"space-y-2"}},{default:a(()=>[c(x,{value:I.nameEn,placeholder:"Shipping option name",disabled:t(y),onInput:V=>S(V,"nameEn",k)},null,8,["value","disabled","onInput"]),c(x,{placeholder:"運送選項名稱",value:I.nameZh,disabled:t(y),onInput:V=>S(V,"nameZh",k)},null,8,["value","disabled","onInput"])]),_:2},1024),c(E,{label:"Price(USD) of this shipping option"},{default:a(()=>[c(x,{value:I.price,type:"number",step:"0.01",min:0,disabled:t(y),onInput:V=>S(V,"price",k)},null,8,["value","disabled","onInput"])]),_:2},1024)]),_:2},[t(w)&&t(u)?{name:"footer",fn:a(()=>[c(p,{label:"Delete",variant:"outline",color:"red",onClick:V=>_(k)},null,8,["onClick"])]),key:"0"}:void 0]),1024)]),_:2},1024))),128)),m("div",ue,[t(u)?(s(),f(p,{key:0,label:"Add Options",variant:"outline",icon:"i-heroicons-plus-20-solid",onClick:O})):R("",!0)])]),_:1})):(s(),P("div",re,[b[0]||(b[0]=m("span",null," No items ",-1)),t(u)?(s(),f(p,{key:0,label:"Add Options",variant:"outline",icon:"i-heroicons-plus-20-solid",onClick:O})):R("",!0)]))]),_:1})]),_:1},8,["model-value"])}}}),fe={class:"flex flex-row justify-between items-center"},ge={class:"flex justify-start items-center gap-[8px]"},ye={class:"font-bold font-mono"},be={class:"flex flex-col gap-[8px] items-start"},ve={class:"text-center"},xe={class:"text-center"},Se={class:"text-center"},Ie={key:1,class:"px-[24px] py-[12px]"},ke={class:"flex flex-col gap-[16px]"},Me=H({__name:"RateTable",props:{isLoading:{type:Boolean,default:!1},isShowPhysicalGoodsCheckbox:{type:Boolean,default:!1},shippingInfo:{type:Array,default:()=>[]},modelValue:{type:Boolean},isShowSettingModalButton:{type:Boolean,default:!1}},emits:["update:modelValue","update-shipping-rates"],setup(e,{emit:n}){const i=e,h=n,u=D(!1),y=D(i.modelValue),B=D(i.isShowPhysicalGoodsCheckbox);T(()=>i.modelValue,_=>{y.value=_}),T(y,_=>{h("update:modelValue",_)});const r=v(()=>!i.isShowPhysicalGoodsCheckbox),w=v(()=>i.isShowPhysicalGoodsCheckbox),C=v(()=>!!(w.value&&i.isShowSettingModalButton)),U=v(()=>{if(r.value)return i.shippingInfo.length?{icon:"i-heroicons-pencil-square",text:"Edit",action:S}:{icon:"i-heroicons-plus-20-solid",text:"Add",action:S};if(w.value)return i.shippingInfo.length?{icon:"i-heroicons-eye-20-solid",text:"View Current Shipping Options",action:S}:{icon:"i-heroicons-plus-20-solid",text:"Add Shipping Options",action:O}}),A=v(()=>i.shippingInfo.length?i.shippingInfo.map((_,g)=>({index:g+1,name:_.name,price:_.priceInDecimal/100})):[]);function S(){u.value=!0}function O(){B.value=!1,u.value=!0}return(_,g)=>{const d=q,b=oe,p=ie,x=ne,E=W,j=_e,N=L;return s(),f(N,{ui:{body:{padding:""}}},{header:a(()=>{var l,I,k;return[m("div",fe,[m("div",ge,[m("h3",ye,M(_.$t("form.shipping_options")),1),te(_.$slots,"header")]),t(C)?R("",!0):(s(),f(d,{key:0,icon:(l=t(U))==null?void 0:l.icon,label:(I=t(U))==null?void 0:I.text,loading:e.isLoading,onClick:(k=t(U))==null?void 0:k.action},null,8,["icon","label","loading","onClick"]))])]}),default:a(()=>[t(r)?(s(),f(b,{key:0,columns:[{key:"index"},{key:"name",label:"Name"},{key:"price",label:"Price (USD)"}],rows:t(A)},{"name-data":a(({row:l})=>[m("div",be,[m("span",ve,"en: "+M(l.name.en),1),m("span",xe,"zh: "+M(l.name.zh),1)])]),"price-data":a(({row:l})=>[m("span",Se,M(l.price),1)]),_:1},8,["rows"])):(s(),P("div",Ie,[c(E,{label:"Physical Goods",ui:{label:{base:"font-mono font-bold"}}},{default:a(()=>[m("div",ke,[c(p,{modelValue:t(y),"onUpdate:modelValue":g[0]||(g[0]=l=>Z(y)?y.value=l:null),name:"hasShipping",label:"Includes physical good that requires shipping",disabled:!e.shippingInfo.length},null,8,["modelValue","disabled"]),e.shippingInfo.length?R("",!0):(s(),f(x,{key:0,icon:"i-heroicons-face-frown-solid",color:"yellow",variant:"solid",title:"Please enable this feature in the advanced settings."}))])]),_:1})])),t(u)?(s(),f(j,{key:2,modelValue:t(u),"onUpdate:modelValue":g[1]||(g[1]=l=>Z(u)?u.value=l:null),"read-only":t(B),"shipping-info":e.shippingInfo,onUpdateShippingRates:g[2]||(g[2]=l=>h("update-shipping-rates",l))},null,8,["modelValue","read-only","shipping-info"])):R("",!0)]),_:3})}}});export{Me as _,F as v};
