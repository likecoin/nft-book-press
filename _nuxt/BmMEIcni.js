import{a_ as $,bm as j,b0 as q,bk as z,bx as O,bn as W,b8 as y,b9 as S,ba as X,b1 as Y,bb as G,b3 as k,aX as s,b2 as B,aT as g,br as h,aW as I,b4 as c,bs as H,bO as J,aY as K,bt as Q,bf as Z,aU as T,aV as ee,bg as oe}from"./C7XQIrPM.js";import{_ as te}from"./CZhspGV5.js";import{_ as ne}from"./Db3mQhMw.js";import{_ as ae}from"./DAsO9jpg.js";import{u as se}from"./C6NCxhyU.js";import"./D_LCcsEc.js";import"./BRjOu1Ku.js";(function(){try{var l=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},r=new l.Error().stack;r&&(l._sentryDebugIds=l._sentryDebugIds||{},l._sentryDebugIds[r]="cd114c13-1319-41c2-850c-77dd704ebbad",l._sentryDebugIdIdentifier="sentry-dbid-cd114c13-1319-41c2-850c-77dd704ebbad")}catch{}})();const le={class:"font-bold font-mono"},_e=$({__name:"index",setup(l){const r=j(),d=q(),N=se(),U=z(),L=O(),{listNFTBookCollections:V,listModeratedNFTBookCollections:P}=L,{getClassMetadataById:D,lazyFetchClassMetadataById:C}=N,{token:M}=W(U),u=y(""),v=y(!1),w=y([]),x=y([]),m=[{label:"Current Collection Listing",key:"current"},{label:"Viewable Collection Listing",key:"viewable"}],b=S({get(){const e=m.findIndex(o=>o.key===r.query.tab);return e===-1?0:e},set(e){B(d({query:{tab:m[e].key}}),{replace:!0})}});X(v,e=>{e&&(u.value="")});const R=[{key:"name",label:"Collection Name",sortable:!0},{key:"priceInUSD",label:"Price in USD",sortable:!0},{key:"pendingAction",label:"Pending Action",sortable:!0},{key:"sold",label:"Sold",sortable:!0}];Y(async()=>{const e=[V()];M.value&&e.push(P());const[o,t]=await Promise.all(e);w.value=o==null?void 0:o.list,w.value.forEach(n=>{n.classIds.forEach(a=>C(a))}),x.value=(t==null?void 0:t.list)||[],x.value.forEach(n=>{n.classIds.forEach(a=>C(a))})});const A=S(()=>(m[b.value].key==="viewable"?x:w).value.map(e=>{var o,t,n,a,_;return{collectionId:e.id,name:(o=e.name)==null?void 0:o.en,priceInUSD:((t=e.typePayload)==null?void 0:t.priceInDecimal)/100,classIds:e.classIds,classNames:(n=e.classIds)==null?void 0:n.map(p=>{var f;return(f=D(p))==null?void 0:f.name}),pendingAction:((a=e.typePayload)==null?void 0:a.pendingNFTCount)||0,sold:((_=e.typePayload)==null?void 0:_.sold)||0}}));G({title:"Book Collection Management",ogTitle:"Book Collection Management"});async function E(e){await B(d({name:"nft-book-store-collection-status-collectionId",params:{collectionId:e.collectionId}}))}return(e,o)=>{const t=H,n=J,a=oe,_=te,p=Q,f=ne,F=ae;return g(),k(F,{ui:{constrained:""}},{default:s(()=>[c(u)?(g(),k(t,{key:0,class:"mt-4",icon:"i-heroicons-exclamation-triangle",color:"red",variant:"soft",title:`${c(u)}`,"close-button":{icon:"i-heroicons-x-mark-20-solid",color:"red",variant:"link",padded:!1},onClose:o[0]||(o[0]=i=>u.value="")},null,8,["title"])):h("",!0),c(v)?(g(),k(n,{key:1,animation:"carousel"},{indicator:s(()=>o[2]||(o[2]=[K(" Loading... ")])),_:1})):h("",!0),I(p,{ui:{header:{base:"flex justify-between items-center gap-4"}}},{header:s(()=>[o[3]||(o[3]=T("h2",{class:"text-xl font-bold font-mono"}," Liker Land Book Collections ",-1)),I(a,{icon:"i-heroicons-plus-circle",label:"New Collection",to:c(d)({name:"nft-book-store-collection-new"})},null,8,["to"])]),default:s(()=>[I(f,{modelValue:c(b),"onUpdate:modelValue":o[1]||(o[1]=i=>Z(b)?b.value=i:null),class:"w-full",items:m},{item:s(({item:i})=>[(g(),k(p,{key:i.key,ui:{header:{base:"flex justify-between items-center gap-4"},body:{base:"divide-y divide-gray-200 dark:divide-gray-700",padding:""}}},{header:s(()=>[T("h2",le,ee(i.label),1)]),default:s(()=>[I(_,{columns:R,rows:c(A),onSelect:E},null,8,["rows"])]),_:2},1024))]),_:1},8,["modelValue"])]),_:1})]),_:1})}}});export{_e as default};
